"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[654],{46273:(Lr,K,c)=>{c.r(K),c.d(K,{OrderModule:()=>Vr});var p=c(60177),d=c(89417),m=c(22960),re=c(32454),ie=c(66900),k=c(91022),ae=c(70255),oe=c(63789),se=c(98982),le=c.n(se),de=c(556),h=c(8147),j=c(56803),W=c(65430),me=c(41631),u=c(1530),T=c(72510),b=c(51188),P=c(23128),e=c(54438);let ce=(()=>{class i{constructor(){}ngOnInit(){}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-order-map"]],decls:0,vars:0,template:function(r,n){},encapsulation:2})}}return i})();var q=c(21413),_=c(56977),N=c(37021),x=c(35335),D=c(45236),O=c(70980),pe=c(99437),ge=c(18810),g=c(36158),I=c(33826),R=c(3888),Z=c(26364);const he=(i,l)=>({"btn-outline-success":i,"btn-outline-danger":l});function _e(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",15)(1,"div",16),e.nrm(2,"label",17),e.j41(3,"div",18)(4,"ng-select",19),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.getChange())}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.cityId,n)||(a.cityId=n),e.Njj(n)}),e.k0s()()(),e.j41(5,"div",20),e.nrm(6,"label",21),e.j41(7,"div",18)(8,"ng-select",22),e.bIt("change",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.getChange())}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.categoryId,n)||(a.categoryId=n),e.Njj(n)}),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.cityId),e.Y8G("items",t.cities)("multiple",!1),e.R7$(4),e.R50("ngModel",t.categoryId),e.Y8G("items",t.categories)("multiple",!0)}}function ue(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goNext())}),e.nrm(1,"i",24)(2,"span",25),e.k0s()}}function be(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goBack())}),e.nrm(1,"i",26)(2,"span",27),e.k0s()}}function fe(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goBack())}),e.nrm(1,"span",27)(2,"i",26),e.k0s()}}function Ce(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goNext())}),e.nrm(1,"span",25)(2,"i",24),e.k0s()}}function ve(i,l){if(1&i&&(e.qex(0),e.j41(1,"th",38),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.SpI(" ",t.teamName," ")}}function je(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",40),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.j41(4,"span",41),e.EFF(5),e.k0s(),e.bVm()),2&i){const t=e.XpG(2).$implicit;e.R7$(2),e.JRh(t.serviceName),e.R7$(3),e.JRh(t.orderId)}}function Fe(i,l){1&i&&(e.qex(0),e.nrm(1,"span",42)(2,"br"),e.bVm())}function Me(i,l){if(1&i&&(e.qex(0),e.j41(1,"td"),e.DNE(2,je,6,2,"ng-container",39)(3,Fe,3,0,"ng-container",39),e.k0s(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(2),e.Y8G("ngIf",!t.isHoliday),e.R7$(),e.Y8G("ngIf",t.isHoliday)}}function ye(i,l){1&i&&e.nrm(0,"span",48)}function Se(i,l){1&i&&e.nrm(0,"span",49)}function Te(i,l){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"td")(2,"div",43)(3,"input",44),e.bIt("change",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.onTimeAvaliables())}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG().$implicit;return e.DH7(a.isSelected,n)||(a.isSelected=n),e.Njj(n)}),e.k0s(),e.j41(4,"label",45),e.DNE(5,ye,1,0,"span",46)(6,Se,1,0,"span",47),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",t.isSelected),e.Y8G("id",t.id),e.R7$(),e.FS9("for",t.id),e.Y8G("ngClass",e.l_i(6,he,t.isSelected,!t.isSelected)),e.R7$(),e.Y8G("ngIf",t.isSelected),e.R7$(),e.Y8G("ngIf",!t.isSelected)}}function Ie(i,l){if(1&i&&(e.qex(0),e.DNE(1,Me,4,2,"ng-container",39)(2,Te,7,9,"ng-container",39),e.bVm()),2&i){const t=l.$implicit;e.R7$(),e.Y8G("ngIf",!t.isAvaliable),e.R7$(),e.Y8G("ngIf",t.isAvaliable)}}function Re(i,l){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.DNE(4,Ie,3,2,"ng-container",37),e.k0s(),e.bVm()),2&i){const t=l.$implicit;e.R7$(3),e.JRh(t.diaplayName),e.R7$(),e.Y8G("ngForOf",t.availableTimes)}}function ke(i,l){if(1&i&&(e.j41(0,"div",28)(1,"div",29)(2,"div",30),e.nrm(3,"ngx-ui-loader",31),e.j41(4,"div",32)(5,"div",33)(6,"table",34)(7,"thead",35)(8,"tr"),e.nrm(9,"th",36),e.DNE(10,ve,3,1,"ng-container",37),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,Re,5,2,"ng-container",37),e.k0s()()()()()()()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("loaderId","timeAvailable"),e.R7$(7),e.Y8G("ngForOf",t.teams),e.R7$(2),e.Y8G("ngForOf",t.timesList)}}let ee=(()=>{class i{constructor(t,r,n,a,s){this.alertService=t,this.orderService=r,this.datePipe=n,this.translateService=a,this.loader=s,this.title="orderManagement.timeAvailable.title",this.searchForm={date:new Date},this.cities=[],this.categories=[],this.dateCurrent=new Date,this.timesList=[],this.teams=[],this.onTimeSelected=new e.bkB,this.notifier=new q.B,this.isShowFilter=!0,this.isFirst=!0}ngOnInit(){this.lang=this.translateService.currentLang,this.GetTimeAvailableLookup(),this.getTimeAvailables()}GetTimeAvailableLookup(){this.orderService.GetTimeAvailableLookup().pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.cities=t.data.cities,this.categories=t.data.categories})}getChange(){setTimeout(()=>{this.getTimeAvailables()},50)}getTimeAvailables(){if(!this.validateForm())return;let r={};r.serviceCategoryId=this.categoryId,r.cityId=this.cityId,this.searchForm.date&&(r.date=this.datePipe.transform(this.searchForm.date,"yyyy-MM-ddT00:00:00.000")),this.loader.startLoader("timeAvailable"),this.orderService.GetAvailableTime(r).subscribe(n=>{this.loader.stopLoader("timeAvailable"),this.isFirst=!1,this.timesList=n.data.timesList,this.teams=n.data.teams})}validateForm(){return this.cityId?this.categoryId?!!this.searchForm.date||(this.isFirst||this.alertService.error("orderManagement.timeAvailable.selectDate"),!1):(this.isFirst||this.alertService.error("orderManagement.timeAvailable.selectServiceCategory"),!1):(this.isFirst||this.alertService.error("orderManagement.timeAvailable.selectCity"),!1)}goBack(){this.searchForm.date=new Date(this.searchForm.date),this.searchForm.date.setDate(this.searchForm.date.getDate()-1),this.getTimeAvailables()}goNext(){this.searchForm.date=new Date(this.searchForm.date),this.searchForm.date.setDate(this.searchForm.date.getDate()+1),this.getTimeAvailables()}onTimeAvaliables(){const t=this.timesList.flatMap(r=>r.availableTimes.filter(n=>n.isSelected).map(n=>({OrderCode:0,teamCode:n.teamId,workTimeCode:n.timeId})));this.onTimeSelected.emit(t)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(R.u),e.rXU(I.Q),e.rXU(p.vh),e.rXU(h.c$),e.rXU(u.eD))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["time-available"]],inputs:{isShowFilter:"isShowFilter",cityId:"cityId",categoryId:"categoryId"},outputs:{onTimeSelected:"onTimeSelected"},decls:17,vars:12,consts:[[1,"card","d-print-none"],[1,"card-body"],["class","row  justify-content-around  mb-2",4,"ngIf"],[1,"row","justify-content-center"],[1,"col-12","col-md-3"],["class","btn w-auto btn-sm btn-success fs-5",3,"click",4,"ngIf"],["class","btn  w-auto btn-sm btn-success fs-5",3,"click",4,"ngIf"],[1,"col-12","col-sm-6","col-md-4"],[1,"input-group"],["id","basic-addon1",1,"input-group-text","border","btn","btn-success",3,"click"],[1,"ri-calendar-line","align-bottom","me-1"],["type","text","mwlFlatpickr","","id","date","name","date",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"change","ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-3","text-right"],["class","btn   w-auto  btn-sm btn-success fs-5",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"row","justify-content-around","mb-2"],[1,"col-12","col-md-4"],["translate","orderManagement.timeAvailable.city",1,"required"],[1,"search-box"],["id","cityId","name","cityId","bindValue","id","bindLabel","name",3,"change","ngModelChange","ngModel","items","multiple"],[1,"col-12","col-md-6"],["translate","orderManagement.timeAvailable.categories",1,"required"],["id","categoryId","name","categoryId","bindValue","id","bindLabel","name",3,"change","ngModelChange","ngModel","items","multiple"],[1,"btn","w-auto","btn-sm","btn-success","fs-5",3,"click"],[1,"ri-arrow-left-circle-line","mx-2"],["translate","orderManagement.timeAvailable.next"],[1,"ri-arrow-right-circle-line","mx-2"],["translate","orderManagement.timeAvailable.back"],[1,"row"],[1,"col-12"],[1,"card"],["fgsColor","rgba(255,255,255,0)",3,"loaderId"],["id","printTable",1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-border","text-center","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","border","table-light"],["translate","orderManagement.timeAvailable.time"],[4,"ngFor","ngForOf"],["scope","col",1,"border-1","text-center"],[4,"ngIf"],[1,"badge","d-inline-block","bg-primary-subtle","text-primary"],[1,"badge","d-inline-block","bg-success-subtle","text-success"],["translate","orderManagement.timeAvailable.holidayTeam",1,"badge","d-inline-block","bg-warning-subtle","text-warning"],[1,"p-0","flex-wrap","text-center"],["type","checkbox",1,"btn-check",3,"change","ngModelChange","ngModel","id"],[1,"btn","btn-outline-primary",3,"ngClass","for"],["translate","orderManagement.timeAvailable.block",4,"ngIf"],["translate","orderManagement.timeAvailable.unBlock",4,"ngIf"],["translate","orderManagement.timeAvailable.block"],["translate","orderManagement.timeAvailable.unBlock"]],template:function(r,n){1&r&&(e.j41(0,"div",0)(1,"div",1),e.DNE(2,_e,9,6,"div",2),e.j41(3,"div",3)(4,"div",4),e.DNE(5,ue,3,0,"button",5)(6,be,3,0,"button",6),e.k0s(),e.j41(7,"div",7)(8,"div",8)(9,"span",9),e.bIt("click",function(){return n.getTimeAvailables()}),e.nrm(10,"i",10),e.k0s(),e.j41(11,"input",11),e.nI1(12,"translate"),e.bIt("change",function(){return n.getChange()}),e.mxI("ngModelChange",function(s){return e.DH7(n.searchForm.date,s)||(n.searchForm.date=s),s}),e.k0s()()(),e.j41(13,"div",12),e.DNE(14,fe,3,0,"button",5)(15,Ce,3,0,"button",13),e.k0s()()()(),e.DNE(16,ke,13,3,"div",14)),2&r&&(e.R7$(2),e.Y8G("ngIf",n.isShowFilter),e.R7$(3),e.Y8G("ngIf","ar"!=n.lang),e.R7$(),e.Y8G("ngIf","ar"==n.lang),e.R7$(5),e.FS9("placeholder",e.bMT(12,10,"orderManagement.timeAvailable.date")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.date),e.R7$(3),e.Y8G("ngIf","ar"!=n.lang),e.R7$(),e.Y8G("ngIf","ar"==n.lang),e.R7$(),e.Y8G("ngIf",n.timesList.length>0))},dependencies:[p.YU,p.Sq,p.bT,h.Mm,d.me,d.Zm,d.BC,d.vS,u.Cv,k.kL,T.vr,h.D9]})}}return i})();var w=c(5779),E=c(29935);function Ne(i,l){1&i&&(e.j41(0,"div",69),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function xe(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",57)(1,"div",58)(2,"label",59),e.EFF(3,"orderManagement.order.name"),e.k0s(),e.j41(4,"input",60,2),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.name,n)||(a.form.agentCodeNavigation.name=n),e.Njj(n)}),e.k0s(),e.DNE(6,Ne,2,0,"div",61),e.k0s(),e.j41(7,"div",58)(8,"label",62),e.EFF(9,"orderManagement.order.mobile"),e.k0s(),e.j41(10,"input",63,3),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.mobile,n)||(a.form.agentCodeNavigation.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",58)(13,"label",20),e.EFF(14,"orderManagement.order.cityName"),e.k0s(),e.j41(15,"ng-select",64),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return a.form.agentCodeNavigation.districtCode=null,e.Njj(a.getDistricts(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.cityCode,n)||(a.form.agentCodeNavigation.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",58)(17,"label",20),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"ng-select",65),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.districtCode,n)||(a.form.agentCodeNavigation.districtCode=n),e.Njj(n)}),e.k0s()(),e.j41(20,"div",58)(21,"label",66),e.EFF(22,"orderManagement.order.email"),e.k0s(),e.j41(23,"input",67,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.email,n)||(a.form.agentCodeNavigation.email=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",58)(26,"label",20),e.EFF(27,"orderManagement.order.HowYouKnowAboutUs"),e.k0s(),e.j41(28,"ng-select",68),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.agentCodeNavigation.channelId,n)||(a.form.agentCodeNavigation.channelId=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.sdS(5),r=e.XpG();e.R7$(4),e.R50("ngModel",r.form.agentCodeNavigation.name),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",r.form.agentCodeNavigation.mobile),e.R7$(5),e.Y8G("items",r.cities)("multiple",!1),e.R50("ngModel",r.form.agentCodeNavigation.cityCode),e.R7$(4),e.Y8G("items",r.districts)("multiple",!1),e.R50("ngModel",r.form.agentCodeNavigation.districtCode),e.R7$(4),e.R50("ngModel",r.form.agentCodeNavigation.email),e.R7$(5),e.Y8G("items",r.channels)("multiple",!1),e.R50("ngModel",r.form.agentCodeNavigation.channelId)}}function De(i,l){1&i&&(e.j41(0,"tr",88)(1,"th",89),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",90),e.EFF(4," orderManagement.order.service "),e.k0s(),e.j41(5,"th",90),e.EFF(6," orderManagement.order.price "),e.k0s(),e.j41(7,"th",91),e.EFF(8," orderManagement.order.notes "),e.k0s(),e.j41(9,"th",91),e.EFF(10," orderManagement.order.actions "),e.k0s()())}function Oe(i,l){if(1&i&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.price," ")}}function we(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",98)(1,"input",99,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.priceModel,n)||(a.priceModel=n),e.Njj(n)}),e.k0s(),e.j41(3,"button",94),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.ChangInput())}),e.nrm(4,"i",100),e.k0s(),e.j41(5,"button",96),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.showEdit=!1)}),e.nrm(6,"i",101),e.k0s()()}if(2&i){const t=e.XpG(3);e.R7$(),e.R50("ngModel",t.priceModel)}}function Ee(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",92)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.DNE(6,Oe,2,1,"span",50)(7,we,7,1,"div",93),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"button",94),e.bIt("click",function(){const n=e.eBV(t),a=n.$implicit,s=n.rowIndex,o=e.XpG(2);return e.Njj(o.OpenChangInput(s,a))}),e.nrm(12,"i",95),e.k0s(),e.j41(13,"button",96),e.bIt("click",function(){const n=e.eBV(t).rowIndex,a=e.XpG(2);return e.Njj(a.deleteService(n))}),e.nrm(14,"i",97),e.k0s()()()}if(2&i){const t=l.$implicit,r=l.rowIndex,n=e.XpG(2);e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.service),e.R7$(2),e.Y8G("ngIf",!n.showEdit),e.R7$(),e.Y8G("ngIf",n.showEdit),e.R7$(2),e.JRh(t.notes)}}function Ge(i,l){1&i&&(e.j41(0,"tr")(1,"td",102),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Ve(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"div",19)(2,"label",20),e.EFF(3,"orderManagement.order.serviceCategory"),e.k0s(),e.j41(4,"ng-select",71,5),e.bIt("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return a.form.formServices.serviceCode=null,e.Njj(a.getServicesByCategory(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.serviceCategoryCode,n)||(a.form.serviceCategoryCode=n),e.Njj(n)}),e.k0s()(),e.j41(6,"div",19)(7,"label",20),e.EFF(8,"orderManagement.order.service"),e.k0s(),e.j41(9,"ng-select",72,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.formServices.serviceCode,n)||(a.form.formServices.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(11,"div",73)(12,"label",59),e.EFF(13,"orderManagement.order.price"),e.k0s(),e.j41(14,"input",74,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.formServices.price,n)||(a.form.formServices.price=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",73)(17,"label",75),e.EFF(18,"orderManagement.order.notes"),e.k0s(),e.j41(19,"input",76,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.formServices.notes,n)||(a.form.formServices.notes=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",77)(22,"button",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(23,"i",79),e.k0s()(),e.j41(24,"div",80)(25,"div",81)(26,"p-table",82,9),e.DNE(28,De,11,0,"ng-template",83)(29,Ee,15,5,"ng-template",84)(30,Ge,4,3,"ng-template",85),e.k0s()()(),e.j41(31,"div",86)(32,"label",75),e.EFF(33,"orderManagement.order.extraDiscount"),e.k0s(),e.j41(34,"input",87,10),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.DiscountAmount,n)||(a.form.DiscountAmount=n),e.Njj(n)}),e.bIt("blur",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.checkTotal())}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("items",t.serviceCategories)("multiple",!0),e.R50("ngModel",t.form.serviceCategoryCode),e.R7$(5),e.Y8G("items",t.services),e.R50("ngModel",t.form.formServices.serviceCode),e.R7$(5),e.R50("ngModel",t.form.formServices.price),e.R7$(5),e.R50("ngModel",t.form.formServices.notes),e.R7$(7),e.Y8G("value",t.form.tbOrderServices)("lazy",!0),e.R7$(8),e.R50("ngModel",t.form.DiscountAmount)}}function Le(i,l){if(1&i){const t=e.RV6();e.j41(0,"time-available",103),e.bIt("onTimeSelected",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onTimeSelected(n))}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("categoryId",t.form.serviceCategoryCode)("cityId",t.form.agentCodeNavigation.cityCode)("isShowFilter",!1)}}function Xe(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"div",104)(2,"label",105),e.EFF(3," orderManagement.order.isUrgent "),e.k0s(),e.j41(4,"p-checkbox",106),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isUrgent,n)||(a.form.isUrgent=n),e.Njj(n)}),e.k0s()()(),e.j41(5,"div",13)(6,"div",107)(7,"label",108),e.EFF(8," orderManagement.order.notes "),e.k0s(),e.j41(9,"textarea",109,2),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(11,"                                                "),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.form.isUrgent),e.Y8G("binary",!0),e.R7$(5),e.R50("ngModel",t.form.notes)}}function Ue(i,l){1&i&&(e.j41(0,"tr",88)(1,"th",89),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",90),e.EFF(4," orderManagement.order.paymentMethods "),e.k0s(),e.j41(5,"th",90),e.EFF(6," orderManagement.order.paid "),e.k0s(),e.j41(7,"th",91),e.EFF(8," orderManagement.order.actions "),e.k0s()())}function Be(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",92)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"button",117),e.nrm(9,"i",95),e.k0s(),e.j41(10,"button",96),e.bIt("click",function(){const n=e.eBV(t).rowIndex,a=e.XpG(2);return e.Njj(a.deletePayment(n))}),e.nrm(11,"i",97),e.k0s()()()}if(2&i){const t=l.$implicit,r=l.rowIndex;e.R7$(2),e.JRh(r+1),e.R7$(2),e.JRh(t.paymentType),e.R7$(2),e.JRh(t.value)}}function $e(i,l){1&i&&(e.j41(0,"tr")(1,"td",118),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Ae(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",70)(1,"div",110)(2,"label",20),e.EFF(3," orderManagement.order.paymentMethods"),e.k0s(),e.j41(4,"ng-select",111),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.formPayment.paymentTypeCode,n)||(a.form.formPayment.paymentTypeCode=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div",110)(6,"label",112),e.EFF(7,"orderManagement.order.paid"),e.k0s(),e.j41(8,"input",113,11),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.formPayment.value,n)||(a.form.formPayment.value=n),e.Njj(n)}),e.k0s()(),e.j41(10,"div",114)(11,"label",112),e.EFF(12,"orderManagement.order.paid"),e.k0s(),e.j41(13,"input",115),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileSelected(n))}),e.k0s()(),e.j41(14,"div",116)(15,"button",78),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addPayment())}),e.nrm(16,"i",79),e.k0s()(),e.j41(17,"div",80)(18,"div",81)(19,"p-table",82,9),e.DNE(21,Ue,9,0,"ng-template",83)(22,Be,12,3,"ng-template",84)(23,$e,4,3,"ng-template",85),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("items",t.paymentTypes)("multiple",!1),e.R50("ngModel",t.form.formPayment.paymentTypeCode),e.R7$(4),e.R50("ngModel",t.form.formPayment.value),e.R7$(11),e.Y8G("value",t.form.tbOrderPayments)("lazy",!0)}}function Ye(i,l){if(1&i&&(e.j41(0,"tr")(1,"td",54)(2,"h5",119)(3,"a",120),e.EFF(4),e.k0s()()(),e.j41(5,"td",34),e.EFF(6),e.k0s()()),2&i){const t=l.$implicit;e.R7$(4),e.JRh(t.service),e.R7$(2),e.JRh(t.price)}}function He(i,l){1&i&&(e.j41(0,"tr")(1,"td",121),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.SpI(" ",e.bMT(3,1,"orderManagement.order.noServices")," "))}let ze=(()=>{class i{constructor(t,r,n,a,s,o,f,C){this.routerActive=t,this.translateService=r,this.baseService=n,this.alertService=a,this.datePipe=s,this.modalService=o,this.ngxLoader=f,this.router=C,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={DiscountAmount:0,serviceCategoryCode:[],formServices:{serviceCode:null,price:null,notes:null},formPayment:{paymentTypeCode:null,value:null,attachRecietPath:"",fileName:""},agentCodeNavigation:{},tbOrderTeams:[],tbOrderPayments:[],tbOrderServices:[]},this.todayDate="",this.idForm=0,this.totalPaid=0,this.priceModel=0,this.priceModelIndex=0,this.subtotal=0,this.total=0,this.isResolveList=!0,this.extraDiscountCalc=!1,this.employeeGroups=[],this.notifier=new q.B,this.mainDelay=100,this.loaderSearchShap=g.cX,this.loaderOperationShap=g.$$,this.operationLoader=g.ZW,this.isEditForm=!1,this.showEdit=!1,this.channels=[],this.districts=[],this.cities=[],this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.fileName="",this.base64String=null;const v=new Date;this.todayDate=`${v.getFullYear()}-${(v.getMonth()+1).toString().padStart(2,"0")}-${v.getDate().toString().padStart(2,"0")}`,console.log(this.todayDate)}nextDate(){let t=this.todayDate.split("-");this.todayDate=`${t[0]}-${t[1]}-${+t[2]+1}`,console.log(this.todayDate)}OpenChangInput(t,r){this.showEdit=!0,console.log(r),this.priceModel=r.price,this.priceModelIndex=t}ChangInput(){this.form.tbOrderServices[`${this.priceModelIndex}`].price=this.priceModel,this.showEdit=!1}previousDate(){let t=this.todayDate.split("-");this.todayDate=`${t[0]}-${t[1]}-${+t[2]-1}`,console.log(this.todayDate)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.orders"},{label:"orderManagement.order.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetOrderLookUp()}onFileSelected(t){const r=t.target;if(r.files&&r.files.length>0){const n=r.files[0];this.fileName=n.name,console.log(n);const a=new FileReader;a.onload=()=>{this.base64String=a.result,console.log("Base64 String:",this.base64String)},a.onerror=s=>{console.error("Error reading file:",s)},a.readAsDataURL(n)}}addService(){let t=this.form.formServices,r=this.services.filter(a=>a.serviceCode==t.serviceCode)[0];this.form.tbOrderServices.push({service:r.name,serviceCode:r.code,price:t.price,notes:t.notes});let n=0;this.form.tbOrderServices.forEach(a=>{n+=+a.price}),this.subtotal=n,console.log(this.subtotal),this.checkTotal(),this.resetServiceForm()}addPayment(){let t=this.form.formPayment,r=this.paymentTypes.filter(a=>a.id==t.paymentTypeCode)[0];this.form.tbOrderPayments.push({paymentType:r.name,paymentTypeCode:t.paymentTypeCode,value:t.value,fileName:this.fileName});let n=0;this.form.tbOrderPayments.forEach(a=>{n+=+a.value}),this.totalPaid=n,this.resetPaymentForm()}checkTotal(){this.total=this.subtotal-+this.form.DiscountAmount}deleteService(t){this.form.tbOrderServices.splice(t,1)}deletePayment(t){this.form.tbOrderPayments.splice(t,1)}resetServiceForm(){let t=this.form.formServices;t.serviceCode=void 0,t.price=null,t.notes=null}resetPaymentForm(){let t=this.form.formPayment;t.paymentTypeCode=null,t.value=null,t.attachRecietPath=null,t.fileName=null}configRoute(){this.routerActive.data.pipe((0,_.Q)(this.notifier)).subscribe(t=>{let r=t.data.data;r&&(this.isEditForm=!0,this.form=r,"Proposed"==r.leadsTypes?this.form.leadsTypes=1:"Inquiry"==r.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}GetOrderLookUp(){this.baseService.GetOrderLookUp().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cityNames,this.orderTypes=t.data.orderStatus,this.serviceCategories=t.data.serviceCategories,this.paymentTypes=t.data.paymentTypes},t=>{console.log(t)})}getDistricts(t){this.ngxLoader.startLoader(g.ZW),this.baseService.districtsByCity(t).subscribe(r=>{this.districts=r.data,this.ngxLoader.stopLoader(g.ZW)},r=>{console.log(r)})}getServicesByCategory(t){console.log(t),this.ngxLoader.startLoader(g.ZW),this.baseService.getServicesByCategory(t).subscribe(r=>{this.ngxLoader.stopLoader(g.ZW),this.services=r.data},r=>{console.log(r)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapRegisterForm(t){let r={...t};return r.id=0,r}registerEntity(){this.ngxLoader.startLoader(g.ZW);let t=this.mapRegisterForm(this.form);this.baseService.registerNewOrder(t).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.ZW)),(0,pe.W)(r=>(0,ge.$)(r))).subscribe(r=>{r.success?(this.alertService.success(),this.router.navigateByUrl("/order/list")):this.alertService.error("general.message."+r.message)},r=>{this.alertService.error("general.message."+r)})}editEntity(){this.baseService.editPut(this.form.id,this.form).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.ZW))).subscribe(t=>{t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getTranslationText(t){let r="";return this.translateService.get(t).pipe((0,_.Q)(this.notifier)).subscribe(n=>{r=n}),r}onTimeSelected(t){this.form.tbOrderTeams=t,console.log(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(m.Bq),e.rXU(u.eD),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-leads-operation"]],decls:103,vars:53,consts:[["formEntity","ngForm"],["customNav","ngbNav"],["name","ngModel"],["mobile","ngModel"],["email","ngModel"],["serviceCategoryCode","ngModel"],["serviceCode","ngModel"],["price","ngModel"],["notes","ngModel"],["tableMaster",""],["DiscountAmount","ngModel"],["value","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-xl-8"],[1,"card"],[1,"card-body","checkout-tab"],[1,"step-arrow-nav","mt-n3","mx-n3","mb-3"],[1,"row","p-3"],[1,"col-12","col-md-6","mb-2"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","orderTypesId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["ngbNav","","role","tablist",1,"nav","nav-pills","custom-nav","nav-justified",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink","","data-bs-toggle","tab","role","tab",1,"nav-link","fs-15","p-3"],[1,"ri-user-3-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],["ngbNavContent",""],[1,"ri-shopping-cart-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-alarm-line","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-sticky-note-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"ri-money-dollar-box-fill","fs-16","p-2","bg-primary-subtle","text-primary","rounded-circle","align-middle","mx-2"],[1,"tab-content"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-end"],[1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"col-xl-4"],[1,"card-header"],[1,"d-flex"],[1,"flex-grow-1"],[1,"card-title","mb-0"],[1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-borderless","align-middle","mb-0"],[1,"table-light","text-muted"],["scope","col","translate","",2,"width","90px"],["colspan","2","scope","col","translate","",1,"text-end"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"border-top","hsl(226, 36%, 80%) solid 1px!important"],["colspan","2",1,"fw-semibold"],[1,"fw-semibold","text-end"],["colspan","2"],[1,"table-active"],[1,"fw-semibold"],[1,"row","mt-2"],[1,"col-12","col-md-6","mb-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","text","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","cityCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","DistrictCode","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","email","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","email","type","text","id","email",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","channelId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["translate","",1,"text-danger","text-center"],[1,"row","mt-3"],["name","serviceCategoryCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","serviceCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","ngModel"],[1,"col-12","col-md-5","mb-2"],["InputTirmFilter","","name","price","type","text","id","price","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2","mb-2","d-flex","justify-content-center","align-items-end"],["type","button",1,"btn","btn-success","btn-icon","waves-effect","waves-light",3,"click"],[1,"ri-add-fill"],[1,"col-12","mt-3"],[1,"table-responsive"],["dataKey","id",3,"value","lazy"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-12","col-md-4","my-3"],["InputTirmFilter","","name","DiscountAmount","type","text","id","DiscountAmount","required","",1,"form-control","fs-6",3,"ngModelChange","blur","ngModel"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],[1,"fs-5"],["class","d-flex align-items-center",4,"ngIf"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"d-flex","align-items-center"],["InputTirmFilter","","name","price","type","text","id","price",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"ri-check-double-fill","align-bottom","mx-1"],[1,"ri-close-fill","align-bottom"],["colspan","6"],[3,"onTimeSelected","categoryId","cityId","isShowFilter"],[1,"col-12","col-md-6","mb-2","d-flex","mb-3"],["for","isUrgent","translate","",1,"fw-bold","form-label","w-25"],["inputId","isUrgent","name","isUrgent",1,"w-75",3,"ngModelChange","ngModel","binary"],[1,"col-12","col-md-6","mb-2","d-flex","align-items-center"],["for","name","translate","",1,"fw-bold","form-label","w-25"],["InputTirmFilter","","name","note","rows","2","id","note",1,"form-control","w-75","fs-6",3,"ngModelChange","ngModel"],[1,"col-6","col-md-4","mb-2"],["name","paymentTypeCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","value","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","value","type","number","id","value",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3","mb-2"],["type","file",1,"form-control","fs-6",3,"change"],[1,"col-6","col-md-1","mb-2","d-flex","justify-content-center","align-items-end"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2"],["colspan","5"],[1,"fs-14"],["routerLink","/ecommerce/product-detail/",1,"text-body"],["colspan","3",1,"text-center"]],template:function(r,n){if(1&r){const a=e.RV6();e.nrm(0,"app-breadcrumbs",12),e.nI1(1,"translate"),e.j41(2,"div",13)(3,"div",14)(4,"div",15)(5,"form",null,0)(7,"div",16)(8,"div",17)(9,"div",18)(10,"div",19)(11,"label",20),e.EFF(12,"orderManagement.order.orderType"),e.k0s(),e.j41(13,"ng-select",21),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.form.agentCodeNavigation.agentAddStatusCode,o)||(n.form.agentCodeNavigation.agentAddStatusCode=o),e.Njj(o)}),e.k0s()(),e.j41(14,"div",19)(15,"label",20),e.EFF(16,"orderManagement.order.orderSource"),e.k0s(),e.j41(17,"ng-select",21),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.form.channelCode,o)||(n.form.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(18,"ul",22,1)(20,"li",23)(21,"a",24),e.nrm(22,"i",25),e.EFF(23),e.nI1(24,"translate"),e.k0s(),e.DNE(25,xe,29,13,"ng-template",26),e.k0s(),e.j41(26,"li",23)(27,"a",24),e.nrm(28,"i",27),e.EFF(29),e.nI1(30,"translate"),e.k0s(),e.DNE(31,Ve,36,10,"ng-template",26),e.k0s(),e.j41(32,"li",23)(33,"a",24),e.nrm(34,"i",28),e.EFF(35),e.nI1(36,"translate"),e.k0s(),e.DNE(37,Le,1,3,"ng-template",26),e.k0s(),e.j41(38,"li",23)(39,"a",24),e.nrm(40,"i",29),e.EFF(41),e.nI1(42,"translate"),e.k0s(),e.DNE(43,Xe,12,3,"ng-template",26),e.k0s(),e.j41(44,"li",23)(45,"a",24),e.nrm(46,"i",30),e.EFF(47),e.nI1(48,"translate"),e.k0s(),e.DNE(49,Ae,24,6,"ng-template",26),e.k0s()()(),e.j41(50,"div",31),e.nrm(51,"div",32),e.k0s()(),e.j41(52,"div",33)(53,"div",34)(54,"button",35),e.bIt("click",function(){return e.eBV(a),e.Njj(n.OnSubmit())}),e.nrm(55,"i",36)(56,"span",37),e.k0s()()()()()(),e.j41(57,"div",38)(58,"div",15)(59,"div",39)(60,"div",40)(61,"div",41)(62,"h5",42),e.EFF(63),e.nI1(64,"translate"),e.k0s()()()(),e.j41(65,"div",43)(66,"div",44)(67,"table",45)(68,"thead",46)(69,"tr")(70,"th",47),e.EFF(71,"orderManagement.order.services"),e.k0s(),e.j41(72,"th",48),e.EFF(73,"orderManagement.order.price"),e.k0s()()(),e.j41(74,"tbody"),e.DNE(75,Ye,7,2,"tr",49)(76,He,4,3,"tr",50),e.j41(77,"tr",51)(78,"td",52),e.EFF(79),e.nI1(80,"translate"),e.k0s(),e.j41(81,"td",53),e.EFF(82),e.k0s()(),e.j41(83,"tr")(84,"td",54),e.EFF(85),e.nI1(86,"translate"),e.k0s(),e.j41(87,"td",34),e.EFF(88),e.k0s()(),e.j41(89,"tr",55)(90,"th",54),e.EFF(91),e.nI1(92,"translate"),e.k0s(),e.j41(93,"td",34)(94,"span",56),e.EFF(95),e.k0s()()(),e.j41(96,"tr",55)(97,"th",54),e.EFF(98),e.nI1(99,"translate"),e.k0s(),e.j41(100,"td",34)(101,"span",56),e.EFF(102),e.k0s()()()()()()()()()()}if(2&r){const a=e.sdS(19);e.FS9("title",0==n.isEditForm?n.addOrders:e.bMT(1,31,n.editOrders)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(13),e.Y8G("items",n.orderTypes)("multiple",!1),e.R50("ngModel",n.form.agentCodeNavigation.agentAddStatusCode),e.R7$(4),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.form.channelCode),e.R7$(),e.Y8G("activeId",2),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.SpI(" ",e.bMT(24,33,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.SpI(" ",e.bMT(30,35,"orderManagement.order.services")," "),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(3),e.SpI(" ",e.bMT(36,37,"orderManagement.order.AvailableTimes")," "),e.R7$(3),e.Y8G("ngbNavItem",4),e.R7$(3),e.SpI(" ",e.bMT(42,39,"orderManagement.order.notes")," "),e.R7$(3),e.Y8G("ngbNavItem",5),e.R7$(3),e.SpI(" ",e.bMT(48,41,"orderManagement.order.paid")," "),e.R7$(4),e.Y8G("ngbNavOutlet",a),e.R7$(12),e.JRh(e.bMT(64,43,"orderManagement.order.OrderSummary")),e.R7$(12),e.Y8G("ngForOf",n.form.tbOrderServices),e.R7$(),e.Y8G("ngIf",0==n.form.tbOrderServices.length),e.R7$(3),e.SpI("",e.bMT(80,45,"orderManagement.order.SubTotal"),": "),e.R7$(3),e.JRh(n.subtotal),e.R7$(3),e.SpI("",e.bMT(86,47,"orderManagement.order.Discount"),":"),e.R7$(3),e.JRh(n.form.DiscountAmount),e.R7$(3),e.SpI("",e.bMT(92,49,"orderManagement.order.Total")," :"),e.R7$(4),e.SpI(" ",n.total," "),e.R7$(3),e.SpI("",e.bMT(99,51,"orderManagement.order.TotalPaid")," :"),e.R7$(4),e.SpI(" ",n.totalPaid," ")}},dependencies:[p.Sq,p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,b.Wk,Z.m,ee,h.Mm,j.XI,w.Ei,W.Sc,T.vr,E.m,h.D9],encapsulation:2})}}return i})();var G=c(75622),V=c(62984),L=c(12260),X=c(16229),U=c(12822),B=c(91426),$=c(91580),A=c(88148),z=c(15084),Y=c(40724),te=c(14221);function Pe(i,l){1&i&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",33),e.nrm(10,"i",31),e.EFF(11," orderManagement.order.creationUser "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," orderManagement.order.cityName "),e.k0s(),e.j41(15,"th",35),e.nrm(16,"i",31),e.EFF(17," orderManagement.order.districtName "),e.k0s(),e.j41(18,"th",36),e.nrm(19,"i",31),e.EFF(20," orderManagement.order.agentName "),e.k0s(),e.j41(21,"th",37),e.nrm(22,"i",31),e.EFF(23," orderManagement.order.channelName "),e.k0s(),e.j41(24,"th",38),e.nrm(25,"i",31),e.EFF(26," orderManagement.order.mobile "),e.k0s(),e.j41(27,"th",39),e.nrm(28,"i",31),e.EFF(29," orderManagement.order.visitDate "),e.k0s(),e.j41(30,"th",40),e.nrm(31,"i",31),e.EFF(32," orderManagement.order.workTimes "),e.k0s(),e.j41(33,"th",41),e.nrm(34,"i",31),e.EFF(35," orderManagement.order.services "),e.k0s(),e.nrm(36,"th",42),e.k0s())}function Je(i,l){1&i&&e.nrm(0,"span",55)}function Qe(i,l){if(1&i&&(e.j41(0,"span",56),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function qe(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",43)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,Je,1,0,"span",45)(14,Qe,2,1,"span",46),e.k0s(),e.j41(15,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(52);return e.Njj(a.openModalClient(n.agentCode,s))}),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td")(29,"span",47)(30,"div",48)(31,"button",49),e.nrm(32,"i",50),e.k0s(),e.j41(33,"ul",51)(34,"li")(35,"span",52),e.nrm(36,"i",53)(37,"span",54),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,r=l.rowIndex;e.R7$(2),e.JRh(r+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(7,13,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(2),e.SpI(" ",t.agentName,""),e.R7$(2),e.SpI(" ",t.channelName,""),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.SpI(" ",e.i5U(23,16,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.workTimes,""),e.R7$(2),e.SpI(" ",t.services,"")}}function Ze(i,l){1&i&&(e.j41(0,"div",57),e.EFF(1," general.table.noData"),e.k0s())}function Ke(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",58)(1,"div",59),e.nrm(2,"ngb-pagination-info",60),e.j41(3,"table-length",61),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",62)(5,"ngb-pagination",63),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function We(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",64),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function et(i,l){1&i&&e.nrm(0,"client-profile-main")}let tt=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.cityService=v,this.districtService=F,this.channelService=M,this.excelService=y,this.router=S,this.title="orderManagement.order.serviceAfterSale",this.titleOperation="orderManagement.order.titleOperation",this.searchForm={},this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.configRoute(),this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}OnSearch(t){this.ngxLoader.startLoader(g.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(g.a7);var t=this.searchForm.dates;t+void 0&&"to"in t?(this.pagination.visitDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.visitDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null),(t=this.searchForm.finishedDates)+void 0&&"to"in t?(this.pagination.finishedDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.finishedDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.finishedDateFrom=null,this.pagination.finishedDateTo=null),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.pagination.filterForLastTwoDays=!0,this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(g.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModalClient(t,r,n="xl"){this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(B.V),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-service-after-sale"]],features:[e.Vt3],decls:53,vars:57,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","finishedDates","name","finishedDates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","creationUser","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","districtName","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","5%"],["pSortableColumn","channelName","translate","",2,"width","10%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","visitDate","translate","",2,"width","10%"],["pSortableColumn","workTimes","translate","",2,"width","10%"],["pSortableColumn","services","translate","",2,"width","10%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const a=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.nI1(1,"translate"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(6,8),e.j41(7,"div",9)(8,"div",10)(9,"input",11),e.nI1(10,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(11,"i",12),e.k0s()(),e.j41(12,"div",9)(13,"div",10)(14,"input",13),e.nI1(15,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(16,"i",12),e.k0s()(),e.j41(17,"div",9)(18,"div",10)(19,"input",11),e.nI1(20,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(21,"i",12),e.k0s()(),e.j41(22,"div",9)(23,"div",10)(24,"ng-select",14),e.nI1(25,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(26,"div",9)(27,"div",10)(28,"ng-select",15),e.nI1(29,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(30,"div",9)(31,"div",10)(32,"ng-select",16),e.nI1(33,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(34,"div",17)(35,"input",18),e.nI1(36,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.dates,o)||(n.searchForm.dates=o),e.Njj(o)}),e.k0s()(),e.j41(37,"div",17)(38,"input",19),e.nI1(39,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.finishedDates,o)||(n.searchForm.finishedDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(40,"div",20),e.nrm(41,"ngx-ui-loader",21),e.j41(42,"div",22)(43,"p-table",23,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(45,Pe,37,0,"ng-template",24)(46,qe,38,19,"ng-template",25),e.k0s()(),e.DNE(47,Ze,2,0,"div",26)(48,Ke,6,8,"div",27),e.k0s()()()(),e.DNE(49,We,1,0,"ng-template",null,1,e.C5r)(51,et,1,0,"ng-template",null,2,e.C5r)}2&r&&(e.FS9("title",e.bMT(1,39,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,41,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(15,43,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(20,45,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(25,47,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(29,49,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(33,51,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(36,53,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(39,55,"orderManagement.order.finishedDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.finishedDates),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.bT,d.me,d.Q0,d.BC,d.vS,m.tg,m.do,m.U0,m.s5,k.kL,Z.m,$.g,A.p,z.w,Y.b,te.t,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,E.m,p.vh,h.D9],encapsulation:2})}}return i})();var nt=c(59350);function rt(i,l){1&i&&(e.j41(0,"tr",26)(1,"th",27),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",28),e.nrm(4,"i",29),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",30),e.nrm(7,"i",29),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",31),e.nrm(10,"i",29),e.EFF(11," orderManagement.order.cityName "),e.k0s(),e.j41(12,"th",32),e.nrm(13,"i",29),e.EFF(14," orderManagement.order.status "),e.k0s(),e.j41(15,"th",33),e.nrm(16,"i",29),e.EFF(17," orderManagement.order.agentName "),e.k0s(),e.j41(18,"th",34),e.nrm(19,"i",29),e.EFF(20," orderManagement.order.channelName "),e.k0s(),e.j41(21,"th",35),e.EFF(22," orderManagement.order.assignTo "),e.k0s(),e.j41(23,"th",36),e.EFF(24," orderManagement.order.workTimes "),e.k0s(),e.j41(25,"th",37),e.nrm(26,"i",29),e.EFF(27," orderManagement.order.visitDate "),e.k0s(),e.j41(28,"th",38),e.nrm(29,"i",29),e.EFF(30," orderManagement.order.services "),e.k0s(),e.nrm(31,"th",39),e.k0s())}function it(i,l){1&i&&e.nrm(0,"span",54)}function at(i,l){if(1&i&&(e.j41(0,"span",42),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function ot(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",55),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function st(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",55),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function lt(i,l){if(1&i&&(e.nrm(0,"i",56),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",57),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",58),e.EFF(9)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function dt(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",40)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.j41(8,"span",42),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.DNE(12,it,1,0,"span",43)(13,at,2,1,"span",44),e.k0s(),e.j41(14,"td")(15,"span"),e.nrm(16,"span",45),e.k0s()(),e.j41(17,"td",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(49);return e.Njj(a.openModalClient(n.agentCode,s))}),e.j41(18,"span",46),e.EFF(19),e.k0s(),e.nrm(20,"br"),e.j41(21,"span",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(22),e.nrm(23,"i",48),e.k0s()(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.DNE(27,ot,4,1,"ng-container",49),e.k0s(),e.j41(28,"td"),e.DNE(29,st,4,1,"ng-container",49),e.k0s(),e.j41(30,"td"),e.EFF(31),e.nI1(32,"date"),e.k0s(),e.j41(33,"td"),e.EFF(34),e.k0s(),e.j41(35,"td"),e.DNE(36,lt,10,9,"ng-template",null,3,e.C5r),e.nrm(38,"i",50),e.j41(39,"button",51),e.nrm(40,"i",52)(41,"span",53),e.k0s()()()}if(2&i){const t=l.$implicit,r=l.rowIndex,n=e.sdS(37),a=e.XpG();e.R7$(2),e.JRh(r+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(7,19,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(2),e.ZvI("badge ",a.getStatus(t),""),e.R7$(),e.FS9("translate",a.getTrnslate(t)),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.SpI(" ",t.channelName,""),e.R7$(2),e.Y8G("ngForOf",a.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",a.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(32,22,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(4),e.Y8G("ngbTooltip",n)}}function mt(i,l){1&i&&(e.j41(0,"div",59),e.EFF(1," general.table.noData "),e.k0s())}function ct(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",60)(1,"div",61),e.nrm(2,"ngb-pagination-info",62),e.j41(3,"table-length",63),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",64)(5,"ngb-pagination",65),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function pt(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",66),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function gt(i,l){1&i&&e.nrm(0,"client-profile-main",67)}let ht=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.countLoad=2,this.configRoute(),this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),console.log(this.searchForm),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModalClient(t,r,n="xl"){this.clientSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-all-order"]],features:[e.Vt3],decls:50,vars:50,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationDate","translate","",2,"width","13%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","agentName","translate","",2,"width","12%"],["pSortableColumn","channelName","translate","",2,"width","7%"],["pSortableColumn","assignTo","translate","",2,"width","8%"],["pSortableColumn","workTimes","translate","",2,"width","8%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["pSortableColumn","services","translate","",2,"width","10%"],["translate","",2,"width","25%"],[1,"fs-5"],[3,"click"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[3,"translate"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button",1,"btn","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-checkbox-circle-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.view"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-time-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],["","clientSelected"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(4,8),e.j41(5,"div",9)(6,"div",10)(7,"input",11),e.nI1(8,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"input",13),e.nI1(13,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(14,"i",12),e.k0s()(),e.j41(15,"div",9)(16,"div",10)(17,"input",11),e.nI1(18,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(19,"i",12),e.k0s()(),e.j41(20,"div",9)(21,"div",10)(22,"ng-select",14),e.nI1(23,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(24,"div",9)(25,"div",10)(26,"ng-select",15),e.nI1(27,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(28,"div",9)(29,"div",10)(30,"ng-select",16),e.nI1(31,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(32,"div",17)(33,"input",18),e.nI1(34,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.dates,o)||(n.searchForm.dates=o),e.Njj(o)}),e.k0s()(),e.j41(35,"div",17)(36,"input",18),e.nI1(37,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(38,"div",19)(39,"div",20)(40,"p-table",21,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(42,rt,32,0,"ng-template",22)(43,dt,42,25,"ng-template",23),e.k0s()(),e.DNE(44,mt,2,0,"div",24)(45,ct,6,8,"div",25),e.k0s()()()(),e.DNE(46,pt,1,0,"ng-template",null,1,e.C5r)(48,gt,1,0,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,34,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,36,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,38,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(23,40,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,42,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(31,44,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(34,46,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(37,48,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.me,d.Q0,d.BC,d.vS,m.s5,k.kL,$.g,A.p,z.w,Y.b,te.t,h.Mm,j.XI,w.Ei,j.Tg,T.vr,m.md,E.m,p.vh,h.D9],encapsulation:2})}}return i})();function _t(i,l){1&i&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.agentName "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," orderManagement.order.mobile "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," orderManagement.order.cityName "),e.k0s(),e.nrm(18,"th",35),e.k0s())}function ut(i,l){if(1&i&&(e.nrm(0,"i",45),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",46),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function bt(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.pendingCode))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"span",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(12),e.nrm(13,"i",39),e.k0s()(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.DNE(17,ut,6,5,"ng-template",null,2,e.C5r),e.j41(19,"div",40),e.nrm(20,"i",41),e.j41(21,"button",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(45);return e.Njj(a.openModal(n.pendingCode,s))}),e.nrm(22,"i",43)(23,"span",44),e.k0s()()()()}if(2&i){const t=l.$implicit,r=l.rowIndex,n=e.sdS(18);e.R7$(2),e.JRh(r+1),e.R7$(2),e.SpI("#SO# ",t.pendingCode,""),e.R7$(2),e.JRh(e.i5U(7,7,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.name),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(5),e.Y8G("ngbTooltip",n)}}function ft(i,l){1&i&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function Ct(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function vt(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",54,3),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",55),e.j41(3,"div",56)(4,"div",57)(5,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",59)(7,"div",60),e.nrm(8,"lord-icon",61),e.j41(9,"div",62),e.nrm(10,"h3",63)(11,"p",64),e.k0s()(),e.j41(12,"div",65),e.nrm(13,"button",66),e.j41(14,"button",67),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let jt=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.titlePending",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.isShowMenu=!1,this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.baseService.getPendingOrders(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(g.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Ordew_Pending",[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}openModal(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onMenuShow(){this.isShowMenu=!this.isShowMenu}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-pending-order"]],features:[e.Vt3],decls:46,vars:46,consts:[["tableMaster",""],["recallModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","name","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button",1,"btn","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-phone-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.call"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6),e.nrm(3,"ngx-ui-loader",7),e.j41(4,"base-filter",8),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,9),e.j41(6,"div",10)(7,"div",11)(8,"input",12),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",13),e.k0s()(),e.j41(11,"div",10)(12,"div",11)(13,"input",14),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",13),e.k0s()(),e.j41(16,"div",10)(17,"div",11)(18,"input",12),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",13),e.k0s()(),e.j41(21,"div",10)(22,"div",11)(23,"ng-select",15),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",10)(26,"div",11)(27,"ng-select",16),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",10)(30,"div",11)(31,"ng-select",17),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",18)(34,"input",19),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",20)(37,"div",21)(38,"p-table",22,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,_t,19,0,"ng-template",23)(41,bt,24,10,"ng-template",24),e.k0s()(),e.DNE(42,ft,2,0,"div",25)(43,Ct,6,8,"div",26),e.k0s()()()(),e.DNE(44,vt,15,3,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","searchLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.s5,k.kL,$.g,A.p,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,p.vh,h.D9],encapsulation:2})}}return i})();var Ft=c(45312),Mt=c(21626);let yt=(()=>{class i{constructor(t){this.http=t,this.baseUrl=Ft.c.apiUrl+"OrderPending/"}GetCallHistory(t){return this.http.get(this.baseUrl+"GetCallHistory/"+t)}static{this.\u0275fac=function(r){return new(r||i)(e.KVO(Mt.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function St(i,l){1&i&&(e.j41(0,"tr",29)(1,"th",30),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",31),e.nrm(4,"i",32),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",33),e.EFF(7," orderManagement.order.lastCallDate "),e.k0s(),e.j41(8,"th",34),e.nrm(9,"i",32),e.EFF(10," orderManagement.order.agentName "),e.k0s(),e.j41(11,"th",35),e.nrm(12,"i",32),e.EFF(13," orderManagement.order.mobile "),e.k0s(),e.j41(14,"th",36),e.nrm(15,"i",32),e.EFF(16," orderManagement.order.cityName "),e.k0s(),e.j41(17,"th",37),e.nrm(18,"i",32),e.EFF(19," orderManagement.order.callCounter "),e.k0s(),e.nrm(20,"th",38),e.k0s())}function Tt(i,l){if(1&i&&(e.nrm(0,"i",60),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",61),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function It(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",39)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td")(11,"span",40),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(12),e.nrm(13,"i",41),e.k0s()(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(49);return e.Njj(a.onCallHistoryModal(n.pendingCode,s))}),e.EFF(17),e.nrm(18,"i",43),e.k0s(),e.j41(19,"td"),e.DNE(20,Tt,6,5,"ng-template",null,4,e.C5r),e.j41(22,"div",44)(23,"div",45),e.nrm(24,"i",46),e.j41(25,"button",47),e.nrm(26,"i",48),e.k0s(),e.j41(27,"ul",49)(28,"li",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s))}),e.j41(29,"a",51),e.nrm(30,"i",52)(31,"span",53),e.k0s()(),e.j41(32,"li",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s))}),e.j41(33,"a",51),e.nrm(34,"i",54)(35,"span",55),e.k0s()(),e.j41(36,"li",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s))}),e.j41(37,"a",51),e.nrm(38,"i",56)(39,"span",57),e.k0s()(),e.j41(40,"li",50),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s))}),e.j41(41,"a",51),e.nrm(42,"i",58)(43,"span",59),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,r=l.rowIndex,n=e.sdS(21);e.R7$(2),e.JRh(r+1),e.R7$(2),e.SpI("#SO#",t.pendingCode,""),e.R7$(2),e.SpI(" ",e.i5U(7,8,t.lastCallDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(3),e.JRh(t.name),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.SpI("",t.callCounter," "),e.R7$(7),e.Y8G("ngbTooltip",n)}}function Rt(i,l){1&i&&(e.j41(0,"div",62),e.EFF(1," general.table.noData "),e.k0s())}function kt(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",63)(1,"div",64),e.nrm(2,"ngb-pagination-info",65),e.j41(3,"table-length",66),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",67)(5,"ngb-pagination",68),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Nt(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",69),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function xt(i,l){1&i&&e.nrm(0,"h4",85)}function Dt(i,l){if(1&i&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.LHq(" ",e.bMT(2,4,"orderManagement.order.RecallMessageCount")," ",t.selectedCallCounter," ",e.bMT(3,6,"orderManagement.order.times")," ",e.bMT(4,8,"orderManagement.order.RecallMessageCount2")," ")}}function Ot(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",70,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",71),e.j41(3,"div",72)(4,"div",73)(5,"button",74),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",75)(7,"div",76),e.nrm(8,"lord-icon",77),e.j41(9,"div",78),e.DNE(10,xt,1,0,"h4",79)(11,Dt,5,10,"h4",80),e.nrm(12,"p",81),e.k0s()(),e.j41(13,"div",82),e.nrm(14,"button",83),e.j41(15,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.Y8G("ngIf",t.selectedCallCounter<=2),e.R7$(),e.Y8G("ngIf",t.selectedCallCounter>2)}}function wt(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",70,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",71),e.j41(3,"div",72)(4,"div",73)(5,"button",74),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",75)(7,"div",86)(8,"div",87)(9,"span",88),e.EFF(10," 01 "),e.k0s()(),e.j41(11,"div",89)(12,"h6",90),e.EFF(13),e.k0s(),e.j41(14,"p",91),e.EFF(15),e.nI1(16,"date"),e.k0s()(),e.j41(17,"div",92)(18,"p",91),e.EFF(19),e.nI1(20,"date"),e.k0s()()(),e.j41(21,"div",86)(22,"div",87)(23,"span",88),e.EFF(24," 03 "),e.k0s()(),e.j41(25,"div",89)(26,"h6",90),e.EFF(27),e.k0s(),e.j41(28,"p",91),e.EFF(29),e.nI1(30,"date"),e.k0s()(),e.j41(31,"div",92)(32,"p",91),e.EFF(33),e.nI1(34,"date"),e.k0s()()(),e.j41(35,"div",86)(36,"div",87)(37,"span",88),e.EFF(38," 03 "),e.k0s()(),e.j41(39,"div",89)(40,"h6",90),e.EFF(41),e.k0s(),e.j41(42,"p",91),e.EFF(43),e.nI1(44,"date"),e.k0s()(),e.j41(45,"div",92)(46,"p",91),e.EFF(47),e.nI1(48,"date"),e.k0s()()(),e.j41(49,"div",82)(50,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(11),e.JRh(null==t.callHistory?null:t.callHistory.callBy1Name),e.R7$(2),e.SpI("",e.i5U(16,12,null==t.callHistory?null:t.callHistory.callDate1,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.JRh(e.i5U(20,15,null==t.callHistory?null:t.callHistory.callDate1,"HH:mm:ss")),e.R7$(8),e.JRh(null==t.callHistory?null:t.callHistory.callBy2Name),e.R7$(2),e.JRh(e.i5U(30,18,null==t.callHistory?null:t.callHistory.callDate2,"yyyy-MM-dd HH:mm:ss")),e.R7$(4),e.SpI(" ",e.i5U(34,21,null==t.callHistory?null:t.callHistory.callDate2,"HH:mm:ss"),""),e.R7$(8),e.JRh(null==t.callHistory?null:t.callHistory.callBy3Name),e.R7$(2),e.JRh(e.i5U(44,24,null==t.callHistory?null:t.callHistory.callDate3,"yyyy-MM-dd HH:mm:ss")),e.R7$(4),e.SpI(" ",e.i5U(48,27,null==t.callHistory?null:t.callHistory.callDate3,"HH:mm:ss"),"")}}let Et=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S,J){super(t,r,C,n,s,o,f),this.baseService=n,this.orderPendingService=a,this.authDaamService=v,this.excelService=F,this.cityService=M,this.districtService=y,this.channelService=S,this.router=J,this.title="orderManagement.order.titleRecall",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),console.log(this.searchForm),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("recallLoader"),this.baseService.getRecallOrders(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("recallLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("recallLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.orderSelected=t.pendingCode,this.selectedCallCounter=t.callCounter,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onCallHistoryModal(t,r,n="md"){this.orderPendingService.GetCallHistory(t).pipe((0,_.Q)(this.notifier)).subscribe(a=>{this.callHistory=a.data,this.modalService.open(r,{centered:!0,size:n})},()=>{this.alertService.error()})}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(yt),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-recall-orders"]],features:[e.Vt3],decls:50,vars:46,consts:[["tableMaster",""],["deleteModal",""],["recallModal",""],["callHistoryModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["pSortableColumn","name","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","callCounter","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"cursor-pointer",3,"click"],[1,"ri-arrow-right-up-line","text-primary"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[3,"click"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-phone-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.Recall"],[1,"ri-questionnaire-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.inquiry"],[1,"ri-article-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.evaluation"],[1,"ri-file-add-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.orderNew"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.RecallMessage",4,"ngIf"],[4,"ngIf"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","orderManagement.order.RecallMessage"],[1,"mini-stats-wid","d-flex","align-items-center","mt-3"],[1,"flex-shrink-0","avatar-sm"],[1,"mini-stat-icon","avatar-title","rounded-circle","text-success","bg-success-subtle","fs-4"],[1,"flex-grow-1","ms-3"],[1,"mb-1"],[1,"text-muted","mb-0"],[1,"flex-shrink-0"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger",3,"click"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",12)(30,"div",13)(31,"ng-select",19),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",20)(34,"input",21),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",22)(37,"div",23)(38,"p-table",24,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,St,21,0,"ng-template",25)(41,It,44,11,"ng-template",26),e.k0s()(),e.DNE(42,Rt,2,0,"div",27)(43,kt,6,8,"div",28),e.k0s()()()(),e.DNE(44,Nt,1,0,"ng-template",null,1,e.C5r)(46,Ot,16,5,"ng-template",null,2,e.C5r)(48,wt,51,30,"ng-template",null,3,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","recallLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.tg,m.do,m.U0,m.s5,k.kL,$.g,A.p,z.w,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,p.vh,h.D9],encapsulation:2})}}return i})();var H=function(i){return i[i.None=0]="None",i[i.Reviewed=1]="Reviewed",i[i.Confirmed=2]="Confirmed",i[i.Free=3]="Free",i[i.Reopened=4]="Reopened",i[i.Finished=5]="Finished",i[i.Canceled=6]="Canceled",i[i.Assigned=7]="Assigned",i[i.Urgent=8]="Urgent",i[i.New=9]="New",i}(H||{}),ne=c(91020);let Q=(()=>{class i{constructor(t,r,n,a){this.cancelReasonService=t,this.orderService=r,this.ngxLoader=n,this.alertService=a,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=g.$$,this.operationLoader=g.ZW,this.notifier=new q.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}onCancelOrder(){let t={cancelReasonCode:this.form.cancelReasonCode,orderId:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOrder(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{this.ngxLoader.stopLoader(this.operationLoader),r.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(ne.e),e.rXU(I.Q),e.rXU(u.eD),e.rXU(R.u))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["cancel-order-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(n.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.form.cancelReasonCode,o)||(n.form.cancelReasonCode=o),e.Njj(o)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&r){const a=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",n.cancelReasons)("multiple",!1),e.R50("ngModel",n.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!a.valid)}},dependencies:[d.qT,d.BC,d.cb,d.vS,d.cV,h.Mm,u.Cv,T.vr,h.D9],encapsulation:2})}}return i})();function Gt(i,l){1&i&&(e.j41(0,"tr",28)(1,"th",29),e.nrm(2,"i",30),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",33),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",34),e.nrm(14,"i",30),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",35),e.nrm(17,"i",30),e.EFF(18," orderManagement.order.assignTo "),e.k0s(),e.j41(19,"th",36),e.nrm(20,"i",30),e.EFF(21," orderManagement.order.workTimes "),e.k0s(),e.j41(22,"th",37),e.nrm(23,"i",30),e.EFF(24," orderManagement.order.visitDate "),e.k0s(),e.j41(25,"th",38),e.nrm(26,"i",30),e.EFF(27," orderManagement.order.services "),e.k0s(),e.nrm(28,"th",39),e.k0s())}function Vt(i,l){1&i&&e.nrm(0,"span",55)}function Lt(i,l){if(1&i&&(e.j41(0,"span",56),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Xt(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",57),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Ut(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",57),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Bt(i,l){if(1&i&&(e.nrm(0,"i",58),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",59),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function $t(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",40)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.DNE(10,Vt,1,0,"span",41)(11,Lt,2,1,"span",42),e.k0s(),e.j41(12,"td")(13,"span",43),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",45),e.k0s()(),e.j41(19,"td"),e.DNE(20,Xt,4,1,"ng-container",46),e.k0s(),e.j41(21,"td"),e.DNE(22,Ut,4,1,"ng-container",46),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.DNE(29,Bt,6,5,"ng-template",null,3,e.C5r),e.j41(31,"div",47),e.nrm(32,"i",48),e.j41(33,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n.orderCode,s))}),e.nrm(34,"i",50),e.k0s(),e.j41(35,"button",51),e.nrm(36,"i",52),e.k0s(),e.j41(37,"button",53),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(45);return e.Njj(a.openModal(n.orderCode,s))}),e.nrm(38,"i",54),e.k0s()()()()}if(2&i){const t=l.$implicit,r=e.sdS(30),n=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(5,13,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,16,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(5),e.Y8G("ngbTooltip",r)}}function At(i,l){1&i&&(e.j41(0,"div",60),e.EFF(1," general.table.noData "),e.k0s())}function Yt(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",61)(1,"div",62),e.nrm(2,"ngb-pagination-info",63),e.j41(3,"table-length",64),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",65)(5,"ngb-pagination",66),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ht(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",67,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",68),e.j41(3,"div",69)(4,"div",70)(5,"button",71),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",72)(7,"div",73),e.nrm(8,"lord-icon",74),e.j41(9,"div",75),e.nrm(10,"h3",76)(11,"p",77),e.k0s()(),e.j41(12,"div",78),e.nrm(13,"button",79),e.j41(14,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function zt(i,l){if(1&i){const t=e.RV6();e.j41(0,"cancel-order-model",81),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}let Pt=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S,J){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.cancelReasonService=J,this.title="orderManagement.order.newOrders.title",this.titleOperation="orderManagement.order.newOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.OrderStatusEnum=H,this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.cancelReasons=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,this.pagination.statusFilter=this.OrderStatusEnum.New,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("newOrder"),this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("newOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("newOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}SubmitOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.SubmitOrder(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix),e.rXU(ne.e))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-new-orders"]],features:[e.Vt3],decls:48,vars:46,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","8%"],["pSortableColumn","creationUser","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","5%"],["pSortableColumn","assignTo","translate","",2,"width","8%"],["pSortableColumn","workTimes","translate","",2,"width","5%"],["pSortableColumn","visitDate","translate","",2,"width","7%"],["pSortableColumn","services","translate","",2,"width","10%"],[2,"width","10%"],[1,"fs-5"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"btn","btn-sm","btn-soft-danger","remove-list","me-2",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"btn","btn-sm","btn-soft-info","edit-list","me-2"],[1,"ri-pencil-fill","align-bottom"],[1,"btn","btn-sm","btn-success","edit-list",3,"click"],[1,"ri-check-fill","align-bottom"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7),e.nrm(3,"ngx-ui-loader",8),e.j41(4,"base-filter",9),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,10),e.j41(6,"div",11)(7,"div",12)(8,"input",13),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",14),e.k0s()(),e.j41(11,"div",11)(12,"div",12)(13,"input",15),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",14),e.k0s()(),e.j41(16,"div",11)(17,"div",12)(18,"input",13),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",14),e.k0s()(),e.j41(21,"div",11)(22,"div",12)(23,"ng-select",16),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",11)(26,"div",12)(27,"ng-select",17),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",11)(30,"div",12)(31,"ng-select",18),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",19)(34,"input",20),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",21)(37,"div",22)(38,"p-table",23,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,Gt,29,0,"ng-template",24)(41,$t,39,19,"ng-template",25),e.k0s()(),e.DNE(42,At,2,0,"div",26)(43,Yt,6,8,"div",27),e.k0s()()()(),e.DNE(44,Ht,15,3,"ng-template",null,1,e.C5r)(46,zt,1,1,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","newOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.s5,k.kL,$.g,A.p,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,Q,p.vh,h.D9],encapsulation:2})}}return i})();function Jt(i,l){1&i&&(e.j41(0,"tr",29)(1,"th",30),e.nrm(2,"i",31),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",31),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",31),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",36),e.nrm(17,"i",31),e.EFF(18," orderManagement.order.assignTo "),e.k0s(),e.j41(19,"th",37),e.nrm(20,"i",31),e.EFF(21," orderManagement.order.workTimes "),e.k0s(),e.j41(22,"th",38),e.nrm(23,"i",31),e.EFF(24," orderManagement.order.visitDate "),e.k0s(),e.j41(25,"th",39),e.EFF(26," orderManagement.order.location "),e.k0s(),e.nrm(27,"th",40),e.k0s())}function Qt(i,l){1&i&&e.nrm(0,"span",58)}function qt(i,l){if(1&i&&(e.j41(0,"span",59),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Zt(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",60),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Kt(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",60),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Wt(i,l){1&i&&e.nrm(0,"span",61)}function en(i,l){if(1&i&&(e.j41(0,"a",62),e.nrm(1,"i",63),e.k0s()),2&i){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.map),e.B4B)}}function tn(i,l){if(1&i&&(e.nrm(0,"i",64),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",65),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function nn(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",41)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.DNE(10,Qt,1,0,"span",42)(11,qt,2,1,"span",43),e.k0s(),e.j41(12,"td")(13,"span",44),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",46),e.k0s()(),e.j41(19,"td"),e.DNE(20,Zt,4,1,"ng-container",47),e.k0s(),e.j41(21,"td"),e.DNE(22,Kt,4,1,"ng-container",47),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.DNE(27,Wt,1,0,"span",48)(28,en,2,1,"a",49),e.k0s(),e.j41(29,"td"),e.DNE(30,tn,6,5,"ng-template",null,4,e.C5r),e.j41(32,"div",50),e.nrm(33,"i",51),e.j41(34,"button",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s,"lg"))}),e.nrm(35,"i",53),e.k0s(),e.j41(36,"button",54),e.nrm(37,"i",55),e.k0s(),e.j41(38,"button",56),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(45);return e.Njj(a.openModal(n.orderCode,s))}),e.nrm(39,"i",57),e.k0s()()()()}if(2&i){const t=l.$implicit,r=e.sdS(31),n=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(5,14,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,17,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngIf",""==t.map),e.R7$(),e.Y8G("ngIf",null==t?null:t.map),e.R7$(5),e.Y8G("ngbTooltip",r)}}function rn(i,l){1&i&&(e.j41(0,"div",66),e.EFF(1," general.table.noData "),e.k0s())}function an(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",67)(1,"div",68),e.nrm(2,"ngb-pagination-info",69),e.j41(3,"table-length",70),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",71)(5,"ngb-pagination",72),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function on(i,l){if(1&i){const t=e.RV6();e.j41(0,"cancel-order-model",73),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function sn(i,l){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&i){const t=l.$implicit,r=l.index,n=e.XpG(2);e.R7$(2),e.JRh(t),e.R7$(2),e.JRh(n.orderSelectedData.workTimes[r])}}function ln(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",74,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.assignOrder())}),e.nrm(2,"ngx-ui-loader",75),e.j41(3,"div",76)(4,"div",77)(5,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",79)(7,"div",80)(8,"h4",81),e.nrm(9,"i",82),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",83)(13,"div",84)(14,"label",85),e.EFF(15,"orderManagement.order.agentName"),e.k0s(),e.j41(16,"div",86),e.EFF(17),e.k0s()(),e.j41(18,"div",84)(19,"label",85),e.EFF(20,"orderManagement.order.visitDate"),e.k0s(),e.j41(21,"div",86),e.EFF(22),e.nI1(23,"date"),e.k0s()(),e.j41(24,"div",87)(25,"table",88)(26,"thead")(27,"tr")(28,"th",85),e.EFF(29," orderManagement.order.assignTo "),e.k0s(),e.j41(30,"th",85),e.EFF(31," orderManagement.order.workTimes "),e.k0s()()(),e.j41(32,"tbody"),e.DNE(33,sn,5,2,"tr",47),e.k0s()()()(),e.j41(34,"div",89),e.nrm(35,"button",90),e.j41(36,"button",91),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.SpI(" ",e.bMT(11,7,"orderManagement.order.AssignMessage")," "),e.R7$(7),e.SpI(" ",t.orderSelectedData.agentName," "),e.R7$(5),e.SpI(" ",e.i5U(23,9,t.orderSelectedData.visitDate,"yyyy-MM-dd")," "),e.R7$(11),e.Y8G("ngForOf",t.orderSelectedData.teamNames)}}function dn(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",74,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SureOrderRollBack())}),e.nrm(2,"ngx-ui-loader",75),e.j41(3,"div",76)(4,"div",77)(5,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",79)(7,"div",92),e.nrm(8,"lord-icon",93),e.j41(9,"div",94),e.nrm(10,"h3",95)(11,"p",96),e.k0s()(),e.j41(12,"div",97),e.nrm(13,"button",90),e.j41(14,"button",91),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let mn=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.urgentOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.OrderStatusEnum=H,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=3,this.orderSelected=0,this.orderSelectedData={},this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.statusFilter=this.OrderStatusEnum.Urgent,this.ngxLoader.startLoader("urgentOrder"),this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("urgentOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("urgentOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}assignOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.assignOrder(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}SureOrderRollBack(){this.ngxLoader.startLoader(g.Fq),this.baseService.SureOrderRollBack(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}getTimes(t){return""==t?[]:t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}mapUrl(t){if(!t)return"";const[r,n]=t.split(",").map(Number);return`https://www.google.com/maps/dir//${r},${n}/@${r},${n},17z?hl=en-US`}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-urgent-orders"]],features:[e.Vt3],decls:50,vars:46,consts:[["tableMaster",""],["deleteModal",""],["SubmitOrderModal",""],["SureOrderRollBackModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","10%"],["pSortableColumn","creationUser","translate","",2,"width","8%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["pSortableColumn","assignTo","translate","",2,"width","8%"],["pSortableColumn","workTimes","translate","",2,"width","8%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","6%"],[2,"width","15%"],[1,"fs-5"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["data-bs-toggle","modal","data-bs-target","#createTask","data-edit-id","15",1,"mt-2","btn","btn-sm","btn-primary","edit-list",3,"click"],[1,"ri-check-fill","align-bottom"],[1,"mt-2","btn","btn-sm","btn-soft-info","edit-list"],[1,"ri-pencil-fill","align-bottom"],["data-bs-toggle","modal","data-bs-target","#removeTaskItemModal","data-remove-id","15",1,"mt-2","btn","btn-sm","btn-soft-danger","remove-list","mx-1",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"mb-0","mt-2","text-center"],[1,"ri-alert-fill","me-2",2,"font-size","1.3rem"],[1,"mt-5","row"],[1,"col-6"],["translate",""],[1,"form-control"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",12)(30,"div",13)(31,"ng-select",19),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",20)(34,"input",21),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",22)(37,"div",23)(38,"p-table",24,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,Jt,28,0,"ng-template",25)(41,nn,40,20,"ng-template",26),e.k0s()(),e.DNE(42,rn,2,0,"div",27)(43,an,6,8,"div",28),e.k0s()()()(),e.DNE(44,on,1,1,"ng-template",null,1,e.C5r)(46,ln,37,12,"ng-template",null,2,e.C5r)(48,dn,15,3,"ng-template",null,3,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","urgentOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.s5,k.kL,$.g,A.p,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,Q,p.vh,h.D9],encapsulation:2})}}return i})();function cn(i,l){1&i&&(e.j41(0,"tr",29)(1,"th",30),e.nrm(2,"i",31),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",31),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",31),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",36),e.nrm(17,"i",31),e.EFF(18," orderManagement.order.assignTo "),e.k0s(),e.j41(19,"th",37),e.nrm(20,"i",31),e.EFF(21," orderManagement.order.workTimes "),e.k0s(),e.j41(22,"th",38),e.nrm(23,"i",31),e.EFF(24," orderManagement.order.visitDate "),e.k0s(),e.j41(25,"th",39),e.EFF(26," orderManagement.order.location "),e.k0s(),e.nrm(27,"th",40),e.k0s())}function pn(i,l){1&i&&e.nrm(0,"span",60)}function gn(i,l){if(1&i&&(e.j41(0,"span",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function hn(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",62),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function _n(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",62),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function un(i,l){1&i&&e.nrm(0,"span",63)}function bn(i,l){if(1&i&&(e.j41(0,"a",64),e.nrm(1,"i",65),e.k0s()),2&i){const t=e.XpG().$implicit,r=e.XpG();e.Y8G("href",r.mapUrl(null==t?null:t.map),e.B4B)}}function fn(i,l){if(1&i&&(e.nrm(0,"i",66),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",67),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function Cn(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",41)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td"),e.EFF(9),e.DNE(10,pn,1,0,"span",42)(11,gn,2,1,"span",43),e.k0s(),e.j41(12,"td")(13,"span",44),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",46),e.k0s()(),e.j41(19,"td"),e.DNE(20,hn,4,1,"ng-container",47),e.k0s(),e.j41(21,"td"),e.DNE(22,_n,4,1,"ng-container",47),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.DNE(27,un,1,0,"span",48)(28,bn,2,1,"a",49),e.k0s(),e.j41(29,"td"),e.DNE(30,fn,6,5,"ng-template",null,4,e.C5r),e.j41(32,"div",50),e.nrm(33,"i",51),e.j41(34,"button",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(47);return e.Njj(a.openModal(n,s,"lg"))}),e.nrm(35,"i",53),e.k0s(),e.j41(36,"button",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(49);return e.Njj(a.openModal(n,s,"md"))}),e.nrm(37,"i",55),e.k0s(),e.j41(38,"button",56),e.nrm(39,"i",57),e.k0s(),e.j41(40,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(45);return e.Njj(a.openModal(n.orderCode,s))}),e.nrm(41,"i",59),e.k0s()()()()}if(2&i){const t=l.$implicit,r=e.sdS(31),n=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(5,14,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,17,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngIf",""==t.map),e.R7$(),e.Y8G("ngIf",null==t?null:t.map),e.R7$(5),e.Y8G("ngbTooltip",r)}}function vn(i,l){1&i&&(e.j41(0,"div",68),e.EFF(1," general.table.noData "),e.k0s())}function jn(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",69)(1,"div",70),e.nrm(2,"ngb-pagination-info",71),e.j41(3,"table-length",72),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",73)(5,"ngb-pagination",74),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Fn(i,l){if(1&i){const t=e.RV6();e.j41(0,"cancel-order-model",75),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Mn(i,l){if(1&i&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&i){const t=l.$implicit,r=l.index,n=e.XpG(2);e.R7$(2),e.JRh(t),e.R7$(2),e.JRh(n.orderSelectedData.workTimes[r])}}function yn(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.AssignOrder())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",82)(8,"h4",83),e.nrm(9,"i",84),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",85)(13,"div",86)(14,"label",87),e.EFF(15,"orderManagement.order.agentName"),e.k0s(),e.j41(16,"div",88),e.EFF(17),e.k0s()(),e.j41(18,"div",86)(19,"label",87),e.EFF(20,"orderManagement.order.visitDate"),e.k0s(),e.j41(21,"div",88),e.EFF(22),e.nI1(23,"date"),e.k0s()(),e.j41(24,"div",89)(25,"table",90)(26,"thead")(27,"tr")(28,"th",87),e.EFF(29," orderManagement.order.assignTo "),e.k0s(),e.j41(30,"th",87),e.EFF(31," orderManagement.order.workTimes "),e.k0s()()(),e.j41(32,"tbody"),e.DNE(33,Mn,5,2,"tr",47),e.k0s()()()(),e.j41(34,"div",91),e.nrm(35,"button",92),e.j41(36,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.SpI(" ",e.bMT(11,7,"orderManagement.order.AssignMessage")," "),e.R7$(7),e.SpI(" ",t.orderSelectedData.agentName," "),e.R7$(5),e.SpI(" ",e.i5U(23,9,t.orderSelectedData.visitDate,"yyyy-MM-dd")," "),e.R7$(11),e.Y8G("ngForOf",t.orderSelectedData.teamNames)}}function Sn(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",76,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SureOrderRollBack())}),e.nrm(2,"ngx-ui-loader",77),e.j41(3,"div",78)(4,"div",79)(5,"button",80),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",81)(7,"div",94),e.nrm(8,"lord-icon",95),e.j41(9,"div",96),e.nrm(10,"h3",97)(11,"p",98),e.k0s()(),e.j41(12,"div",99),e.nrm(13,"button",92),e.j41(14,"button",93),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let Tn=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.sureOrders.title",this.titleOperation="orderManagement.order.sureOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.OrderStatusEnum=H,this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.orderSelectedData={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader(g.a7),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.statusFilter=this.OrderStatusEnum.Confirmed,this.ngxLoader.startLoader("sureOrder"),this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("sureOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("sureOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}AssignOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.assignOrder(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}SureOrderRollBack(){this.ngxLoader.startLoader(g.Fq),this.baseService.SureOrderRollBack(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}getTimes(t){return t.split(",")}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}mapUrl(t){if(!t)return"";const[r,n]=t.split(",").map(Number);return`https://www.google.com/maps/dir//${r},${n}/@${r},${n},17z?hl=en-US`}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-sure-orders"]],features:[e.Vt3],decls:50,vars:46,consts:[["tableMaster",""],["deleteModal",""],["AssignOrderModal",""],["SureOrderRollBackModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","10%"],["pSortableColumn","creationUser","translate","",2,"width","8%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["pSortableColumn","assignTo","translate","",2,"width","8%"],["pSortableColumn","workTimes","translate","",2,"width","8%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","6%"],[2,"width","15%"],[1,"fs-5"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["data-bs-toggle","modal","data-bs-target","#createTask","data-edit-id","15",1,"mt-2","btn","btn-sm","btn-primary","edit-list",3,"click"],[1,"ri-check-fill","align-bottom"],["data-bs-toggle","modal","data-bs-target","#createTask","data-edit-id","15",1,"mt-2","btn","btn-sm","mx-1","btn-warning","edit-list",3,"click"],[1,"ri-arrow-go-back-fill","align-bottom"],["data-bs-toggle","modal","data-bs-target","#createTask","data-edit-id","15",1,"mt-2","btn","btn-sm","btn-soft-info","edit-list"],[1,"ri-pencil-fill","align-bottom"],[1,"mt-2","btn","btn-sm","btn-soft-danger","remove-list","mx-1",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"mb-0","mt-2","text-center"],[1,"ri-alert-fill","me-2",2,"font-size","1.3rem"],[1,"mt-5","row"],[1,"col-6"],["translate",""],[1,"form-control"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",12)(30,"div",13)(31,"ng-select",19),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",20)(34,"input",21),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",22)(37,"div",23)(38,"p-table",24,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,cn,28,0,"ng-template",25)(41,Cn,42,20,"ng-template",26),e.k0s()(),e.DNE(42,vn,2,0,"div",27)(43,jn,6,8,"div",28),e.k0s()()()(),e.DNE(44,Fn,1,1,"ng-template",null,1,e.C5r)(46,yn,37,12,"ng-template",null,2,e.C5r)(48,Sn,15,3,"ng-template",null,3,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","sureOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.s5,k.kL,$.g,A.p,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,Q,p.vh,h.D9],encapsulation:2})}}return i})();function In(i,l){1&i&&(e.j41(0,"tr",26)(1,"th",27),e.nrm(2,"i",28),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",28),e.EFF(6," orderManagement.order.cityName "),e.k0s(),e.j41(7,"th",30),e.nrm(8,"i",28),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",31),e.nrm(11,"i",28),e.EFF(12," orderManagement.order.assignTo "),e.k0s(),e.j41(13,"th",32),e.nrm(14,"i",28),e.EFF(15," orderManagement.order.workTimes "),e.k0s(),e.j41(16,"th",33),e.nrm(17,"i",28),e.EFF(18," orderManagement.order.visitDate "),e.k0s(),e.j41(19,"th",34),e.nrm(20,"i",28),e.EFF(21," orderManagement.order.services "),e.k0s(),e.nrm(22,"th",35),e.k0s())}function Rn(i,l){1&i&&e.nrm(0,"span",48)}function kn(i,l){if(1&i&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Nn(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",50),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function xn(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",50),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Dn(i,l){if(1&i&&(e.nrm(0,"i",51),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",52),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function On(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.DNE(5,Rn,1,0,"span",37)(6,kn,2,1,"span",38),e.k0s(),e.j41(7,"td")(8,"span",39),e.EFF(9),e.k0s(),e.nrm(10,"br"),e.j41(11,"span",40),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(12),e.nrm(13,"i",41),e.k0s()(),e.j41(14,"td"),e.DNE(15,Nn,4,1,"ng-container",42),e.k0s(),e.j41(16,"td"),e.DNE(17,xn,4,1,"ng-container",42),e.k0s(),e.j41(18,"td"),e.EFF(19),e.nI1(20,"date"),e.k0s(),e.j41(21,"td"),e.EFF(22),e.k0s(),e.j41(23,"td"),e.DNE(24,Dn,6,5,"ng-template",null,2,e.C5r),e.j41(26,"div",43)(27,"button",44),e.nrm(28,"i",45),e.k0s(),e.j41(29,"button",46),e.nrm(30,"i",47),e.k0s()()()()}if(2&i){const t=l.$implicit,r=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",r.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",r.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(20,10,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,"")}}function wn(i,l){1&i&&(e.j41(0,"div",53),e.EFF(1," general.table.noData "),e.k0s())}function En(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",54)(1,"div",55),e.nrm(2,"ngb-pagination-info",56),e.j41(3,"table-length",57),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",58)(5,"ngb-pagination",59),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Gn(i,l){if(1&i){const t=e.RV6();e.j41(0,"cancel-order-model",60),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&i){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}let Vn=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.urgentOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.formPassword={},this.OrderStatusEnum=H,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader("assignLoader"),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("assignLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Assigned,this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("assignLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("assignLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-assigned-orders"]],features:[e.Vt3],decls:46,vars:46,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["pSortableColumn","assignTo","translate","",2,"width","6%"],["pSortableColumn","workTimes","translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["pSortableColumn","services","translate","",2,"width","10%"],[2,"width","15%"],[1,"fs-5"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],[1,"btn","btn-sm","btn-info","remove-list"],[1,"ri-file-list-3-fill","align-bottom"],["data-bs-toggle","modal",1,"btn","btn-sm","btn-primary","mx-1"],[1,"ri-save-fill","align-bottom"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5),e.nrm(3,"ngx-ui-loader",6),e.j41(4,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,8),e.j41(6,"div",9)(7,"div",10)(8,"input",11),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",12),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"input",13),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",12),e.k0s()(),e.j41(16,"div",9)(17,"div",10)(18,"input",11),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",12),e.k0s()(),e.j41(21,"div",9)(22,"div",10)(23,"ng-select",14),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",9)(26,"div",10)(27,"ng-select",15),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",9)(30,"div",10)(31,"ng-select",16),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",17)(34,"input",18),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",19)(37,"div",20)(38,"p-table",21,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,In,23,0,"ng-template",22)(41,On,31,13,"ng-template",23),e.k0s()(),e.DNE(42,wn,2,0,"div",24)(43,En,6,8,"div",25),e.k0s()()()(),e.DNE(44,Gn,1,1,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","assignLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.me,d.Q0,d.BC,d.vS,m.s5,k.kL,$.g,A.p,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,E.m,Q,p.vh,h.D9],encapsulation:2})}}return i})();var Ln=c(75312);function Xn(i,l){1&i&&(e.j41(0,"tr",27)(1,"th",28),e.nrm(2,"i",29),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",29),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",29),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",29),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",33),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",33),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",34),e.nrm(18,"i",29),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",35),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",36),e.EFF(23," orderManagement.order.paymentTypeName "),e.k0s(),e.j41(24,"th",33),e.EFF(25," orderManagement.order.finishUser "),e.k0s(),e.j41(26,"th",36),e.EFF(27," orderManagement.order.cost "),e.k0s(),e.j41(28,"th",36),e.EFF(29," orderManagement.order.VAT "),e.k0s(),e.j41(30,"th",36),e.EFF(31," orderManagement.order.total "),e.k0s(),e.nrm(32,"th",37),e.k0s())}function Un(i,l){1&i&&e.nrm(0,"span",60)}function Bn(i,l){if(1&i&&(e.j41(0,"span",39),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function $n(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function An(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Yn(i,l){if(1&i&&(e.nrm(0,"i",62),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",63),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",64),e.EFF(9)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Hn(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",38)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.j41(6,"span",39),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.DNE(10,Un,1,0,"span",40)(11,Bn,2,1,"span",41),e.k0s(),e.j41(12,"td")(13,"span",42),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",44),e.k0s()(),e.j41(19,"td"),e.DNE(20,$n,4,1,"ng-container",45),e.k0s(),e.j41(21,"td"),e.DNE(22,An,4,1,"ng-container",45),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.EFF(31),e.k0s(),e.j41(32,"td"),e.EFF(33),e.k0s(),e.j41(34,"td"),e.EFF(35),e.k0s(),e.j41(36,"td")(37,"span",46),e.EFF(38),e.k0s()(),e.j41(39,"td"),e.DNE(40,Yn,10,9,"ng-template",null,3,e.C5r),e.j41(42,"span",47)(43,"div",48)(44,"button",49),e.nrm(45,"i",50),e.k0s(),e.j41(46,"ul",51)(47,"li")(48,"span",52),e.nrm(49,"i",53)(50,"span",54),e.k0s()(),e.j41(51,"li",55),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),s=e.sdS(43);return e.Njj(a.openModal(n.orderCode,s))}),e.j41(52,"span",52),e.nrm(53,"i",56)(54,"span",57),e.k0s()(),e.j41(55,"li",55),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.goEdit(n.id))}),e.j41(56,"span",52),e.nrm(57,"i",58)(58,"span",59),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,r=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(5,17,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",r.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",r.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,20,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(2),e.SpI(" ",t.paymentTypeName,""),e.R7$(2),e.SpI(" ",t.finishUser,""),e.R7$(2),e.SpI(" ",r.getCost(t.totalTaxNet,0)," "),e.R7$(2),e.SpI(" ",r.getCost(t.totalTaxNet,1)," "),e.R7$(3),e.JRh(r.getCost(t.totalTaxNet,2))}}function zn(i,l){1&i&&(e.j41(0,"div",65),e.EFF(1," general.table.noData "),e.k0s())}function Pn(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",66)(1,"div",67),e.nrm(2,"ngb-pagination-info",68),e.j41(3,"table-length",69),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",70)(5,"ngb-pagination",71),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Jn(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",72),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Qn(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",73)(1,"div",74)(2,"h4",75)(3,"span",76),e.EFF(4,"orderManagement.order.completeOrders.title"),e.k0s()(),e.j41(5,"button",77),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",78),e.nrm(7,"ngx-ui-loader",79),e.j41(8,"form",80,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onReopenOrder())}),e.j41(10,"div",5)(11,"div",81)(12,"label",82),e.EFF(13,"orderManagement.order.reopenOrder"),e.k0s(),e.j41(14,"ng-select",83),e.nI1(15,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.returnReasonCode,n)||(a.form.returnReasonCode=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",81)(17,"label",82),e.EFF(18,"orderManagement.order.reopenNotes"),e.k0s(),e.j41(19,"textarea",84),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.reopenNotes,n)||(a.form.reopenNotes=n),e.Njj(n)}),e.k0s()()(),e.j41(20,"div",85)(21,"button",86),e.nrm(22,"i",87)(23,"span",88),e.k0s()()()()()}if(2&i){const t=e.sdS(9),r=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",r.loaderOperationShap)("loaderId",r.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,9,"orderManagement.order.returnReason")),e.Y8G("items",r.returnReasons)("multiple",!1),e.R50("ngModel",r.form.returnReasonCode),e.R7$(5),e.R50("ngModel",r.form.reopenNotes),e.R7$(2),e.Y8G("disabled",!t.valid)}}let qn=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S,J){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.returnReasonService=S,this.router=J,this.title="orderManagement.order.completeOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.formPassword={},this.OrderStatusEnum=H,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.returnReasons=[],this.GetCities(),this.GetReturnReasons()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetReturnReasons(){this.returnReasonService.getDropDown().subscribe(t=>{this.returnReasons=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader("completeLoader"),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("completeLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Finished,this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("completeLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("completeLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.form={},this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getCost(t,r){return t.split("#")[r]}onReopenOrder(){let t={returnReasonCode:this.form.returnReasonCode,orderId:this.orderSelected};this.ngxLoader.startLoader(this.operationLoader),this.baseService.ReopenOrder(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{this.ngxLoader.stopLoader(this.operationLoader),r.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities()):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(Ln.Y),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-complete-orders"]],features:[e.Vt3],decls:44,vars:40,consts:[["tableMaster",""],["deleteModal",""],["reopenOrder",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","10%"],["translate","",2,"width","5%"],[2,"width","15%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary-subtle","text-primary","fs-5"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.printPill"],[3,"click"],[1,"ri-exchange-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.reopenOrder"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-time-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["rows","2","InputTirmFilter","","name","reopenNotes","type","text","id","reopenNotes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7),e.nrm(3,"ngx-ui-loader",8),e.j41(4,"base-filter",9),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,10),e.j41(6,"div",11)(7,"div",12)(8,"input",13),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",14),e.k0s()(),e.j41(11,"div",11)(12,"div",12)(13,"input",15),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",14),e.k0s()(),e.j41(16,"div",11)(17,"div",12)(18,"input",13),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",14),e.k0s()(),e.j41(21,"div",11)(22,"div",12)(23,"ng-select",16),e.nI1(24,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",11)(26,"div",12)(27,"ng-select",17),e.nI1(28,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",18)(30,"input",19),e.nI1(31,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",20)(33,"div",21)(34,"p-table",22,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(36,Xn,33,0,"ng-template",23)(37,Hn,59,23,"ng-template",24),e.k0s()(),e.DNE(38,zn,2,0,"div",25)(39,Pn,6,8,"div",26),e.k0s()()()(),e.DNE(40,Jn,1,0,"ng-template",null,1,e.C5r)(42,Qn,24,11,"ng-template",null,2,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","completeLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,28,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,30,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,32,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,34,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,36,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,m.tg,m.do,m.U0,m.s5,k.kL,$.g,A.p,z.w,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,E.m,p.vh,h.D9],encapsulation:2})}}return i})();function Zn(i,l){1&i&&(e.j41(0,"tr",26)(1,"th",27),e.nrm(2,"i",28),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",28),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",30),e.nrm(8,"i",28),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",31),e.nrm(11,"i",28),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",32),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",32),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",33),e.nrm(18,"i",28),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",34),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",35),e.EFF(23," orderManagement.order.cancelReasonName "),e.k0s(),e.nrm(24,"th",36),e.k0s())}function Kn(i,l){1&i&&e.nrm(0,"span",47)}function Wn(i,l){if(1&i&&(e.j41(0,"span",38),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function er(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",48),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function tr(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",48),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function nr(i,l){if(1&i&&(e.nrm(0,"i",49),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",50),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function rr(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.j41(6,"span",38),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.DNE(10,Kn,1,0,"span",39)(11,Wn,2,1,"span",40),e.k0s(),e.j41(12,"td")(13,"span",41),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",43),e.k0s()(),e.j41(19,"td"),e.DNE(20,er,4,1,"ng-container",44),e.k0s(),e.j41(21,"td"),e.DNE(22,tr,4,1,"ng-container",44),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.DNE(31,nr,6,5,"ng-template",null,2,e.C5r),e.j41(33,"div",45),e.nrm(34,"i",46),e.k0s()()()}if(2&i){const t=l.$implicit,r=e.sdS(32),n=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(5,14,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,17,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(2),e.SpI(" ",t.cancelReasonName,""),e.R7$(5),e.Y8G("ngbTooltip",r)}}function ir(i,l){1&i&&(e.j41(0,"div",51),e.EFF(1," general.table.noData "),e.k0s())}function ar(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",52)(1,"div",53),e.nrm(2,"ngb-pagination-info",54),e.j41(3,"table-length",55),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",56)(5,"ngb-pagination",57),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function or(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",58),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let sr=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.reopenTitle",this.titleOperation="orderManagement.order.reopenTitle",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.formPassword={},this.OrderStatusEnum=H,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader("cancalLoader"),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("cancalLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Canceled,this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("cancalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("cancalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-refundable-orders"]],features:[e.Vt3],decls:46,vars:46,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","20%"],["translate","",2,"width","15%"],[2,"width","10%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5),e.nrm(3,"ngx-ui-loader",6),e.j41(4,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,8),e.j41(6,"div",9)(7,"div",10)(8,"input",11),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",12),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"input",13),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",12),e.k0s()(),e.j41(16,"div",9)(17,"div",10)(18,"input",11),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",12),e.k0s()(),e.j41(21,"div",9)(22,"div",10)(23,"ng-select",14),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",9)(26,"div",10)(27,"ng-select",15),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",9)(30,"div",10)(31,"ng-select",16),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",17)(34,"input",18),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",19)(37,"div",20)(38,"p-table",21,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,Zn,25,0,"ng-template",22)(41,rr,35,20,"ng-template",23),e.k0s()(),e.DNE(42,ir,2,0,"div",24)(43,ar,6,8,"div",25),e.k0s()()()(),e.DNE(44,or,1,0,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","cancalLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.me,d.Q0,d.BC,d.vS,m.s5,k.kL,$.g,A.p,z.w,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,p.vh,h.D9],encapsulation:2})}}return i})();function lr(i,l){1&i&&(e.j41(0,"tr",26)(1,"th",27),e.nrm(2,"i",28),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",28),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",30),e.nrm(8,"i",28),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",31),e.nrm(11,"i",28),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",32),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",32),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",33),e.nrm(18,"i",28),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",34),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",34),e.EFF(23," orderManagement.order.returnReasonName "),e.k0s(),e.nrm(24,"th",35),e.k0s())}function dr(i,l){1&i&&e.nrm(0,"span",50)}function mr(i,l){if(1&i&&(e.j41(0,"span",37),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function cr(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",51),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function pr(i,l){if(1&i&&(e.qex(0),e.j41(1,"span",51),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function gr(i,l){if(1&i&&(e.nrm(0,"i",52),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",53),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function hr(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.j41(6,"span",37),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.DNE(10,dr,1,0,"span",38)(11,mr,2,1,"span",39),e.k0s(),e.j41(12,"td")(13,"span",40),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",42),e.k0s()(),e.j41(19,"td"),e.DNE(20,cr,4,1,"ng-container",43),e.k0s(),e.j41(21,"td"),e.DNE(22,pr,4,1,"ng-container",43),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td"),e.DNE(31,gr,6,5,"ng-template",null,2,e.C5r),e.j41(33,"div",44),e.nrm(34,"i",45),e.j41(35,"button",46),e.nrm(36,"i",47),e.k0s(),e.j41(37,"button",48),e.nrm(38,"i",49),e.k0s()()()()}if(2&i){const t=l.$implicit,r=e.sdS(32),n=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(5,14,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,17,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(2),e.SpI(" ",t.returnReasonName,""),e.R7$(5),e.Y8G("ngbTooltip",r)}}function _r(i,l){1&i&&(e.j41(0,"div",54),e.EFF(1," general.table.noData "),e.k0s())}function ur(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",55)(1,"div",56),e.nrm(2,"ngb-pagination-info",57),e.j41(3,"table-length",58),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",59)(5,"ngb-pagination",60),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function br(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",61),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let fr=(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C,v,F,M,y,S){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.excelService=v,this.cityService=F,this.districtService=M,this.channelService=y,this.router=S,this.title="orderManagement.order.reopenTitle",this.titleOperation="orderManagement.order.reopenTitle",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.formPassword={},this.OrderStatusEnum=H,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(r=>{this.districts=r.data},r=>{console.log(r)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,_.Q)(this.notifier)).subscribe(r=>{r?this.alertService.success():this.alertService.error("general.message."+r)},r=>{this.alertService.error()})}mapRegisterForm(t){let r={...t};return r.employeeCode=0,r}onSearch(){var r;if(this.ngxLoader.startLoader("reopenLoader"),(r=this.searchForm.dates)+void 0&&r.includes("to")){var t=r.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(r=this.searchForm.creationDates)+void 0&&r.includes("to")?(t=r.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("reopenLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Reopened,this.baseService.get(this.pagination).pipe((0,_.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("reopenLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("reopenLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(r=>{t.push({orderCode:r.orderCode,visitDate:r.visitDate,notes:r.notes,createdDate:r.createdDate,assignDate:r.assignDate,finishDate:r.finishDate,districtName:r.districtName,cityName:r.cityName,agentName:r.agentName,mobile:r.mobile,email:r.email,creationUser:r.creationUser,channelName:r.channelName,teamNames:r.teamNames,services:r.services,workTimes:r.workTimes,paymentTypeName:r.paymentTypeName,finishUser:r.finishUser,isCancel:r.isCancel,isReopen:r.isReopen,isFree:r.isFree,isFinish:r.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,N.O)(),(0,x.c)(this.mainDelay),(0,D.Z)(),(0,_.Q)(this.notifier),(0,O.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,r,n="md"){this.orderSelected=t,this.modalService.open(r,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J),e.rXU(B.V),e.rXU(L.h),e.rXU(X.m),e.rXU(U.l),e.rXU(b.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["reopen-order"]],features:[e.Vt3],decls:46,vars:46,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","15%"],[2,"width","10%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],["data-bs-toggle","modal",1,"btn","btn-sm","btn-primary","mx-1"],[1,"ri-checkbox-circle-line","align-bottom"],[1,"btn","btn-sm","btn-soft-dark","mx-1"],[1,"ri-pencil-fill","align-bottom"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5),e.nrm(3,"ngx-ui-loader",6),e.j41(4,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,8),e.j41(6,"div",9)(7,"div",10)(8,"input",11),e.nI1(9,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(10,"i",12),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"input",13),e.nI1(14,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(15,"i",12),e.k0s()(),e.j41(16,"div",9)(17,"div",10)(18,"input",11),e.nI1(19,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(20,"i",12),e.k0s()(),e.j41(21,"div",9)(22,"div",10)(23,"ng-select",14),e.nI1(24,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(25,"div",9)(26,"div",10)(27,"ng-select",15),e.nI1(28,"translate"),e.bIt("change",function(o){return e.eBV(a),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(29,"div",9)(30,"div",10)(31,"ng-select",16),e.nI1(32,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(33,"div",17)(34,"input",18),e.nI1(35,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(a),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",19)(37,"div",20)(38,"p-table",21,0),e.bIt("onLazyLoad",function(o){return e.eBV(a),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(a),e.Njj(n.onSelectionChange(o))}),e.DNE(40,lr,25,0,"ng-template",22)(41,hr,39,20,"ng-template",23),e.k0s()(),e.DNE(42,_r,2,0,"div",24)(43,ur,6,8,"div",25),e.k0s()()()(),e.DNE(44,br,1,0,"ng-template",null,1,e.C5r)}2&r&&(e.R7$(3),e.Y8G("loaderId","reopenLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[p.Sq,p.bT,d.me,d.Q0,d.BC,d.vS,m.s5,k.kL,$.g,A.p,z.w,Y.b,h.Mm,j.XI,w.Ei,j.Tg,u.Cv,T.vr,m.md,E.m,p.vh,h.D9]})}}return i})();function Cr(i,l){1&i&&e.nrm(0,"app-all-order")}function vr(i,l){1&i&&e.nrm(0,"app-pending-order")}function jr(i,l){1&i&&e.nrm(0,"app-recall-orders")}function Fr(i,l){1&i&&e.nrm(0,"app-new-orders")}function Mr(i,l){1&i&&e.nrm(0,"app-urgent-orders")}function yr(i,l){1&i&&e.nrm(0,"app-sure-orders")}function Sr(i,l){1&i&&e.nrm(0,"app-assigned-orders")}function Tr(i,l){1&i&&e.nrm(0,"app-complete-orders")}function Ir(i,l){1&i&&e.nrm(0,"reopen-order")}function Rr(i,l){1&i&&e.nrm(0,"app-refundable-orders")}function kr(i,l){1&i&&e.nrm(0,"app-refundable-orders")}function Nr(i,l){1&i&&e.nrm(0,"app-refundable-orders")}function xr(i,l){1&i&&e.nrm(0,"app-refundable-orders")}const wr=[{path:"list",component:(()=>{class i extends G.w{constructor(t,r,n,a,s,o,f,C){super(t,r,f,n,a,s,o),this.baseService=n,this.authDaamService=C,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=2,this.activeindex="2"}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}static{this.\u0275fac=function(r){return new(r||i)(e.rXU(b.nX),e.rXU(h.c$),e.rXU(I.Q),e.rXU(R.u),e.rXU(p.vh),e.rXU(u.eD),e.rXU(m.Bq),e.rXU(V.J))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-all-order-types"]],features:[e.Vt3],decls:57,vars:15,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","orderManagement.order.all"],["ngbNavContent",""],["translate","orderManagement.order.pending"],["translate","orderManagement.order.Recall"],["translate","orderManagement.order.newOrders.title"],["translate","orderManagement.order.urgentOrders.title"],["translate","orderManagement.order.sureOrders.title"],["translate","orderManagement.order.assignedOrders.title"],["translate","orderManagement.order.completeOrders.title"],["translate","orderManagement.order.reopenTitle"],["translate","orderManagement.order.refundableOrders.title"],["translate","orderManagement.order.priceEvaluation"],["translate","orderManagement.order.assignEvaluation"],["translate","orderManagement.order.finishEvaluation"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(r,n){if(1&r){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(o){return e.eBV(a),e.DH7(n.active,o)||(n.active=o),e.Njj(o)}),e.bIt("navChange",function(o){return e.eBV(a),e.Njj(n.onNavChange(o))}),e.j41(4,"li",4)(5,"a",5),e.nrm(6,"span",6),e.k0s(),e.DNE(7,Cr,1,0,"ng-template",7),e.k0s(),e.j41(8,"li",4)(9,"a",5),e.nrm(10,"span",8),e.k0s(),e.DNE(11,vr,1,0,"ng-template",7),e.k0s(),e.j41(12,"li",4)(13,"a",5),e.nrm(14,"span",9),e.k0s(),e.DNE(15,jr,1,0,"ng-template",7),e.k0s(),e.j41(16,"li",4)(17,"a",5),e.nrm(18,"span",10),e.k0s(),e.DNE(19,Fr,1,0,"ng-template",7),e.k0s(),e.j41(20,"li",4)(21,"a",5),e.nrm(22,"span",11),e.k0s(),e.DNE(23,Mr,1,0,"ng-template",7),e.k0s(),e.j41(24,"li",4)(25,"a",5),e.nrm(26,"span",12),e.k0s(),e.DNE(27,yr,1,0,"ng-template",7),e.k0s(),e.j41(28,"li",4)(29,"a",5),e.nrm(30,"span",13),e.k0s(),e.DNE(31,Sr,1,0,"ng-template",7),e.k0s(),e.j41(32,"li",4)(33,"a",5),e.nrm(34,"span",14),e.k0s(),e.DNE(35,Tr,1,0,"ng-template",7),e.k0s(),e.j41(36,"li",4)(37,"a",5),e.nrm(38,"span",15),e.k0s(),e.DNE(39,Ir,1,0,"ng-template",7),e.k0s(),e.j41(40,"li",4)(41,"a",5),e.nrm(42,"span",16),e.k0s(),e.DNE(43,Rr,1,0,"ng-template",7),e.k0s(),e.j41(44,"li",4)(45,"a",5),e.nrm(46,"span",17),e.k0s(),e.DNE(47,kr,1,0,"ng-template",7),e.k0s(),e.j41(48,"li",4)(49,"a",5),e.nrm(50,"span",18),e.k0s(),e.DNE(51,Nr,1,0,"ng-template",7),e.k0s(),e.j41(52,"li",4)(53,"a",5),e.nrm(54,"span",19),e.k0s(),e.DNE(55,xr,1,0,"ng-template",7),e.k0s()(),e.nrm(56,"div",20),e.k0s()()}if(2&r){const a=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavItem",3),e.R7$(4),e.Y8G("ngbNavItem",4),e.R7$(4),e.Y8G("ngbNavItem",5),e.R7$(4),e.Y8G("ngbNavItem",6),e.R7$(4),e.Y8G("ngbNavItem",7),e.R7$(4),e.Y8G("ngbNavItem",8),e.R7$(4),e.Y8G("ngbNavItem",9),e.R7$(4),e.Y8G("ngbNavItem",10),e.R7$(4),e.Y8G("ngbNavItem",11),e.R7$(4),e.Y8G("ngbNavItem",12),e.R7$(4),e.Y8G("ngbNavItem",13),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,h.Mm,ht,jt,Et,Pt,mn,Tn,Vn,qn,sr,fr],encapsulation:2})}}return i})(),canActivate:[P.B],data:{roles:["admin"]}},{path:"map",component:ce,canActivate:[P.B],data:{roles:["admin"]}},{path:"new",component:ze,canActivate:[P.B],data:{roles:["admin"]}},{path:"ServiceAfterSale",component:tt,resolve:{data:nt.B},canActivate:[P.B],data:{roles:["admin"]}},{path:"timeAvailable",component:(()=>{class i{constructor(){this.title="orderManagement.timeAvailable.title"}ngOnInit(){}onTimeSelected(t){console.log(t)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-timeAvailable"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"],[3,"onTimeSelected"]],template:function(r,n){1&r&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.j41(2,"time-available",1),e.bIt("onTimeSelected",function(s){return n.onTimeSelected(s)}),e.k0s()),2&r&&(e.FS9("title",e.bMT(1,2,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[Z.m,ee,h.D9]})}}return i})(),canActivate:[P.B],data:{roles:["admin"]}}];let Er=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[b.iI.forChild(wr),b.iI]})}}return i})();var Gr=c(71144);let Vr=(()=>{class i{constructor(){(0,oe.eV)(le().loadAnimation)}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[p.MD,d.YN,d.X1,m.zH,m.Pv,m.Gk,m.h_,m.c9,re.A,ie.JG,k.ND,ae.r,Er,de.G,h.h,j.bG,W.q4,me.H_,m.c9,u.th,T.MQ,m.n8,Gr.j]})}}return i})()}}]);