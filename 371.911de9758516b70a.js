"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[371],{29935:(ae,q,m)=>{m.d(q,{m:()=>d});var g=m(54438);let d=(()=>{class p{constructor(k){this.el=k}onChange(){this.el.nativeElement.value=this.el.nativeElement.value.trim()}static{this.\u0275fac=function(T){return new(T||p)(g.rXU(g.aKT))}}static{this.\u0275dir=g.FsC({type:p,selectors:[["","InputTirmFilter",""]],hostBindings:function(T,B){1&T&&g.bIt("change",function(){return B.onChange()})}})}}return p})()},25947:(ae,q,m)=>{m.d(q,{A:()=>k});var g=m(67569),d=m(45312),p=m(54438),E=m(21626);let k=(()=>{class T extends g.d{constructor(V){super(V,d.c.apiUrl+"WhatsApp/")}GetWhatsAppSetting(){return this.http.get(this.baseUrl+"GetWhatsAppSetting")}GetLocationFromClient(V){return this.http.get(this.baseUrl+"GetLocationFromClient/"+V)}static{this.\u0275fac=function(N){return new(N||T)(p.KVO(E.Qq))}}static{this.\u0275prov=p.jDH({token:T,factory:T.\u0275fac,providedIn:"root"})}}return T})()},56131:(ae,q,m)=>{m.d(q,{E:()=>p});var g=m(7673),d=m(99437);class p{constructor(k,T,B){this.router=k,this.BaseService=T,this.alertService=B,this.pagination={pageNumber:1,pageSize:10}}resolve(k,T){return this.BaseService.get(this.pagination).pipe((0,d.W)(B=>(this.router.navigate([""]),this.alertService.error(B),(0,g.of)(null))))}}},7065:(ae,q,m)=>{m.r(q),m.d(q,{OrderModule:()=>io});var g=m(60177),d=m(89417),p=m(69005),E=m(91022),k=m(70255),T=m(63789),B=m(98982),V=m.n(B),N=m(93887),c=m(8147),f=m(35263),te=m(65430),de=m(41631),j=m(1530),O=m(72510),C=m(51188),e=m(54438);let he=(()=>{class r{constructor(){}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-order-map"]],decls:0,vars:0,template:function(i,n){},encapsulation:2})}}return r})();var w=m(75622),X=m(33826),R=m(3888),_=m(62984),b=m(94575),h=m(56977),u=m(36158),A=m(91426),z=m(12260),H=m(16229),Q=m(12822),U=m(40724),J=m(5779),Y=m(29935);function ke(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",24),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.dismissFn())}),e.k0s()}}function ye(r,l){}function Re(r,l){}function Ee(r,l){if(1&r&&(e.qex(0),e.j41(1,"h2",9)(2,"button",10)(3,"div",11)(4,"div",12)(5,"div",13),e.nrm(6,"i",14),e.k0s()(),e.j41(7,"div",15)(8,"span",16),e.nrm(9,"span",25),e.k0s(),e.j41(10,"bdi")(11,"span",16),e.nrm(12,"span",18),e.j41(13,"span",19),e.EFF(14),e.nI1(15,"date"),e.k0s()()()(),e.j41(16,"div",15)(17,"h6",16)(18,"span",19)(19,"span",26),e.EFF(20),e.k0s()()()()()()(),e.j41(21,"div",21)(22,"div",22),e.DNE(23,Re,0,0,"ng-template"),e.k0s()(),e.bVm()),2&r){const t=e.XpG();e.R7$(14),e.JRh(e.i5U(15,2,t.orderSelected.assignDate,"yyyy-MM-dd HH:mm:sss")),e.R7$(6),e.SpI("",t.orderSelected.assignUser," ")}}function Ne(r,l){}function De(r,l){if(1&r&&(e.qex(0),e.j41(1,"h2",9)(2,"button",10)(3,"div",11)(4,"div",12)(5,"div",13),e.nrm(6,"i",14),e.k0s()(),e.j41(7,"div",15)(8,"span",16),e.nrm(9,"span",27),e.k0s(),e.j41(10,"bdi")(11,"span",16),e.nrm(12,"span",18),e.j41(13,"span",19),e.EFF(14),e.nI1(15,"date"),e.k0s()()()(),e.j41(16,"div",15)(17,"h6",16)(18,"span",19)(19,"span",26),e.EFF(20),e.k0s()()()()()()(),e.j41(21,"div",21)(22,"div",22),e.DNE(23,Ne,0,0,"ng-template"),e.k0s()(),e.bVm()),2&r){const t=e.XpG();e.R7$(14),e.JRh(e.i5U(15,2,t.orderSelected.confirmedDate,"yyyy-MM-dd HH:mm:sss")),e.R7$(6),e.SpI("",t.orderSelected.confirmedUser," ")}}function Oe(r,l){}function we(r,l){if(1&r&&(e.qex(0),e.j41(1,"h2",9)(2,"button",10)(3,"div",11)(4,"div",12)(5,"div",13),e.nrm(6,"i",14),e.k0s()(),e.j41(7,"div",15)(8,"span",16),e.nrm(9,"span",28),e.k0s(),e.j41(10,"bdi")(11,"span",16),e.nrm(12,"span",18),e.j41(13,"span",19),e.EFF(14),e.nI1(15,"date"),e.k0s()()()(),e.j41(16,"div",15)(17,"h6",16)(18,"span",19)(19,"span",26),e.EFF(20),e.k0s()()()()()()(),e.j41(21,"div",21)(22,"div",22),e.DNE(23,Oe,0,0,"ng-template"),e.k0s()(),e.bVm()),2&r){const t=e.XpG();e.R7$(14),e.JRh(e.i5U(15,2,t.orderSelected.finishDate,"yyyy-MM-dd HH:mm:sss")),e.R7$(6),e.SpI("",t.orderSelected.finishUser," ")}}let K=(()=>{class r{constructor(){this.orderSelected={},this.hideCloseIcon=!1,this.dismiss=new e.bkB}ngOnInit(){}dismissFn(){this.dismiss.emit(!0)}getTeam(t){return""!=t||null!=t||null!=t?[]:t.split(",")}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["order-timeline"]],inputs:{orderSelected:"orderSelected",hideCloseIcon:"hideCloseIcon"},outputs:{dismiss:"dismiss"},decls:36,vars:10,consts:[["accordion","ngbAccordion"],[1,"modal-header","p-3","bg-success-subtle"],["id","createTaskLabel","translate","orderManagement.order.trackOrder",1,"modal-title"],["type","button","class","btn-close","data-bs-dismiss","modal","id","createTaskBtn-close","aria-label","Close",3,"click",4,"ngIf"],[1,"modal-body"],[1,"card-body"],[1,"profile-timeline","order-status"],["ngbAccordion",""],["ngbAccordionItem","",3,"collapsed"],["ngbAccordionHeader",""],["ngbAccordionButton","","aria-expanded","true",1,"accordion-button","p-2","shadow-none"],[1,"d-flex","align-items-center"],[1,"flex-shrink-0","avatar-xs"],[1,"avatar-title","rounded-circle"],[1,"ri-arrow-down-fill"],[1,"flex-grow-1","ms-3"],[1,"fs-14","mb-0"],["translate","orderManagement.order.creation"],[1,"fw-normal","mx-4"],[1,"mx-2"],[1,"badge","bg-success-subtle","text-success"],["ngbAccordionCollapse",""],["ngbAccordionBody","",1,"ms-2","ps-5","pt-0"],[4,"ngIf"],["type","button","data-bs-dismiss","modal","id","createTaskBtn-close","aria-label","Close",1,"btn-close",3,"click"],["translate","orderManagement.order.assignDate"],[1,"badge","bg-warning-subtle","text-warning"],["translate","orderManagement.order.sureDate"],["translate","orderManagement.order.finishDate"]],template:function(i,n){1&i&&(e.j41(0,"div",1),e.nrm(1,"h5",2),e.DNE(2,ke,1,0,"button",3),e.k0s(),e.j41(3,"div",4)(4,"div",5)(5,"div",6)(6,"div",7,0)(8,"div",8),e.qex(9),e.j41(10,"h2",9)(11,"button",10)(12,"div",11)(13,"div",12)(14,"div",13),e.nrm(15,"i",14),e.k0s()(),e.j41(16,"div",15)(17,"span",16),e.nrm(18,"span",17),e.k0s(),e.j41(19,"bdi")(20,"span",16),e.nrm(21,"span",18),e.j41(22,"span",19),e.EFF(23),e.nI1(24,"date"),e.k0s()()()(),e.j41(25,"div",15)(26,"h6",16)(27,"span",19)(28,"span",20),e.EFF(29),e.k0s()()()()()()(),e.j41(30,"div",21)(31,"div",22),e.DNE(32,ye,0,0,"ng-template"),e.k0s()(),e.bVm(),e.DNE(33,Ee,24,5,"ng-container",23)(34,De,24,5,"ng-container",23)(35,we,24,5,"ng-container",23),e.k0s()()()()()),2&i&&(e.R7$(2),e.Y8G("ngIf",!n.hideCloseIcon),e.R7$(6),e.Y8G("collapsed",!1),e.R7$(15),e.JRh(e.i5U(24,7,n.orderSelected.createdDate,"yyyy-MM-dd HH:mm:sss")),e.R7$(6),e.SpI("",n.orderSelected.creationUser," "),e.R7$(4),e.Y8G("ngIf",null!=n.orderSelected.assignDate),e.R7$(),e.Y8G("ngIf",null!=n.orderSelected.confirmedDate),e.R7$(),e.Y8G("ngIf",null!=n.orderSelected.finishDate))},dependencies:[g.bT,c.Mm,p.WP,p.r6,p.tW,p.x7,p.UA,p.$R,g.vh],encapsulation:2})}}return r})();function Ve(r,l){if(1&r&&(e.j41(0,"div",41)(1,"div",42)(2,"div",6)(3,"div",17)(4,"div",43),e.nrm(5,"img",44),e.k0s(),e.j41(6,"div",21)(7,"h5",45)(8,"a",46),e.EFF(9),e.k0s()(),e.j41(10,"p",23),e.EFF(11,"Price: "),e.j41(12,"span",47),e.EFF(13,"45$"),e.k0s()(),e.j41(14,"p",23),e.EFF(15,"Count: "),e.j41(16,"span",47),e.EFF(17,"3"),e.k0s()()()()()()()),2&r){const t=l.$implicit;e.R7$(9),e.JRh(t)}}function Ge(r,l){1&r&&e.nrm(0,"span",48)}function Le(r,l){if(1&r&&(e.j41(0,"span",49),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.SpI("",t.orderDetails.districtName," ")}}function $e(r,l){1&r&&e.nrm(0,"span",50)}function Be(r,l){if(1&r&&(e.j41(0,"a",51),e.nrm(1,"i",52),e.k0s()),2&r){const t=e.XpG();e.Y8G("href",t.mapUrl(null==t.orderDetails?null:t.orderDetails.map),e.B4B)}}function Ae(r,l){if(1&r&&(e.j41(0,"li",31)(1,"span",53),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.k0s()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Xe(r,l){if(1&r&&(e.j41(0,"li",31)(1,"span",53),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.k0s()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}let Ue=(()=>{class r{constructor(t){this.alertService=t,this.dismiss=new e.bkB}ngOnChanges(t){console.log(this.orderDetails)}getServices(t){return t.split("#")}copyText(t){navigator.clipboard.writeText(t),this.alertService.info(t)}mapUrl(t){if(!t)return"";const[i,n]=t.split(",").map(Number);return`https://www.google.com/maps/dir//${i},${n}/@${i},${n},17z?hl=en-US`}getTimes(t){return t?.split(",")}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(R.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-orders-details"]],inputs:{orderDetails:"orderDetails"},outputs:{dismiss:"dismiss"},features:[e.OA$],decls:105,vars:59,consts:[[1,"row"],[1,"col-xl-8"],[1,"card","mb-3"],[1,"card-header"],[1,"d-flex","align-items-center"],[1,"card-title","flex-grow-1","mb-0"],[1,"card-body"],[1,"row","row-cols-lg-3","row-cols-2","mb-3"],["class","col",4,"ngFor","ngForOf"],[1,"table-responsive","table-card","d-flex","justify-content-end","border-top","border-top-dashed"],[1,"table","table-borderless","mb-0",2,"max-width","20rem"],[1,"text-end"],[1,"border-top","border-top-dashed"],["scope","row"],[3,"orderSelected","hideCloseIcon"],[1,"col-xl-4"],[1,"card"],[1,"d-flex"],[1,"list-unstyled","mb-0","vstack","gap-3"],[1,"flex-shrink-0"],["src","assets/images/users/user-dummy-img.jpg","alt","",1,"avatar-sm","rounded"],[1,"flex-grow-1","ms-3"],[1,"fs-14","mb-1"],[1,"text-muted","mb-0"],[1,"ri-phone-line","me-2","align-middle","text-info","fs-16"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"card-title","mb-0"],[1,"ri-map-pin-line","align-middle","me-1","text-muted"],[1,"list-unstyled","vstack","gap-2","fs-13","mb-0"],[1,"fw-medium","fs-14","text-muted"],[1,"text-muted"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"ri-history-fill","align-middle","me-1","text-muted"],[1,"card-body","d-flex","card-scroll-xl"],["class","text-muted",4,"ngFor","ngForOf"],[1,"col-xl-12","d-flex","gap-2","justify-content-end"],["type","button","data-bs-dismiss","modal",1,"btn","w-sm","btn-danger","m-3",3,"click"],[1,"col"],[1,"card",2,"box-shadow","0 0 6px rgb(56 65 74 / 64%)"],[1,"flex-shrink-0","avatar-md","bg-light","rounded","p-1"],["src","assets/images/products/img-8.png","alt","",1,"img-fluid","d-block"],[1,"fs-15",2,"min-height","38px"],["routerLink","/ecommerce/product-detail/",1,"link-primary"],[1,"fw-medium"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],[1,"badge","bg-primary-subtle","text-primary","mx-1"]],template:function(i,n){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),e.EFF(6),e.k0s()()(),e.j41(7,"div",6)(8,"div",7),e.DNE(9,Ve,18,1,"div",8),e.k0s(),e.j41(10,"div",9)(11,"table",10)(12,"tbody")(13,"tr")(14,"td"),e.EFF(15),e.nI1(16,"translate"),e.k0s(),e.j41(17,"td",11),e.EFF(18,"$359.96"),e.k0s()(),e.j41(19,"tr")(20,"td"),e.EFF(21),e.nI1(22,"translate"),e.k0s(),e.j41(23,"td",11),e.EFF(24,"-$53.99"),e.k0s()(),e.j41(25,"tr")(26,"td"),e.EFF(27),e.nI1(28,"translate"),e.k0s(),e.j41(29,"td",11),e.EFF(30,"$44.99"),e.k0s()(),e.j41(31,"tr",12)(32,"th",13),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.j41(35,"th",11),e.EFF(36,"$415.96"),e.k0s()()()()()()(),e.nrm(37,"order-timeline",14),e.k0s(),e.j41(38,"div",15)(39,"div",16)(40,"div",3)(41,"div",17)(42,"h5",5),e.EFF(43),e.nI1(44,"translate"),e.k0s()()(),e.j41(45,"div",6)(46,"ul",18)(47,"li")(48,"div",4)(49,"div",19),e.nrm(50,"img",20),e.k0s(),e.j41(51,"div",21)(52,"h6",22),e.EFF(53),e.k0s(),e.j41(54,"p",23),e.EFF(55),e.nI1(56,"translate"),e.nI1(57,"date"),e.k0s()()()(),e.j41(58,"li"),e.nrm(59,"i",24),e.j41(60,"span",25),e.bIt("click",function(){return n.copyText(n.orderDetails.mobile)}),e.EFF(61),e.nrm(62,"i",26),e.k0s()()()()(),e.j41(63,"div",16)(64,"div",3)(65,"h5",27),e.nrm(66,"i",28),e.EFF(67),e.nI1(68,"translate"),e.k0s()(),e.j41(69,"div",6)(70,"ul",29)(71,"li",30),e.EFF(72),e.nI1(73,"translate"),e.k0s(),e.j41(74,"li",31),e.EFF(75),e.nI1(76,"translate"),e.DNE(77,Ge,1,0,"span",32)(78,Le,2,1,"span",33),e.k0s(),e.j41(79,"li",31),e.EFF(80),e.nI1(81,"translate"),e.DNE(82,$e,1,0,"span",34)(83,Be,2,1,"a",35),e.k0s()()()(),e.j41(84,"div",16)(85,"div",3)(86,"h5",27),e.nrm(87,"i",36),e.EFF(88),e.nI1(89,"translate"),e.k0s()(),e.j41(90,"div",37)(91,"ul",29)(92,"li",30),e.EFF(93),e.nI1(94,"translate"),e.k0s(),e.DNE(95,Ae,4,1,"li",38),e.k0s(),e.j41(96,"ul",29)(97,"li",30),e.EFF(98),e.nI1(99,"translate"),e.k0s(),e.DNE(100,Xe,4,1,"li",38),e.k0s()()()(),e.j41(101,"div",39)(102,"button",40),e.bIt("click",function(){return n.dismissFn()}),e.EFF(103),e.nI1(104,"translate"),e.k0s()()()),2&i&&(e.R7$(6),e.SpI("#SO#",n.orderDetails.orderCode,""),e.R7$(3),e.Y8G("ngForOf",n.getServices(n.orderDetails.services)),e.R7$(6),e.SpI("",e.bMT(16,28,"orderManagement.order.subTotal")," :"),e.R7$(6),e.SpI("",e.bMT(22,30,"orderManagement.order.net")," :"),e.R7$(6),e.SpI("",e.bMT(28,32,"orderManagement.order.tax")," :"),e.R7$(6),e.SpI("",e.bMT(34,34,"orderManagement.order.total")," :"),e.R7$(4),e.Y8G("orderSelected",n.orderDetails)("hideCloseIcon",!0),e.R7$(6),e.JRh(e.bMT(44,36,"orderManagement.order.customerDetails")),e.R7$(10),e.JRh(n.orderDetails.agentName),e.R7$(2),e.Lme(" ",e.bMT(56,38,"orderManagement.order.visitDate")," : ",e.i5U(57,40,n.orderDetails.visitDate,"yyyy-MM-dd")," "),e.R7$(6),e.SpI("",n.orderDetails.mobile," "),e.R7$(6),e.SpI(" ",e.bMT(68,43,"orderManagement.order.customerAddress")," "),e.R7$(5),e.Lme(" ",e.bMT(73,45,"orderManagement.order.cityName"),": ",n.orderDetails.cityName," "),e.R7$(3),e.SpI(" ",e.bMT(76,47,"orderManagement.order.districtName"),": "),e.R7$(2),e.Y8G("ngIf",null==n.orderDetails.districtName),e.R7$(),e.Y8G("ngIf",null!==n.orderDetails.districtName),e.R7$(2),e.SpI(" ",e.bMT(81,49,"orderManagement.order.location"),": "),e.R7$(2),e.Y8G("ngIf",""==n.orderDetails.map),e.R7$(),e.Y8G("ngIf",null==n.orderDetails?null:n.orderDetails.map),e.R7$(5),e.SpI(" ",e.bMT(89,51,"orderManagement.order.workTimes")," "),e.R7$(5),e.SpI(" ",e.bMT(94,53,"orderManagement.order.assignTo"),": "),e.R7$(2),e.Y8G("ngForOf",n.getTimes(n.orderDetails.teamNames)),e.R7$(3),e.SpI(" ",e.bMT(99,55,"orderManagement.order.workTimes"),": "),e.R7$(2),e.Y8G("ngForOf",n.getTimes(n.orderDetails.workTimes)),e.R7$(3),e.SpI(" ",e.bMT(104,57,"general.action.close")," "))},dependencies:[g.Sq,g.bT,C.Wk,c.Mm,K,g.vh,c.D9],styles:["td[_ngcontent-%COMP%]{padding:3px 4px!important}"]})}}return r})();function Ye(r,l){1&r&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.creation "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.cityName "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," orderManagement.order.status "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," orderManagement.order.agentName "),e.k0s(),e.j41(18,"th",35),e.nrm(19,"i",30),e.EFF(20," orderManagement.order.channelName "),e.k0s(),e.j41(21,"th",36),e.EFF(22," orderManagement.order.assignTo "),e.k0s(),e.j41(23,"th",37),e.EFF(24," orderManagement.order.workTimes "),e.k0s(),e.j41(25,"th",38),e.nrm(26,"i",30),e.EFF(27," orderManagement.order.visitDate "),e.k0s(),e.j41(28,"th",39),e.EFF(29," orderManagement.order.services "),e.k0s(),e.nrm(30,"th",40),e.k0s())}function Pe(r,l){1&r&&e.nrm(0,"span",55)}function ze(r,l){if(1&r&&(e.j41(0,"span",43),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function He(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Je(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Qe(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function qe(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",41)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openModalClient(n.orderCode,o,"xxl"))}),e.j41(4,"bdi"),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"date"),e.j41(9,"span",43),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.DNE(13,Pe,1,0,"span",44)(14,ze,2,1,"span",45),e.k0s(),e.j41(15,"td")(16,"span"),e.nrm(17,"span",46),e.k0s()(),e.j41(18,"td",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.openModalClient(n,o))}),e.j41(19,"span",47),e.EFF(20),e.k0s(),e.nrm(21,"br"),e.j41(22,"span",48),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(23),e.nrm(24,"i",49),e.k0s()(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.DNE(28,He,4,1,"ng-container",50),e.k0s(),e.j41(29,"td"),e.DNE(30,Je,4,1,"ng-container",50),e.k0s(),e.j41(31,"td"),e.EFF(32),e.nI1(33,"date"),e.k0s(),e.j41(34,"td"),e.DNE(35,Qe,4,1,"ng-container",50),e.k0s(),e.j41(36,"td")(37,"i",51),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(53);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.k0s(),e.j41(38,"button",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openEditOrderModal(n.orderCode,o,"xxl"))}),e.nrm(39,"i",53)(40,"span",54),e.k0s()()()}if(2&r){const t=l.$implicit,i=l.rowIndex,n=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(8,18,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(2),e.ZvI("badge ",n.getStatus(t),""),e.R7$(),e.FS9("translate",n.getTrnslate(t)),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.SpI(" ",t.channelName,""),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",n.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(33,21,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngForOf",n.getServices(t.services))}}function We(r,l){1&r&&(e.j41(0,"div",57),e.EFF(1," general.table.noData "),e.k0s())}function Ke(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",58)(1,"div",59),e.nrm(2,"ngb-pagination-info",60),e.j41(3,"table-length",61),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",62)(5,"ngb-pagination",63),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Ze(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",64),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function et(r,l){1&r&&e.nrm(0,"client-profile-main",65)}function tt(r,l){if(1&r){const t=e.RV6();e.j41(0,"app-all-orders-details",66),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderDetails",t.orderSelected)}}function nt(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",67),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let it=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="2",this.active=2,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.countLoad=2,this.isOrderEdit=!1,this.orderSelected={},this.configRoute(),this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.entities=t.data,this.pagination.totalItems=t.data?.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--",Status:this.translateService.instant(this.getTrnslate(i)),"Agent Name":i.agentName,Mobile:i.mobile,"Channel Name":i.channelName,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Services:i.services})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.new"}openModalClient(t,i,n="xl"){this.clientSelected=t.orderCode,this.orderSelected=t,this.isOrderEdit=!1,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t?.split(",")}getServices(t){return t.split("#")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!0,this.clientSelected=t,this.modalService.open(i,{centered:!0,size:n})}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-order"]],features:[e.Vt3],decls:54,vars:51,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["orderModel",""],["OrderTimeLineModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","creationDate","translate","",2,"width","13%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","agentName","translate","",2,"width","12%"],["pSortableColumn","channelName","translate","",2,"width","7%"],["pSortableColumn","assignTo","translate","",2,"width","8%"],["pSortableColumn","workTimes","translate","",2,"width","8%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","10%"],["translate","",2,"width","25%"],[1,"fs-5"],[3,"click"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[3,"translate"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["type","button",1,"btn","px-4","w-auto","btn-sm","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"click"],[1,"ri-edit-2-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.edit"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],["","clientSelected"],[3,"dismiss","orderDetails"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"base-filter",8),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(4,9),e.j41(5,"div",10)(6,"div",11)(7,"input",12),e.nI1(8,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(9,"i",13),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"input",14),e.nI1(13,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(14,"i",13),e.k0s()(),e.j41(15,"div",10)(16,"div",11)(17,"input",12),e.nI1(18,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(19,"i",13),e.k0s()(),e.j41(20,"div",10)(21,"div",11)(22,"ng-select",15),e.nI1(23,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(24,"div",10)(25,"div",11)(26,"ng-select",16),e.nI1(27,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(28,"div",10)(29,"div",11)(30,"ng-select",17),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(32,"div",18)(33,"input",19),e.nI1(34,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.dates,s)||(n.searchForm.dates=s),e.Njj(s)}),e.k0s()(),e.j41(35,"div",18)(36,"input",19),e.nI1(37,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(38,"div",20)(39,"div",21)(40,"p-table",22,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(42,Ye,31,0,"ng-template",23)(43,qe,41,24,"ng-template",24),e.k0s()(),e.DNE(44,We,2,0,"div",25)(45,Ke,6,8,"div",26),e.k0s()()()(),e.DNE(46,Ze,1,0,"ng-template",null,1,e.C5r)(48,et,1,0,"ng-template",null,2,e.C5r)(50,tt,1,1,"ng-template",null,3,e.C5r)(52,nt,1,1,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,35,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,37,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,39,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(23,41,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,43,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(31,45,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(34,47,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(37,49,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.me,d.Q0,d.BC,d.vS,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,O.vr,Y.m,K,Ue,g.vh,c.D9],encapsulation:2})}}return r})();var D=m(70980),G=m(37021),L=m(35335),$=m(45236),Z=function(r){return r[r.None=0]="None",r[r.Reviewed=1]="Reviewed",r[r.Confirmed=2]="Confirmed",r[r.Free=3]="Free",r[r.Reopened=4]="Reopened",r[r.Finished=5]="Finished",r[r.Canceled=6]="Canceled",r[r.Assigned=7]="Assigned",r[r.Urgent=8]="Urgent",r[r.New=9]="New",r}(Z||{}),ie=m(91020),ee=m(39436),W=m(38542),Fe=m(21413);let ce=(()=>{class r{constructor(t,i,n,a){this.cancelReasonService=t,this.orderService=i,this.ngxLoader=n,this.alertService=a,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=u.$$,this.operationLoader=u.ZW,this.notifier=new Fe.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}onCancelOrder(){let t={cancelReasonCode:this.form.cancelReasonCode,orderId:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.CancelOrder(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{this.ngxLoader.stopLoader(this.operationLoader),i.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(ie.e),e.rXU(X.Q),e.rXU(j.eD),e.rXU(R.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["cancel-order-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(n.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.cancelReasonCode,s)||(n.form.cancelReasonCode=s),e.Njj(s)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&i){const a=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",n.cancelReasons)("multiple",!1),e.R50("ngModel",n.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!a.valid)}},dependencies:[d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,c.Mm,j.Cv,O.vr,c.D9],encapsulation:2})}}return r})();const rt=()=>["newOrder.edit"],at=()=>["newOrder.confirmed"],st=()=>["newOrder.cancel"];function ot(r,l){1&r&&(e.j41(0,"tr",29)(1,"th",30),e.nrm(2,"i",31),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",32),e.nrm(5,"i",31),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",33),e.nrm(8,"i",31),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",34),e.nrm(11,"i",31),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",35),e.nrm(14,"i",31),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",36),e.EFF(17," orderManagement.order.assignTo "),e.k0s(),e.j41(18,"th",37),e.EFF(19," orderManagement.order.workTimes "),e.k0s(),e.j41(20,"th",38),e.nrm(21,"i",31),e.EFF(22," orderManagement.order.visitDate "),e.k0s(),e.j41(23,"th",39),e.EFF(24," orderManagement.order.services "),e.k0s(),e.nrm(25,"th",40),e.k0s())}function lt(r,l){1&r&&e.nrm(0,"span",53)}function dt(r,l){if(1&r&&(e.j41(0,"span",54),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function ct(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",55),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function mt(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",55),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function pt(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",55),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function gt(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",56),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.openEditOrderModal(n.orderCode,o,"xxl"))}),e.nrm(2,"i",57),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.editOrders"))}function _t(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",58),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openModal(n.orderCode,o))}),e.nrm(2,"i",59),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.confirmOrder"))}function ht(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",60),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openModal(n.orderCode,o))}),e.nrm(2,"i",61),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.cancelOrder"))}function ut(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",41)(1,"td",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.DNE(11,lt,1,0,"span",43)(12,dt,2,1,"span",44),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(18),e.nrm(19,"i",47),e.k0s()(),e.j41(20,"td"),e.DNE(21,ct,4,1,"ng-container",48),e.k0s(),e.j41(22,"td"),e.DNE(23,mt,4,1,"ng-container",48),e.k0s(),e.j41(24,"td"),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"td"),e.DNE(28,pt,4,1,"ng-container",48),e.k0s(),e.j41(29,"td")(30,"div",49),e.DNE(31,gt,3,3,"button",50)(32,_t,3,3,"button",51)(33,ht,3,3,"button",52),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(6,15,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(26,18,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngForOf",i.getServices(t.services)),e.R7$(3),e.Y8G("hasPermission",e.lJ4(21,rt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(22,at)),e.R7$(),e.Y8G("hasPermission",e.lJ4(23,st))}}function bt(r,l){1&r&&(e.j41(0,"div",62),e.EFF(1," general.table.noData "),e.k0s())}function ft(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",63)(1,"div",64),e.nrm(2,"ngb-pagination-info",65),e.j41(3,"table-length",66),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",67)(5,"ngb-pagination",68),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function vt(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",69,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SubmitOrder())}),e.nrm(2,"ngx-ui-loader",70),e.j41(3,"div",71)(4,"div",72)(5,"button",73),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",74)(7,"div",75),e.nrm(8,"lord-icon",76),e.j41(9,"div",77),e.nrm(10,"h3",78)(11,"p",79),e.k0s()(),e.j41(12,"div",80),e.nrm(13,"button",81),e.j41(14,"button",82),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Ct(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-order-model",83),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function jt(r,l){if(1&r&&e.nrm(0,"order-operation",84),2&r){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",!0)("orderCode",t.orderSelected)}}function Ft(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",85),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let xt=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.cancelReasonService=P,this.title="orderManagement.order.newOrders.title",this.titleOperation="orderManagement.order.newOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.OrderStatusEnum=Z,this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.cancelReasons=[],this.isOrderEdit=!1,this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,this.pagination.statusFilter=this.OrderStatusEnum.New,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("newOrder"),this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("newOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("newOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Services:i.services})}),t}SubmitOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.SubmitOrder(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.isOrderEdit=!1,this.form={},this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}openEditOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!0,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix),e.rXU(ie.e))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-new-orders"]],features:[e.Vt3],decls:52,vars:46,consts:[["tableMaster",""],["SubmitOrderModal",""],["deleteModal",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","5%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","8%"],["pSortableColumn","creationUser","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","5%"],["translate","",2,"width","8%"],["translate","",2,"width","5%"],["pSortableColumn","visitDate","translate","",2,"width","7%"],["translate","",2,"width","10%"],[2,"width","10%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],["tooltipPosition","top","class","btn btn-sm btn-soft-info edit-list ",3,"pTooltip","click",4,"hasPermission"],["class","btn btn-sm btn-success edit-list mx-1","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","btn btn-sm btn-soft-danger remove-list  ",3,"pTooltip","click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-success","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-check-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[3,"success","dismiss","orderId"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",12)(30,"div",13)(31,"ng-select",19),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",20)(34,"input",21),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",22)(37,"div",23)(38,"p-table",24,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,ot,26,0,"ng-template",25)(41,ut,34,24,"ng-template",26),e.k0s()(),e.DNE(42,bt,2,0,"div",27)(43,ft,6,8,"div",28),e.k0s()()()(),e.DNE(44,vt,15,3,"ng-template",null,1,e.C5r)(46,Ct,1,1,"ng-template",null,2,e.C5r)(48,jt,1,3,"ng-template",null,3,e.C5r)(50,Ft,1,1,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","newOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,W.m,ce,K,g.vh,c.D9],encapsulation:2})}}return r})();const Mt=()=>["urgented.assignTeam"],Tt=()=>["urgented.edit"],St=()=>["urgented.cancel"];function It(r,l){1&r&&(e.j41(0,"tr",30)(1,"th",31),e.nrm(2,"i",32),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",33),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",34),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",35),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",36),e.nrm(14,"i",32),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",37),e.EFF(17," orderManagement.order.assignTo "),e.k0s(),e.j41(18,"th",37),e.EFF(19," orderManagement.order.workTimes "),e.k0s(),e.j41(20,"th",37),e.EFF(21," orderManagement.order.visitDate "),e.k0s(),e.j41(22,"th",38),e.EFF(23," orderManagement.order.location "),e.k0s(),e.nrm(24,"th",39),e.k0s())}function kt(r,l){1&r&&e.nrm(0,"span",54)}function yt(r,l){if(1&r&&(e.j41(0,"span",55),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Rt(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Et(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Nt(r,l){1&r&&e.nrm(0,"span",57)}function Dt(r,l){if(1&r&&(e.j41(0,"a",58),e.nrm(1,"i",59),e.k0s()),2&r){const t=e.XpG().$implicit,i=e.XpG();e.Y8G("href",i.mapUrl(null==t?null:t.map),e.B4B)}}function Ot(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",60),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openAssignOrderModalModal(n,o,"lg"))}),e.nrm(2,"i",61),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.confirmOrder"))}function wt(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",62),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openEditOrderModal(n.orderCode,o,"xxl"))}),e.nrm(2,"i",63),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.orderEdit"))}function Vt(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",64),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openModal(n.orderCode,o))}),e.nrm(2,"i",65),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.cancelOrder"))}function Gt(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",40)(1,"td",41),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.DNE(11,kt,1,0,"span",42)(12,yt,2,1,"span",43),e.k0s(),e.j41(13,"td")(14,"span",44),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(18),e.nrm(19,"i",46),e.k0s()(),e.j41(20,"td"),e.DNE(21,Rt,4,1,"ng-container",47),e.k0s(),e.j41(22,"td"),e.DNE(23,Et,4,1,"ng-container",47),e.k0s(),e.j41(24,"td"),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"td"),e.DNE(28,Nt,1,0,"span",48)(29,Dt,2,1,"a",49),e.k0s(),e.j41(30,"td")(31,"div",50),e.DNE(32,Ot,3,3,"button",51)(33,wt,3,3,"button",52)(34,Vt,3,3,"button",53),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(6,16,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(26,19,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngIf",""==t.map),e.R7$(),e.Y8G("ngIf",null==t?null:t.map),e.R7$(3),e.Y8G("hasPermission",e.lJ4(22,Mt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(23,Tt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(24,St))}}function Lt(r,l){1&r&&(e.j41(0,"div",66),e.EFF(1," general.table.noData "),e.k0s())}function $t(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",67)(1,"div",68),e.nrm(2,"ngb-pagination-info",69),e.j41(3,"table-length",70),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",71)(5,"ngb-pagination",72),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Bt(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-order-model",73),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function At(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&r){const t=l.$implicit,i=l.index,n=e.XpG(2);e.R7$(2),e.JRh(t),e.R7$(2),e.JRh(n.orderSelectedData.workTimes[i])}}function Xt(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",74,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.assignOrder())}),e.nrm(2,"ngx-ui-loader",75),e.j41(3,"div",76)(4,"div",77)(5,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",79)(7,"div",80)(8,"h4",81),e.nrm(9,"i",82),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",83)(13,"div",84)(14,"label",85),e.EFF(15,"orderManagement.order.agentName"),e.k0s(),e.j41(16,"div",86),e.EFF(17),e.k0s()(),e.j41(18,"div",84)(19,"label",85),e.EFF(20,"orderManagement.order.visitDate"),e.k0s(),e.j41(21,"div",86),e.EFF(22),e.nI1(23,"date"),e.k0s()(),e.j41(24,"div",87)(25,"table",88)(26,"thead")(27,"tr")(28,"th",85),e.EFF(29," orderManagement.order.assignTo "),e.k0s(),e.j41(30,"th",85),e.EFF(31," orderManagement.order.workTimes "),e.k0s()()(),e.j41(32,"tbody"),e.DNE(33,At,5,2,"tr",47),e.k0s()()()(),e.j41(34,"div",89),e.nrm(35,"button",90),e.j41(36,"button",91),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.SpI(" ",e.bMT(11,7,"orderManagement.order.AssignMessage")," "),e.R7$(7),e.SpI(" ",t.orderSelectedData.agentName," "),e.R7$(5),e.SpI(" ",e.i5U(23,9,t.orderSelectedData.visitDate,"yyyy-MM-dd")," "),e.R7$(11),e.Y8G("ngForOf",t.orderSelectedData.teamNames)}}function Ut(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",74,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SureOrderRollBack())}),e.nrm(2,"ngx-ui-loader",75),e.j41(3,"div",76)(4,"div",77)(5,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",79)(7,"div",92),e.nrm(8,"lord-icon",93),e.j41(9,"div",94),e.nrm(10,"h3",95)(11,"p",96),e.k0s()(),e.j41(12,"div",97),e.nrm(13,"button",90),e.j41(14,"button",91),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function Yt(r,l){if(1&r&&e.nrm(0,"order-operation",98),2&r){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",!0)("orderCode",t.orderSelected)}}function Pt(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",99),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let zt=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.title="orderManagement.order.urgentOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.OrderStatusEnum=Z,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=3,this.orderSelected=0,this.orderSelectedData={},this.cities=[],this.districts=[],this.channels=[],this.isOrderEdit=!1,this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.statusFilter=this.OrderStatusEnum.Urgent,this.ngxLoader.startLoader("urgentOrder"),this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("urgentOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("urgentOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"Creation user":i.creationUser,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Location:i.map?this.mapUrl(i?.map):this.translateService.instant("orderManagement.order.noMap")})}),t}assignOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.assignOrder(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.form={},this.isOrderEdit=!1,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}SureOrderRollBack(){this.ngxLoader.startLoader(u.Fq),this.baseService.SureOrderRollBack(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}getTimes(t){return""==t?[]:t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}mapUrl(t){if(!t)return"";const[i,n]=t.split(",").map(Number);return`https://www.google.com/maps/dir//${i},${n}/@${i},${n},17z?hl=en-US`}openAssignOrderModalModal(t,i,n="md"){this.form={},this.orderSelected=t.orderCode,this.orderSelectedData={},this.orderSelectedData.agentName=t.agentName,this.orderSelectedData.visitDate=t.visitDate,this.orderSelectedData.workTimes=this.getTimes(t.workTimes),this.orderSelectedData.teamNames=this.getTimes(t.teamNames),this.modalService.open(i,{centered:!0,size:n})}openEditOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!0,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}openOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!1,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-urgent-orders"]],features:[e.Vt3],decls:54,vars:46,consts:[["tableMaster",""],["deleteModal",""],["SubmitOrderModal",""],["SureOrderRollBackModal",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","10%"],["pSortableColumn","creationUser","translate","",2,"width","8%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","8%"],["translate","",2,"width","6%"],[2,"width","15%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"d-inline"],["class","  btn btn-sm btn-primary edit-list","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","btn btn-sm btn-soft-info edit-list  mx-1",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","  btn btn-sm btn-soft-danger remove-list ",3,"pTooltip","click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["tooltipPosition","top",1,"btn","btn-sm","btn-primary","edit-list",3,"click","pTooltip"],[1,"ri-check-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-1",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"mb-0","mt-2","text-center"],[1,"ri-alert-fill","me-2",2,"font-size","1.3rem"],[1,"mt-5","row"],[1,"col-6"],["translate",""],[1,"form-control"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"input",17),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",16),e.k0s()(),e.j41(16,"div",13)(17,"div",14)(18,"input",15),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",16),e.k0s()(),e.j41(21,"div",13)(22,"div",14)(23,"ng-select",18),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",13)(26,"div",14)(27,"ng-select",19),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",13)(30,"div",14)(31,"ng-select",20),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",21)(34,"input",22),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",23)(37,"div",24)(38,"p-table",25,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,It,25,0,"ng-template",26)(41,Gt,35,25,"ng-template",27),e.k0s()(),e.DNE(42,Lt,2,0,"div",28)(43,$t,6,8,"div",29),e.k0s()()()(),e.DNE(44,Bt,1,1,"ng-template",null,1,e.C5r)(46,Xt,37,12,"ng-template",null,2,e.C5r)(48,Ut,15,3,"ng-template",null,3,e.C5r)(50,Yt,1,3,"ng-template",null,4,e.C5r)(52,Pt,1,1,"ng-template",null,5,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","urgentOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,W.m,ce,K,g.vh,c.D9],encapsulation:2})}}return r})();const Ht=()=>["confirmed.assignTeam"],Jt=()=>["confirmed.undoOrder"],Qt=()=>["confirmed.edit"],qt=()=>["confirmed.cancel"];function Wt(r,l){1&r&&(e.j41(0,"tr",30)(1,"th",31),e.nrm(2,"i",32),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",33),e.nrm(5,"i",32),e.EFF(6," orderManagement.order.createdDate "),e.k0s(),e.j41(7,"th",34),e.nrm(8,"i",32),e.EFF(9," orderManagement.order.creationUser "),e.k0s(),e.j41(10,"th",35),e.nrm(11,"i",32),e.EFF(12," orderManagement.order.cityName "),e.k0s(),e.j41(13,"th",36),e.nrm(14,"i",32),e.EFF(15," orderManagement.order.agentName "),e.k0s(),e.j41(16,"th",37),e.EFF(17," orderManagement.order.assignTo "),e.k0s(),e.j41(18,"th",37),e.EFF(19," orderManagement.order.workTimes "),e.k0s(),e.j41(20,"th",38),e.nrm(21,"i",32),e.EFF(22," orderManagement.order.visitDate "),e.k0s(),e.j41(23,"th",39),e.EFF(24," orderManagement.order.location "),e.k0s(),e.nrm(25,"th",40),e.k0s())}function Kt(r,l){1&r&&e.nrm(0,"span",57)}function Zt(r,l){if(1&r&&(e.j41(0,"span",58),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function en(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",59),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function tn(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",59),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function nn(r,l){1&r&&e.nrm(0,"span",60)}function rn(r,l){if(1&r&&(e.j41(0,"a",61),e.nrm(1,"i",62),e.k0s()),2&r){const t=e.XpG().$implicit,i=e.XpG();e.Y8G("href",i.mapUrl(null==t?null:t.map),e.B4B)}}function an(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",63),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openAssignOrderModalModal(n,o,"lg"))}),e.nrm(2,"i",64),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.assignOrder"))}function sn(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",65),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.openModal(n.orderCode,o,"md"))}),e.nrm(2,"i",66),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.undoOrder"))}function on(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",67),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openEditOrderModal(n.orderCode,o,"xxl"))}),e.nrm(2,"i",68),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.editOrder"))}function ln(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",69),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openModal(n.orderCode,o))}),e.nrm(2,"i",70),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.cancelOrder"))}function dn(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",41)(1,"td",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.DNE(11,Kt,1,0,"span",43)(12,Zt,2,1,"span",44),e.k0s(),e.j41(13,"td")(14,"span",45),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(18),e.nrm(19,"i",47),e.k0s()(),e.j41(20,"td"),e.DNE(21,en,4,1,"ng-container",48),e.k0s(),e.j41(22,"td"),e.DNE(23,tn,4,1,"ng-container",48),e.k0s(),e.j41(24,"td"),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"td"),e.DNE(28,nn,1,0,"span",49)(29,rn,2,1,"a",50),e.k0s(),e.j41(30,"td")(31,"div",51)(32,"i",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(53);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.k0s(),e.DNE(33,an,3,3,"button",53)(34,sn,3,3,"button",54)(35,on,3,3,"button",55)(36,ln,3,3,"button",56),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(6,17,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(26,20,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngIf",""==t.map),e.R7$(),e.Y8G("ngIf",null==t?null:t.map),e.R7$(4),e.Y8G("hasPermission",e.lJ4(23,Ht)),e.R7$(),e.Y8G("hasPermission",e.lJ4(24,Jt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(25,Qt)),e.R7$(),e.Y8G("hasPermission",e.lJ4(26,qt))}}function cn(r,l){1&r&&(e.j41(0,"div",71),e.EFF(1," general.table.noData "),e.k0s())}function mn(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",72)(1,"div",73),e.nrm(2,"ngb-pagination-info",74),e.j41(3,"table-length",75),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",76)(5,"ngb-pagination",77),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function pn(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-order-model",78),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function gn(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s()()),2&r){const t=l.$implicit,i=l.index,n=e.XpG(2);e.R7$(2),e.JRh(t),e.R7$(2),e.JRh(n.orderSelectedData.workTimes[i])}}function _n(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",79,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.AssignOrder())}),e.nrm(2,"ngx-ui-loader",80),e.j41(3,"div",81)(4,"div",82)(5,"button",83),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",84)(7,"div",85)(8,"h4",86),e.nrm(9,"i",87),e.EFF(10),e.nI1(11,"translate"),e.k0s(),e.j41(12,"div",88)(13,"div",89)(14,"label",90),e.EFF(15,"orderManagement.order.agentName"),e.k0s(),e.j41(16,"div",91),e.EFF(17),e.k0s()(),e.j41(18,"div",89)(19,"label",90),e.EFF(20,"orderManagement.order.visitDate"),e.k0s(),e.j41(21,"div",91),e.EFF(22),e.nI1(23,"date"),e.k0s()(),e.j41(24,"div",92)(25,"table",93)(26,"thead")(27,"tr")(28,"th",90),e.EFF(29," orderManagement.order.assignTo "),e.k0s(),e.j41(30,"th",90),e.EFF(31," orderManagement.order.workTimes "),e.k0s()()(),e.j41(32,"tbody"),e.DNE(33,gn,5,2,"tr",48),e.k0s()()()(),e.j41(34,"div",94),e.nrm(35,"button",95),e.j41(36,"button",96),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.SpI(" ",e.bMT(11,7,"orderManagement.order.AssignMessage")," "),e.R7$(7),e.SpI(" ",t.orderSelectedData.agentName," "),e.R7$(5),e.SpI(" ",e.i5U(23,9,t.orderSelectedData.visitDate,"yyyy-MM-dd")," "),e.R7$(11),e.Y8G("ngForOf",t.orderSelectedData.teamNames)}}function hn(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",79,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.SureOrderRollBack())}),e.nrm(2,"ngx-ui-loader",80),e.j41(3,"div",81)(4,"div",82)(5,"button",83),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",84)(7,"div",97),e.nrm(8,"lord-icon",98),e.j41(9,"div",99),e.nrm(10,"h3",100)(11,"p",101),e.k0s()(),e.j41(12,"div",102),e.nrm(13,"button",95),e.j41(14,"button",96),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}function un(r,l){if(1&r&&e.nrm(0,"order-operation",103),2&r){const t=e.XpG();e.Y8G("isOrderEdit",t.isOrderEdit)("isInner",!0)("orderCode",t.orderSelected)}}function bn(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",104),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let fn=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.title="orderManagement.order.sureOrders.title",this.titleOperation="orderManagement.order.sureOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.OrderStatusEnum=Z,this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.orderSelectedData={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.isOrderEdit=!1,this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.pagination.statusFilter=this.OrderStatusEnum.Confirmed,this.ngxLoader.startLoader("sureOrder"),this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("sureOrder"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("sureOrder"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"Creation user":i.creationUser,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Location:i.map?this.mapUrl(i?.map):this.translateService.instant("orderManagement.order.noMap")})}),t}AssignOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.assignOrder(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}SureOrderRollBack(){this.ngxLoader.startLoader(u.Fq),this.baseService.SureOrderRollBack(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.form={},this.isOrderEdit=!1,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}getTimes(t){return t.split(",")}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}mapUrl(t){if(!t)return"";const[i,n]=t.split(",").map(Number);return`https://www.google.com/maps/dir//${i},${n}/@${i},${n},17z?hl=en-US`}openAssignOrderModalModal(t,i,n="md"){this.form={},this.orderSelected=t.orderCode,this.orderSelectedData={},this.orderSelectedData.agentName=t.agentName,this.orderSelectedData.visitDate=t.visitDate,this.orderSelectedData.workTimes=this.getTimes(t.workTimes),this.orderSelectedData.teamNames=this.getTimes(t.teamNames),this.modalService.open(i,{centered:!0,size:n})}openEditOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!0,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-sure-orders"]],features:[e.Vt3],decls:54,vars:46,consts:[["tableMaster",""],["deleteModal",""],["AssignOrderModal",""],["SureOrderRollBackModal",""],["orderModel",""],["OrderTimeLineModel",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","10%"],["pSortableColumn","creationUser","translate","",2,"width","8%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","8%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","6%"],[2,"width","15%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],["class","badge bg-danger-subtle text-danger mx-1","translate","orderManagement.order.noMap",4,"ngIf"],["target","_blank","class","badge bg-success-subtle text-success mx-1","translate","orderManagement.order.viewMap",3,"href",4,"ngIf"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["tooltipPosition","top","class","mt-2  btn btn-sm btn-primary edit-list",3,"pTooltip","click",4,"hasPermission"],["class","mt-2 btn btn-sm mx-1 btn-warning edit-list","tooltipPosition","top",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","mt-2 btn btn-sm btn-soft-info edit-list  ",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","mt-2 btn btn-sm btn-soft-danger remove-list  mx-1",3,"pTooltip","click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","orderManagement.order.noMap",1,"badge","bg-danger-subtle","text-danger","mx-1"],["target","_blank","translate","orderManagement.order.viewMap",1,"badge","bg-success-subtle","text-success","mx-1",3,"href"],[1,"ri-map-pin-line"],["tooltipPosition","top",1,"mt-2","btn","btn-sm","btn-primary","edit-list",3,"click","pTooltip"],[1,"ri-check-fill","align-bottom"],["tooltipPosition","top",1,"mt-2","btn","btn-sm","mx-1","btn-warning","edit-list",3,"click","pTooltip"],[1,"ri-arrow-go-back-fill","align-bottom"],["tooltipPosition","top",1,"mt-2","btn","btn-sm","btn-soft-info","edit-list",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom"],["tooltipPosition","top",1,"mt-2","btn","btn-sm","btn-soft-danger","remove-list","mx-1",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"mb-0","mt-2","text-center"],[1,"ri-alert-fill","text-info","me-2",2,"font-size","1.3rem"],[1,"mt-5","row"],[1,"col-6"],["translate",""],[1,"form-control"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"input",17),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",16),e.k0s()(),e.j41(16,"div",13)(17,"div",14)(18,"input",15),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",16),e.k0s()(),e.j41(21,"div",13)(22,"div",14)(23,"ng-select",18),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",13)(26,"div",14)(27,"ng-select",19),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",13)(30,"div",14)(31,"ng-select",20),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",21)(34,"input",22),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",23)(37,"div",24)(38,"p-table",25,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,Wt,26,0,"ng-template",26)(41,dn,37,27,"ng-template",27),e.k0s()(),e.DNE(42,cn,2,0,"div",28)(43,mn,6,8,"div",29),e.k0s()()()(),e.DNE(44,pn,1,1,"ng-template",null,1,e.C5r)(46,_n,37,12,"ng-template",null,2,e.C5r)(48,hn,15,3,"ng-template",null,3,e.C5r)(50,un,1,3,"ng-template",null,4,e.C5r)(52,bn,1,1,"ng-template",null,5,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","sureOrder"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,W.m,ce,K,g.vh,c.D9],encapsulation:2})}}return r})();var ne=m(45312),xe=m(63022),Me=m(96402),me=m(99902);const vn=["FileInput"],Cn=()=>["assigned.changeStatus"],jn=()=>["assigned.undoAssign"],Fn=()=>["assigned.finishedOrder"];function xn(r,l){1&r&&(e.j41(0,"tr",35)(1,"th",36),e.nrm(2,"i",37),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",38),e.nrm(5,"i",37),e.EFF(6," orderManagement.order.cityName "),e.k0s(),e.j41(7,"th",39),e.nrm(8,"i",37),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",40),e.EFF(11," orderManagement.order.assignTo "),e.k0s(),e.j41(12,"th",41),e.EFF(13," orderManagement.order.workTimes "),e.k0s(),e.j41(14,"th",42),e.nrm(15,"i",37),e.EFF(16," orderManagement.order.visitDate "),e.k0s(),e.j41(17,"th",43),e.EFF(18," orderManagement.order.services "),e.k0s(),e.j41(19,"th",44),e.nrm(20,"i",37),e.EFF(21," orderManagement.order.teamStatus "),e.k0s(),e.nrm(22,"th",45),e.k0s())}function Mn(r,l){1&r&&e.nrm(0,"span",63)}function Tn(r,l){if(1&r&&(e.j41(0,"span",64),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Sn(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",65),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function In(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",65),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function kn(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",65),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function yn(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",66),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openChangeStatusModal(n,o))}),e.nrm(1,"i",67)(2,"span",68),e.k0s()}}function Rn(r,l){if(1&r){const t=e.RV6();e.j41(0,"li")(1,"a",69),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(53);return e.Njj(a.OpenOrderTimeLineModel(n.orderCode,o,"md"))}),e.nrm(2,"i",70)(3,"span",71),e.k0s()()}}function En(r,l){if(1&r){const t=e.RV6();e.j41(0,"li",47),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(47);return a.GetOrderServiceAndPayment(n),e.Njj(a.openChangeStatusModal(n,o,"xl"))}),e.j41(1,"a",72),e.nrm(2,"i",73)(3,"span",74),e.k0s()()}}function Nn(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",46)(1,"td",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.DNE(6,Mn,1,0,"span",48)(7,Tn,2,1,"span",49),e.k0s(),e.j41(8,"td")(9,"span",50),e.EFF(10),e.k0s(),e.nrm(11,"br"),e.j41(12,"span",51),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(13),e.nrm(14,"i",52),e.k0s()(),e.j41(15,"td"),e.DNE(16,Sn,4,1,"ng-container",53),e.k0s(),e.j41(17,"td"),e.DNE(18,In,4,1,"ng-container",53),e.k0s(),e.j41(19,"td"),e.EFF(20),e.nI1(21,"date"),e.k0s(),e.j41(22,"td"),e.DNE(23,kn,4,1,"ng-container",53),e.k0s(),e.j41(24,"td")(25,"span"),e.EFF(26),e.nI1(27,"translate"),e.k0s()(),e.j41(28,"td")(29,"i",54),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(51);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.k0s(),e.DNE(30,yn,3,0,"button",55),e.j41(31,"div",56)(32,"div",57)(33,"button",58),e.nI1(34,"translate"),e.nrm(35,"i",59),e.k0s(),e.j41(36,"ul",60),e.DNE(37,Rn,4,0,"li",61)(38,En,4,0,"li",62),e.k0s()()()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI(" ",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.JRh(e.i5U(21,18,t.visitDate,"yyyy-MM-dd")),e.R7$(3),e.Y8G("ngForOf",i.getServices(t.services)),e.R7$(2),e.ZvI("fs-5 badge ",i.getTeamStatus(t.teamStatus)," bg-primary-subtle text-primary mx-1"),e.R7$(),e.JRh(e.bMT(27,21,"orderManagement.order."+t.teamStatusName)),e.R7$(4),e.Y8G("hasPermission",e.lJ4(25,Cn)),e.R7$(3),e.FS9("pTooltip",e.bMT(34,23,"general.actions")),e.R7$(4),e.Y8G("hasPermission",e.lJ4(26,jn)),e.R7$(),e.Y8G("hasPermission",e.lJ4(27,Fn))}}function Dn(r,l){1&r&&(e.j41(0,"div",75),e.EFF(1," general.table.noData "),e.k0s())}function On(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",76)(1,"div",77),e.nrm(2,"ngb-pagination-info",78),e.j41(3,"table-length",79),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",80)(5,"ngb-pagination",81),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function wn(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",90)(1,"label",99),e.EFF(2,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(3,"ng-select",100),e.nI1(4,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.cancelReasonCode,n)||(a.form.cancelReasonCode=n),e.Njj(n)}),e.k0s()()}if(2&r){const t=e.XpG(2);e.R7$(3),e.FS9("placeholder",e.bMT(4,4,"orderManagement.order.cancelReasonName")),e.Y8G("items",t.cancelReasons)("multiple",!1),e.R50("ngModel",t.form.cancelReasonCode)}}function Vn(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",82)(1,"div",83)(2,"h4",84),e.nrm(3,"span",85),e.k0s(),e.j41(4,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(5,"div",87),e.nrm(6,"ngx-ui-loader",88),e.j41(7,"form",89,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.changeStatus())}),e.j41(9,"div",12)(10,"div",90)(11,"label",91),e.EFF(12,"orderManagement.order.changeTeamStatus"),e.k0s(),e.j41(13,"ng-select",92),e.nI1(14,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.teamStatus,n)||(a.form.teamStatus=n),e.Njj(n)}),e.k0s()(),e.DNE(15,wn,5,6,"div",93),e.j41(16,"div",90)(17,"label",91),e.EFF(18,"orderManagement.order.teamStatusNotes"),e.k0s(),e.j41(19,"textarea",94),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.teamStatusNotes,n)||(a.form.teamStatusNotes=n),e.Njj(n)}),e.k0s()()(),e.j41(20,"div",95)(21,"button",96),e.nrm(22,"i",97)(23,"span",98),e.k0s()()()()()}if(2&r){const t=e.sdS(8),i=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,10,"orderManagement.order.changeTeamStatus")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.form.teamStatus),e.R7$(2),e.Y8G("ngIf",3==i.form.teamStatus),e.R7$(4),e.R50("ngModel",i.form.teamStatusNotes),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Gn(r,l){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.price," ")}}function Ln(r,l){if(1&r){const t=e.RV6();e.j41(0,"span",143)(1,"input",144),e.nI1(2,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.editPrice,n)||(a.editPrice=n),e.Njj(n)}),e.k0s(),e.j41(3,"button",145),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,a=e.XpG(2);return e.Njj(a.editEachPrice(n))}),e.nrm(4,"i",146),e.k0s(),e.j41(5,"button",147),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.isEditPrice=!1)}),e.nrm(6,"i",148),e.k0s()()}if(2&r){const t=e.XpG(3);e.R7$(),e.FS9("placeholder",e.bMT(2,2,"orderManagement.order.notes")),e.R50("ngModel",t.editPrice)}}function $n(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.DNE(4,Gn,2,1,"span",117)(5,Ln,7,4,"span",139),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"button",140),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.deleteService(n))}),e.nrm(10,"i",141),e.k0s(),e.j41(11,"button",112),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return a.isEditPrice=!0,e.Njj(a.editPrice=a.finishOrderForm.invoiceService[n].price)}),e.nrm(12,"i",142),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(t.service),e.R7$(2),e.Y8G("ngIf",!i.isEditPrice),e.R7$(),e.Y8G("ngIf",i.isEditPrice),e.R7$(2),e.JRh(t.notes)}}function Bn(r,l){1&r&&(e.j41(0,"tr")(1,"td",149),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function An(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",150)(1,"i",151),e.bIt("click",function(){const n=e.eBV(t),a=n.$implicit,o=n.index,s=e.XpG(2);return e.Njj(s.removeImage(a.id,o))}),e.k0s(),e.j41(2,"div",152),e.nrm(3,"img",153),e.k0s()()}if(2&r){const t=l.$implicit,i=e.XpG(2);e.R7$(3),e.Y8G("src",0==t.id?t.path:i.serverPath+t.path,e.B4B)}}function Xn(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",83)(1,"h4",84),e.nrm(2,"span",101),e.k0s(),e.j41(3,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",87)(5,"form",null,6),e.nrm(7,"ngx-ui-loader",88),e.j41(8,"div",102)(9,"div",103)(10,"div",35)(11,"div",104)(12,"div",105)(13,"label",106),e.EFF(14,"orderManagement.order.services"),e.k0s()(),e.j41(15,"div",107)(16,"ng-select",108,7),e.nI1(18,"translate"),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.setService(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.serviceCode,n)||(a.finishOrderForm.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",107)(20,"div",109)(21,"input",110,8),e.nI1(23,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.note,n)||(a.finishOrderForm.note=n),e.Njj(n)}),e.k0s()()(),e.j41(24,"div",111)(25,"button",112),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(26,"i",113),e.k0s()(),e.j41(27,"div",114)(28,"table",115)(29,"thead")(30,"tr")(31,"th",116),e.EFF(32," orderManagement.order.service "),e.k0s(),e.j41(33,"th",116),e.EFF(34," orderManagement.order.price "),e.k0s(),e.j41(35,"th",116),e.EFF(36," orderManagement.order.notes "),e.k0s(),e.j41(37,"th",116),e.EFF(38," orderManagement.order.actions "),e.k0s()()(),e.j41(39,"tbody"),e.DNE(40,$n,13,4,"tr",53)(41,Bn,4,3,"tr",117),e.k0s()()()(),e.j41(42,"div",118)(43,"div",119)(44,"div",120),e.nrm(45,"i",121),e.j41(46,"strong",116),e.EFF(47,"orderManagement.order.assignedOrders.usedShow "),e.k0s(),e.EFF(48),e.k0s(),e.nrm(49,"div",122),e.k0s()(),e.j41(50,"div",118)(51,"div",123)(52,"label",124),e.EFF(53,"orderManagement.order.assignedOrders.total"),e.k0s(),e.j41(54,"div",125),e.EFF(55),e.k0s()(),e.j41(56,"div",123)(57,"label",124),e.EFF(58,"orderManagement.order.assignedOrders.extraDiscount"),e.k0s(),e.j41(59,"div",125),e.EFF(60),e.k0s()(),e.j41(61,"div",123)(62,"label",124),e.EFF(63,"orderManagement.order.assignedOrders.tax"),e.k0s(),e.j41(64,"div",125),e.EFF(65),e.k0s()(),e.j41(66,"div",123)(67,"label",124),e.EFF(68,"orderManagement.order.assignedOrders.promotionDiscount"),e.k0s(),e.j41(69,"div",125),e.EFF(70),e.k0s()(),e.j41(71,"div",123)(72,"label",124),e.EFF(73,"orderManagement.order.assignedOrders.net"),e.k0s(),e.j41(74,"div",125),e.EFF(75),e.k0s()(),e.j41(76,"div",123)(77,"label",124),e.EFF(78,"orderManagement.order.assignedOrders.paid"),e.k0s(),e.j41(79,"div",125),e.EFF(80),e.k0s()(),e.j41(81,"div",123)(82,"label",126),e.EFF(83,"orderManagement.order.assignedOrders.paymentMethod"),e.k0s(),e.j41(84,"div",127)(85,"ng-select",128,9),e.nI1(87,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.paymentTypeCode,n)||(a.finishOrderForm.paymentTypeCode=n),e.Njj(n)}),e.k0s()()(),e.j41(88,"div",123)(89,"label",124),e.EFF(90,"orderManagement.order.assignedOrders.remain"),e.k0s(),e.j41(91,"div",125),e.EFF(92),e.k0s()(),e.j41(93,"div",129)(94,"label",124),e.EFF(95,"orderManagement.order.assignedOrders.notes"),e.k0s(),e.j41(96,"textarea",130,10),e.nI1(98,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.notes,n)||(a.finishOrderForm.notes=n),e.Njj(n)}),e.EFF(99,"                                "),e.k0s()(),e.j41(100,"div",131)(101,"label",124),e.EFF(102,"orderManagement.order.assignedOrders.attachments"),e.k0s(),e.j41(103,"div",127)(104,"button",132),e.bIt("click",function(){e.eBV(t);const n=e.sdS(109);return e.Njj(n.click())}),e.EFF(105," orderManagement.order.assignedOrders.select "),e.k0s(),e.j41(106,"div",133),e.DNE(107,An,4,1,"div",134),e.k0s()(),e.j41(108,"input",135,11),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileChanged(n))}),e.k0s()()(),e.j41(110,"div",136)(111,"button",137),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.finishOrder())}),e.k0s(),e.j41(112,"button",138),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()()}if(2&r){const t=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.services")),e.Y8G("items",t.services)("multiple",!1),e.R50("ngModel",t.finishOrderForm.serviceCode),e.R7$(5),e.FS9("placeholder",e.bMT(23,29,"orderManagement.order.notes")),e.R50("ngModel",t.finishOrderForm.note),e.R7$(19),e.Y8G("ngForOf",t.finishOrderForm.invoiceService),e.R7$(),e.Y8G("ngIf",0==t.finishOrderForm.invoiceService.length),e.R7$(7),e.SpI(" - ",t.finishOrderForm.usedShow||"--"," "),e.R7$(7),e.SpI(" ",t.finishOrderForm.total||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.discountAdd||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.tax||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.promotionDiscount||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.net||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.paid||"0"," "),e.R7$(5),e.FS9("placeholder",e.bMT(87,31,"orderManagement.order.assignedOrders.paymentMethod")),e.Y8G("items",t.paymentTypes)("multiple",!1),e.R50("ngModel",t.finishOrderForm.paymentTypeCode),e.R7$(7),e.SpI(" ",t.finishOrderForm.remain||"--"," "),e.R7$(4),e.FS9("placeholder",e.bMT(98,33,"orderManagement.order.notes")),e.R50("ngModel",t.finishOrderForm.notes),e.R7$(11),e.Y8G("ngForOf",t.images),e.R7$(4),e.Y8G("disabled",!t.finishOrderForm.paymentTypeCode)}}function Un(r,l){if(1&r&&e.nrm(0,"order-operation",154),2&r){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.orderSelected)}}function Yn(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",155),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function Pn(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",89,6),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.RollBack())}),e.nrm(2,"ngx-ui-loader",88),e.j41(3,"div",102)(4,"div",156)(5,"button",157),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",87)(7,"div",158),e.nrm(8,"lord-icon",159),e.j41(9,"div",160),e.nrm(10,"h3",161)(11,"p",162),e.k0s()(),e.j41(12,"div",163),e.nrm(13,"button",164),e.j41(14,"button",165),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let zn=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P,le,Ce,je){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.invoicesService=x,this._servicesService=M,this.excelService=S,this._formDataService=I,this.cityService=y,this.districtService=P,this.channelService=le,this.cancelReasonService=Ce,this.router=je,this.title="orderManagement.order.urgentOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.images=[],this.employees=[],this.searchForm={},this.finishOrderForm={invoiceService:[],invoiceAttachImages:[],usedShow:"",promotionDiscount:""},this.isResolveList=!0,this.editPrice=0,this.isEditPrice=!1,this.formPassword={},this.OrderStatusEnum=Z,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.serverPath=ne.c.mediaUrl,this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.services=[],this.statusList=[{id:0,name:"requestNoStart"},{id:1,name:"callLoggedBeforeArrival"},{id:2,name:"noAnswerStatusUpdated"},{id:3,name:"requestCancellation"},{id:4,name:"appointmentPostponed"},{id:5,name:"enRouteToCustomer"},{id:6,name:"arrivedAtLocation"},{id:7,name:"requestFinished"}],this.cancelReasons=[],this.GetCities(),this.GetServicesDropDown(),this.GetPaymentTypesDropDown(),this.GetChannels(),this.translateStatus(),this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}translateStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("orderManagement.order."+t.name)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.finishOrderForm.districtCode=null,this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader("assignLoader"),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("assignLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Assigned,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("assignLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("assignLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,Services:this.getServices(i.services),Status:this.translateService.instant(`orderManagement.order.${i.teamStatusName}`)})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getTeamStatus(t){return 0==t||1==t||2==t?"bg-warning-subtle text-warning":3==t||4==t?"bg-danger-subtle text-danger":5==t||6==t?"bg-info-subtle text-info":"bg-success-subtle text-success"}openChangeStatusModal(t,i,n="md"){this.form={},this.form.teamStatus=t.teamStatus,this.finishOrderForm.orderCode=t.orderCode,this.orderSelected=t.orderCode,this.modalService.open(i,{centered:!0,size:n})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.ChangeTeamStatus({OrderCode:this.orderSelected,teamStatus:this.form.teamStatus,cancelReasonCode:this.form.cancelReasonCode,teamStatusNotes:this.form.teamStatusNotes}).pipe((0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}finishOrder(){this.ngxLoader.startLoader(u.Fq);let t=this._formDataService.formatFormData(this.finishOrderForm);this.invoicesService.SaveInvoice(t).subscribe(i=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll()},i=>{console.log(i),this.ngxLoader.stopLoader(u.Fq)})}GetServicesDropDown(){this._servicesService.getDropDown().subscribe(t=>{this.services=t.data},t=>{console.log(t)})}GetOrderServiceAndPayment(t){this.finishOrderForm={},this.finishOrderDetails=t,this.finishOrderForm={...this.finishOrderForm,orderCode:t.orderCode,discountAdd:t.discountAmountAdd},this.invoicesService.GetOrderServiceAndPayment(t.orderCode).subscribe(n=>{this.finishOrderForm.invoiceService=[],this.OrderServiceAndPayment=n.data,n.data.forEach(a=>{this.finishOrderForm.invoiceService.push({serviceCode:a.serviceCode,service:a.serviceName,notes:a.notes,price:a.price,paidValue:a.paidValue})}),this.calculatePrices()},n=>{console.log(n)})}GetPaymentTypesDropDown(){this.baseService.GetOrderLookUp().subscribe(t=>{this.paymentTypes=t.data.paymentTypes},t=>{console.log(t)})}setService(t){console.log(t),this.finishOrderForm.service=t.name,this.finishOrderForm.price=t.price}addService(){this.finishOrderForm.invoiceService.push({service:this.finishOrderForm.service,serviceCode:this.finishOrderForm.serviceCode,price:this.finishOrderForm.price,notes:this.finishOrderForm.note,paidValue:0}),this.calculatePrices()}calculatePrices(){const t=this.finishOrderForm.discountAdd||0;let i=0,n=0;this.finishOrderForm.invoiceService.forEach(v=>{i+=+v.price,n+=+v.paidValue});let a=0,o=0,s=0;a=+(.15*(i-t)).toFixed(3),o=+(i-t+a).toFixed(3),s=+(o-n).toFixed(3),this.finishOrderForm={...this.finishOrderForm,net:o,tax:a,total:i,remain:s,paid:n}}editEachPrice(t){this.finishOrderForm.invoiceService[t].price=this.editPrice,this.isEditPrice=!1,this.calculatePrices()}deleteService(t){console.log(t),this.finishOrderForm.invoiceService.splice(t,1),this.calculatePrices()}onFileChanged(t){if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let n=0;n<i;n++){let a=new FileReader;this.finishOrderForm.invoiceAttachImages.push({attachImage:t.target.files.item(n),type:"file"}),console.log(this.finishOrderForm.invoiceAttachImages),a.onload=o=>{this.images.push({id:0,path:o.target.result,completePath:o.target.result})},a.readAsDataURL(t.target.files[n])}}}removeImage(t,i){this.finishOrderForm.invoiceAttachImages.splice(i,1),this.images.splice(i,1)}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}RollBack(){this.ngxLoader.startLoader(u.Fq),this.baseService.RemoveAssign(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(xe.U),e.rXU(Me.N),e.rXU(A.V),e.rXU(me.Q),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(ie.e),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-assigned-orders"]],viewQuery:function(i,n){if(1&i&&e.GBs(vn,5),2&i){let a;e.mGM(a=e.lsd())&&(n.FileInput=a.first)}},features:[e.Vt3],decls:54,vars:46,consts:[["tableMaster",""],["changeStatusModal",""],["finishOrderModal",""],["orderModel",""],["OrderTimeLineModel",""],["RollBackModal",""],["formEntity","ngForm"],["serviceCode","ngModel"],["note","ngModel"],["paymentTypeCode","ngModel"],["notes","ngModel"],["FileInput",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","10%"],["translate","",2,"width","10%"],["translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","12%"],["pSortableColumn","teamStatus","translate","",2,"width","10%"],[2,"width","20%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["type","button","class","btn btn-sm px-4 btn-primary   btn-label waves-effect waves-light rounded-pill mx-1",3,"click",4,"hasPermission"],[1,"d-inline"],[1,"dropdown-custom"],["tooltipPosition","top","type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none",3,"pTooltip"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[4,"hasPermission"],[3,"click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["type","button",1,"btn","btn-sm","px-4","btn-primary","btn-label","waves-effect","waves-light","rounded-pill","mx-1",3,"click"],[1,"ri-swap-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.changeTeamStatus"],["href","javascript:void(0);",1,"dropdown-item",3,"click"],[1,"ri-exchange-box-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.rollBackAssign"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-checkbox-circle-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.finishOrder"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.changeTeamStatus",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","teamStatus","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["rows","2","InputTirmFilter","","name","teamStatusNotes","type","text","id","teamStatusNotes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["for","cancelReasonName","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["translate","orderManagement.order.assignedOrders.finishOrder",1,"fw-bold","fs-4"],[1,"modal-content"],[1,"modal-body","p-1"],[1,"mt-2","row"],[1,"col-lg-2","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"col-12","col-lg-4","mb-2"],["name","serviceCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","placeholder","ngModel"],[1,"input-group"],["InputTirmFilter","","name","note","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"col-lg-2","mb-2"],[1,"btn","btn-success","py-1","px-2",3,"click"],[1,"ri-add-fill",2,"font-size","1.2rem"],[1,"col-12","text-center","mt-2"],[1,"table","table-bordered","table-service"],["translate",""],[4,"ngIf"],[1,"pt-2","row"],[1,"col-12","mb-3"],["role","alert",1,"alert","alert-success","alert-dismissible","material-shadow","alert-label-icon","rounded-label","fade","show"],[1,"ri-check-double-line","label-icon"],[1,"form-control","custom-form-textArea"],[1,"col-12","col-lg-6","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"form-control","w-75","custom-form-input"],["translate","",1,"fw-bold","form-label","required","w-25"],[1,"w-75"],["name","paymentTypeCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-12","col-lg-12","mb-3","d-flex"],["InputTirmFilter","","name","note","rows","2",1,"form-control","fs-6","w-75",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-lg-12","mt-3","d-flex"],["translate","",1,"btn","btn-warning","px-5",3,"click"],[1,"my-3","d-flex"],["class","avatar-lg mx-2 position-relative",4,"ngFor","ngForOf"],["multiple","","value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","gap-2","justify-content-end","my-0"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-success",3,"click","disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-danger",3,"click"],["class","d-flex",4,"ngIf"],[1,"btn","btn-danger","py-1","px-2","me-1",3,"click"],[1,"ri-delete-bin-3-fill",2,"font-size","1.2rem"],[1,"ri-edit-2-fill",2,"font-size","1.2rem"],[1,"d-flex"],["InputTirmFilter","","name","editPrice","type","text","id","editPrice",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-sm","btn-success","py-1","px-2","mx-1",3,"click"],[1,"ri-check-double-fill",2,"font-size","1.2rem"],[1,"btn","btn-sm","btn-danger","py-1","px-2",3,"click"],[1,"ri-close-fill",2,"font-size","1.2rem"],["colspan","4"],[1,"avatar-lg","mx-2","position-relative"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-md","h-auto",3,"src"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",12)(1,"div",13)(2,"div",14),e.nrm(3,"ngx-ui-loader",15),e.j41(4,"base-filter",16),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,17),e.j41(6,"div",18)(7,"div",19)(8,"input",20),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",21),e.k0s()(),e.j41(11,"div",18)(12,"div",19)(13,"input",22),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",21),e.k0s()(),e.j41(16,"div",18)(17,"div",19)(18,"input",20),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",21),e.k0s()(),e.j41(21,"div",18)(22,"div",19)(23,"ng-select",23),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",18)(26,"div",19)(27,"ng-select",24),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",18)(30,"div",19)(31,"ng-select",25),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",26)(34,"input",27),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",28)(37,"div",29)(38,"p-table",30,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,xn,23,0,"ng-template",31)(41,Nn,39,28,"ng-template",32),e.k0s()(),e.DNE(42,Dn,2,0,"div",33)(43,On,6,8,"div",34),e.k0s()()()(),e.DNE(44,Vn,24,12,"ng-template",null,1,e.C5r)(46,Xn,113,35,"ng-template",null,2,e.C5r)(48,Un,1,3,"ng-template",null,3,e.C5r)(50,Yn,1,1,"ng-template",null,4,e.C5r)(52,Pn,15,3,"ng-template",null,5,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","assignLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,W.m,K,g.vh,c.D9],encapsulation:2})}}return r})();var Hn=m(75312);const Jn=()=>["completed.print"],Qn=()=>["completed.reOpenOrder"];function qn(r,l){1&r&&(e.j41(0,"tr",28)(1,"th",29),e.nrm(2,"i",30),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",31),e.nrm(5,"i",30),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",32),e.nrm(8,"i",30),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",33),e.nrm(11,"i",30),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",34),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",34),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",35),e.nrm(18,"i",30),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",36),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",37),e.EFF(23," orderManagement.order.paymentTypeName "),e.k0s(),e.j41(24,"th",34),e.EFF(25," orderManagement.order.finishUser "),e.k0s(),e.j41(26,"th",37),e.EFF(27," orderManagement.order.cost "),e.k0s(),e.j41(28,"th",37),e.EFF(29," orderManagement.order.VAT "),e.k0s(),e.j41(30,"th",37),e.EFF(31," orderManagement.order.total "),e.k0s(),e.nrm(32,"th",38),e.k0s())}function Wn(r,l){1&r&&e.nrm(0,"span",55)}function Kn(r,l){if(1&r&&(e.j41(0,"span",41),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Zn(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function ei(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function ti(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",56),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function ni(r,l){if(1&r&&(e.nrm(0,"i",57),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",58),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",59),e.EFF(9)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function ii(r,l){if(1&r){const t=e.RV6();e.j41(0,"li",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG();return e.Njj(a.openInNewTab(n.orderCode))}),e.j41(1,"span",60),e.nrm(2,"i",61)(3,"span",62),e.k0s()()}}function ri(r,l){if(1&r){const t=e.RV6();e.j41(0,"li",40),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(43);return e.Njj(a.openModal(n.orderCode,o))}),e.j41(1,"span",60),e.nrm(2,"i",63)(3,"span",64),e.k0s()()}}function ai(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",39)(1,"td",40),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.j41(7,"span",41),e.EFF(8),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.DNE(11,Wn,1,0,"span",42)(12,Kn,2,1,"span",43),e.k0s(),e.j41(13,"td")(14,"span",44),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(18),e.nrm(19,"i",46),e.k0s()(),e.j41(20,"td"),e.DNE(21,Zn,4,1,"ng-container",47),e.k0s(),e.j41(22,"td"),e.DNE(23,ei,4,1,"ng-container",47),e.k0s(),e.j41(24,"td"),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"td"),e.DNE(28,ti,4,1,"ng-container",47),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s(),e.j41(33,"td"),e.EFF(34),e.k0s(),e.j41(35,"td"),e.EFF(36),e.k0s(),e.j41(37,"td")(38,"span",48),e.EFF(39),e.k0s()(),e.j41(40,"td"),e.DNE(41,ni,10,9,"ng-template",null,4,e.C5r),e.j41(43,"span",49)(44,"div",50)(45,"button",51),e.nrm(46,"i",52),e.k0s(),e.j41(47,"ul",53),e.DNE(48,ii,4,0,"li",54)(49,ri,4,0,"li",54),e.k0s()()()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(6,19,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(26,22,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngForOf",i.getServices(t.services)),e.R7$(2),e.SpI(" ",t.paymentTypeName,""),e.R7$(2),e.SpI(" ",t.finishUser,""),e.R7$(2),e.SpI(" ",i.getCost(t.totalTaxNet,0)," "),e.R7$(2),e.SpI(" ",i.getCost(t.totalTaxNet,1)," "),e.R7$(3),e.JRh(i.getCost(t.totalTaxNet,2)),e.R7$(9),e.Y8G("hasPermission",e.lJ4(25,Jn)),e.R7$(),e.Y8G("hasPermission",e.lJ4(26,Qn))}}function si(r,l){1&r&&(e.j41(0,"div",65),e.EFF(1," general.table.noData "),e.k0s())}function oi(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",66)(1,"div",67),e.nrm(2,"ngb-pagination-info",68),e.j41(3,"table-length",69),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",70)(5,"ngb-pagination",71),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function li(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",72),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function di(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",73)(1,"div",74)(2,"h4",75)(3,"span",76),e.EFF(4,"orderManagement.order.completeOrders.title"),e.k0s()(),e.j41(5,"button",77),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",78),e.nrm(7,"ngx-ui-loader",79),e.j41(8,"form",80,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onReopenOrder())}),e.j41(10,"div",6)(11,"div",81)(12,"label",82),e.EFF(13,"orderManagement.order.reopenOrder"),e.k0s(),e.j41(14,"ng-select",83),e.nI1(15,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.returnReasonCode,n)||(a.form.returnReasonCode=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",81)(17,"label",82),e.EFF(18,"orderManagement.order.reopenNotes"),e.k0s(),e.j41(19,"textarea",84),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.reopenNotes,n)||(a.form.reopenNotes=n),e.Njj(n)}),e.k0s()()(),e.j41(20,"div",85)(21,"button",86),e.nrm(22,"i",87)(23,"span",88),e.k0s()()()()()}if(2&r){const t=e.sdS(9),i=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(15,9,"orderManagement.order.returnReason")),e.Y8G("items",i.returnReasons)("multiple",!1),e.R50("ngModel",i.form.returnReasonCode),e.R7$(5),e.R50("ngModel",i.form.reopenNotes),e.R7$(2),e.Y8G("disabled",!t.valid)}}function ci(r,l){if(1&r&&e.nrm(0,"order-operation",89),2&r){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.orderSelected)}}let mi=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.returnReasonService=y,this.router=P,this.title="orderManagement.order.completeOrders.title",this.titleOperation="orderManagement.order.urgentOrders.titleOperation",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeGroups=[],this.formPassword={},this.OrderStatusEnum=Z,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.returnReasons=[],this.GetCities(),this.GetReturnReasons()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetReturnReasons(){this.returnReasonService.getDropDown().subscribe(t=>{this.returnReasons=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}openInNewTab(t){this.router.navigateByUrl("/orders-invoices",{state:{id:t}})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader("completeLoader"),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("completeLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Finished,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("completeLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("completeLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"Creation user":i.creationUser,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Services:i.services,Payment:i.paymentTypeName,"Finished By":i.finishUser,Cost:this.getCost(i.totalTaxNet,0),Vat:this.getCost(i.totalTaxNet,1),Total:this.getCost(i.totalTaxNet,2)})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.form={},this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getCost(t,i){return t.split("#")[i]}onReopenOrder(){let t={returnReasonCode:this.form.returnReasonCode,orderId:this.orderSelected};this.ngxLoader.startLoader(this.operationLoader),this.baseService.ReopenOrder(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{this.ngxLoader.stopLoader(this.operationLoader),i.success?(this.alertService.success(),this.modalService.dismissAll(),this.loadentities()):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}getServices(t){return t.split("#")}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(Hn.Y),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-complete-orders"]],features:[e.Vt3],decls:46,vars:40,consts:[["tableMaster",""],["deleteModal",""],["reopenOrder",""],["orderModel",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","10%"],["translate","",2,"width","5%"],[2,"width","15%"],[1,"fs-5"],[3,"click"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"badge","bg-primary-subtle","text-primary","fs-5"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],[1,"dropdown-item"],[1,"ri-printer-line","align-bottom","me-2","text-muted"],["translate","orderManagement.order.printPill"],[1,"ri-exchange-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.reopenOrder"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["rows","2","InputTirmFilter","","name","reopenNotes","type","text","id","reopenNotes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[3,"isOrderEdit","isInner","orderCode"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",19)(30,"input",20),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",21)(33,"div",22)(34,"p-table",23,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(36,qn,33,0,"ng-template",24)(37,ai,50,27,"ng-template",25),e.k0s()(),e.DNE(38,si,2,0,"div",26)(39,oi,6,8,"div",27),e.k0s()()()(),e.DNE(40,li,1,0,"ng-template",null,1,e.C5r)(42,di,24,11,"ng-template",null,2,e.C5r)(44,ci,1,3,"ng-template",null,3,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","completeLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,28,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,30,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,32,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,34,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,36,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,38,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,g.vh,c.D9],encapsulation:2})}}return r})();function pi(r,l){1&r&&(e.j41(0,"tr",26)(1,"th",27),e.nrm(2,"i",28),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",29),e.nrm(5,"i",28),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",30),e.nrm(8,"i",28),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",31),e.nrm(11,"i",28),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",32),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",32),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",33),e.nrm(18,"i",28),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",34),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",35),e.EFF(23," orderManagement.order.cancelReasonName "),e.k0s(),e.nrm(24,"th",36),e.k0s())}function gi(r,l){1&r&&e.nrm(0,"span",47)}function _i(r,l){if(1&r&&(e.j41(0,"span",38),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function hi(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",48),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function ui(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",48),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function bi(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",48),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function fi(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.nI1(5,"date"),e.j41(6,"span",38),e.EFF(7),e.k0s()(),e.j41(8,"td"),e.EFF(9),e.DNE(10,gi,1,0,"span",39)(11,_i,2,1,"span",40),e.k0s(),e.j41(12,"td")(13,"span",41),e.EFF(14),e.k0s(),e.nrm(15,"br"),e.j41(16,"span",42),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(17),e.nrm(18,"i",43),e.k0s()(),e.j41(19,"td"),e.DNE(20,hi,4,1,"ng-container",44),e.k0s(),e.j41(21,"td"),e.DNE(22,ui,4,1,"ng-container",44),e.k0s(),e.j41(23,"td"),e.EFF(24),e.nI1(25,"date"),e.k0s(),e.j41(26,"td"),e.DNE(27,bi,4,1,"ng-container",44),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s(),e.j41(30,"td")(31,"div",45)(32,"i",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.k0s()()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(5,13,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(25,16,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.Y8G("ngForOf",i.getServices(t.services)),e.R7$(2),e.SpI(" ",t.cancelReasonName,"")}}function vi(r,l){1&r&&(e.j41(0,"div",49),e.EFF(1," general.table.noData "),e.k0s())}function Ci(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",50)(1,"div",51),e.nrm(2,"ngb-pagination-info",52),e.j41(3,"table-length",53),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",54)(5,"ngb-pagination",55),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ji(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",56),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Fi(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",57),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let xi=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.title="orderManagement.order.refundable",this.titleOperation="orderManagement.order.refundable",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.formPassword={},this.OrderStatusEnum=Z,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader("cancalLoader"),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("cancalLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Canceled,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("cancalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("cancalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"Creation user":i.creationUser,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--",Status:this.translateService.instant(this.getTrnslate(i)),"Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Services:i.services})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-refundable-orders"]],features:[e.Vt3],decls:48,vars:46,consts:[["tableMaster",""],["deleteModal",""],["OrderTimeLineModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","10%"],["translate","",2,"width","10%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","20%"],["translate","",2,"width","15%"],[2,"width","10%"],[1,"fs-5"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",3)(1,"div",4)(2,"div",5),e.nrm(3,"ngx-ui-loader",6),e.j41(4,"base-filter",7),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,8),e.j41(6,"div",9)(7,"div",10)(8,"input",11),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",12),e.k0s()(),e.j41(11,"div",9)(12,"div",10)(13,"input",13),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",12),e.k0s()(),e.j41(16,"div",9)(17,"div",10)(18,"input",11),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",12),e.k0s()(),e.j41(21,"div",9)(22,"div",10)(23,"ng-select",14),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",9)(26,"div",10)(27,"ng-select",15),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",9)(30,"div",10)(31,"ng-select",16),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",17)(34,"input",18),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",19)(37,"div",20)(38,"p-table",21,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,pi,25,0,"ng-template",22)(41,fi,33,19,"ng-template",23),e.k0s()(),e.DNE(42,vi,2,0,"div",24)(43,Ci,6,8,"div",25),e.k0s()()()(),e.DNE(44,ji,1,0,"ng-template",null,1,e.C5r)(46,Fi,1,1,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","cancalLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.me,d.Q0,d.BC,d.vS,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,K,g.vh,c.D9],encapsulation:2})}}return r})();const Mi=()=>["reopen.assignTeam"],Ti=()=>["reopen.cancel"];function Si(r,l){1&r&&(e.j41(0,"tr",27)(1,"th",28),e.nrm(2,"i",29),e.EFF(3," orderManagement.order.orderCode "),e.k0s(),e.j41(4,"th",30),e.nrm(5,"i",29),e.EFF(6," orderManagement.order.creation "),e.k0s(),e.j41(7,"th",31),e.nrm(8,"i",29),e.EFF(9," orderManagement.order.cityName "),e.k0s(),e.j41(10,"th",32),e.nrm(11,"i",29),e.EFF(12," orderManagement.order.agentName "),e.k0s(),e.j41(13,"th",33),e.EFF(14," orderManagement.order.assignTo "),e.k0s(),e.j41(15,"th",33),e.EFF(16," orderManagement.order.workTimes "),e.k0s(),e.j41(17,"th",34),e.nrm(18,"i",29),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",35),e.EFF(21," orderManagement.order.services "),e.k0s(),e.j41(22,"th",35),e.EFF(23," orderManagement.order.returnReasonName "),e.k0s(),e.nrm(24,"th",36),e.k0s())}function Ii(r,l){1&r&&e.nrm(0,"span",50)}function ki(r,l){if(1&r&&(e.j41(0,"span",39),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function yi(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",51),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Ri(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",51),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Ei(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",52),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openEditOrderModal(n.orderCode,o,"xxl"))}),e.nrm(2,"i",53),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.reAssign"))}function Ni(r,l){if(1&r){const t=e.RV6();e.j41(0,"button",54),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(45);return e.Njj(a.openModal(n.orderCode,o))}),e.nrm(2,"i",55),e.k0s()}2&r&&e.FS9("pTooltip",e.bMT(1,1,"orderManagement.order.cancelOrder"))}function Di(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",37)(1,"td",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openModal(n.orderCode,o,"xxl"))}),e.j41(2,"bdi"),e.EFF(3),e.k0s()(),e.j41(4,"td"),e.EFF(5),e.nI1(6,"date"),e.j41(7,"span",39),e.EFF(8),e.k0s()(),e.j41(9,"td"),e.EFF(10),e.DNE(11,Ii,1,0,"span",40)(12,ki,2,1,"span",41),e.k0s(),e.j41(13,"td")(14,"span",42),e.EFF(15),e.k0s(),e.nrm(16,"br"),e.j41(17,"span",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(18),e.nrm(19,"i",44),e.k0s()(),e.j41(20,"td"),e.DNE(21,yi,4,1,"ng-container",45),e.k0s(),e.j41(22,"td"),e.DNE(23,Ri,4,1,"ng-container",45),e.k0s(),e.j41(24,"td"),e.EFF(25),e.nI1(26,"date"),e.k0s(),e.j41(27,"td"),e.EFF(28),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td")(32,"div",46)(33,"i",47),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(49);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.k0s(),e.DNE(34,Ei,3,3,"button",48)(35,Ni,3,3,"button",49),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(3),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.SpI("",e.i5U(6,15,t.createdDate,"yyyy-MM-dd")," "),e.R7$(3),e.SpI("",t.creationUser," "),e.R7$(2),e.SpI("",t.cityName," "),e.R7$(),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(3),e.SpI("",t.agentName," "),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.SpI(" ",e.i5U(26,18,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.services,""),e.R7$(2),e.SpI(" ",t.returnReasonName,""),e.R7$(4),e.Y8G("hasPermission",e.lJ4(21,Mi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(22,Ti))}}function Oi(r,l){1&r&&(e.j41(0,"div",56),e.EFF(1," general.table.noData "),e.k0s())}function wi(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",57)(1,"div",58),e.nrm(2,"ngb-pagination-info",59),e.j41(3,"table-length",60),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",61)(5,"ngb-pagination",62),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Vi(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-order-model",63),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Gi(r,l){if(1&r&&e.nrm(0,"order-operation",64),2&r){const t=e.XpG();e.Y8G("isReopen",!0)("isOrderEdit",!0)("isInner",!0)("orderCode",t.orderSelected)}}function Li(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",65),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}let $i=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.excelService=x,this.cityService=M,this.districtService=S,this.channelService=I,this.router=y,this.title="orderManagement.order.reopenTitle",this.titleOperation="orderManagement.order.reopenTitle",this.language=localStorage.getItem("language"),this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.formPassword={},this.OrderStatusEnum=Z,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.isOrderEdit=!0,this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader("reopenLoader"),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("reopenLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Reopened,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("reopenLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("reopenLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"Created Date":i.createdDate,"Creation user":i.creationUser,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,"Visit Date":i.visitDate,Services:i.services,Reason:i.returnReasonName})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}openEditOrderModal(t,i,n="md"){this.form={},this.isOrderEdit=!0,this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["reopen-order"]],features:[e.Vt3],decls:50,vars:46,consts:[["tableMaster",""],["deleteModal",""],["orderModel",""],["OrderTimeLineModel",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","15%"],["pSortableColumn","cityId","translate","",2,"width","10%"],["pSortableColumn","agentName","translate","",2,"width","8%"],["translate","",2,"width","6%"],["pSortableColumn","visitDate","translate","",2,"width","8%"],["translate","",2,"width","15%"],[2,"width","10%"],[1,"fs-5"],[3,"click"],[1,"badge","bg-success-subtle","text-success"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"badge","bg-primary-subtle","text-primary","my-1"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],[4,"ngFor","ngForOf"],[1,"d-inline"],[1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"click"],["tooltipPosition","top","class","mt-1 btn btn-sm btn-primary  mx-1","data-bs-toggle","modal",3,"pTooltip","click",4,"hasPermission"],["tooltipPosition","top","class","mt-1 btn btn-sm btn-soft-danger remove-list  mx-1",3,"pTooltip","click",4,"hasPermission"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["tooltipPosition","top","data-bs-toggle","modal",1,"mt-1","btn","btn-sm","btn-primary","mx-1",3,"click","pTooltip"],[1,"ri-checkbox-circle-line","align-bottom"],["tooltipPosition","top",1,"mt-1","btn","btn-sm","btn-soft-danger","remove-list","mx-1",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"isReopen","isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6),e.nrm(3,"ngx-ui-loader",7),e.j41(4,"base-filter",8),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(5,9),e.j41(6,"div",10)(7,"div",11)(8,"input",12),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",13),e.k0s()(),e.j41(11,"div",10)(12,"div",11)(13,"input",14),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",13),e.k0s()(),e.j41(16,"div",10)(17,"div",11)(18,"input",12),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",13),e.k0s()(),e.j41(21,"div",10)(22,"div",11)(23,"ng-select",15),e.nI1(24,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",10)(26,"div",11)(27,"ng-select",16),e.nI1(28,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",10)(30,"div",11)(31,"ng-select",17),e.nI1(32,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(33,"div",18)(34,"input",19),e.nI1(35,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(36,"div",20)(37,"div",21)(38,"p-table",22,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(40,Si,25,0,"ng-template",23)(41,Di,36,23,"ng-template",24),e.k0s()(),e.DNE(42,Oi,2,0,"div",25)(43,wi,6,8,"div",26),e.k0s()()()(),e.DNE(44,Vi,1,1,"ng-template",null,1,e.C5r)(46,Gi,1,4,"ng-template",null,2,e.C5r)(48,Li,1,1,"ng-template",null,3,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","reopenLoader"),e.R7$(),e.Y8G("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,32,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,34,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,36,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,38,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,40,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(32,42,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(35,44,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.me,d.Q0,d.BC,d.vS,p.s5,E.kL,U.b,ee.L,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,b.p,W.m,ce,K,g.vh,c.D9]})}}return r})();const Bi=()=>["order.view"],Ai=()=>["newOrder.view"],Xi=()=>["urgented.view"],Ui=()=>["confirmed.view"],Yi=()=>["assigned.view"],Pi=()=>["completed.view"],zi=()=>["reopen.view"],Hi=()=>["canceled.view"];function Ji(r,l){1&r&&e.nrm(0,"app-all-order")}function Qi(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",8),e.k0s(),e.DNE(3,Ji,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",1)}function qi(r,l){1&r&&e.nrm(0,"app-new-orders")}function Wi(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",10),e.k0s(),e.DNE(3,qi,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",2)}function Ki(r,l){1&r&&e.nrm(0,"app-urgent-orders")}function Zi(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",11),e.k0s(),e.DNE(3,Ki,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",3)}function er(r,l){1&r&&e.nrm(0,"app-sure-orders")}function tr(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",12),e.k0s(),e.DNE(3,er,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",4)}function nr(r,l){1&r&&e.nrm(0,"app-assigned-orders")}function ir(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",13),e.k0s(),e.DNE(3,nr,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",5)}function rr(r,l){1&r&&e.nrm(0,"app-complete-orders")}function ar(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",14),e.k0s(),e.DNE(3,rr,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",6)}function sr(r,l){1&r&&e.nrm(0,"reopen-order")}function or(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",15),e.k0s(),e.DNE(3,sr,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",7)}function lr(r,l){1&r&&e.nrm(0,"app-refundable-orders")}function dr(r,l){1&r&&(e.j41(0,"li",6)(1,"a",7),e.nrm(2,"span",16),e.k0s(),e.DNE(3,lr,1,0,"ng-template",9),e.k0s()),2&r&&e.Y8G("ngbNavItem",8)}let cr=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=1,this.activeindex="1"}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-order-types"]],features:[e.Vt3],decls:13,vars:18,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem",4,"hasPermission"],[1,"mt-2",3,"ngbNavOutlet"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","orderManagement.order.all"],["ngbNavContent",""],["translate","orderManagement.order.newOrders.title"],["translate","orderManagement.order.urgentOrders.title"],["translate","orderManagement.order.sureOrders.title"],["translate","orderManagement.order.assignedOrders.title"],["translate","orderManagement.order.completeOrders.title"],["translate","orderManagement.order.reopenTitle"],["translate","orderManagement.order.refundableOrders.title"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(s){return e.eBV(a),e.DH7(n.active,s)||(n.active=s),e.Njj(s)}),e.bIt("navChange",function(s){return e.eBV(a),e.Njj(n.onNavChange(s))}),e.DNE(4,Qi,4,1,"li",4)(5,Wi,4,1,"li",4)(6,Zi,4,1,"li",4)(7,tr,4,1,"li",4)(8,ir,4,1,"li",4)(9,ar,4,1,"li",4)(10,or,4,1,"li",4)(11,dr,4,1,"li",4),e.k0s(),e.nrm(12,"div",5),e.k0s()()}if(2&i){const a=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("hasPermission",e.lJ4(10,Bi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(11,Ai)),e.R7$(),e.Y8G("hasPermission",e.lJ4(12,Xi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(13,Ui)),e.R7$(),e.Y8G("hasPermission",e.lJ4(14,Yi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(15,Pi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(16,zi)),e.R7$(),e.Y8G("hasPermission",e.lJ4(17,Hi)),e.R7$(),e.Y8G("ngbNavOutlet",a)}},dependencies:[p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,c.Mm,b.p,it,xt,zt,fn,zn,mi,xi,$i],encapsulation:2})}}return r})();var pe=m(26364),mr=m(80388);let pr=(()=>{class r{constructor(){this.title="orderManagement.timeAvailable.title"}ngOnInit(){}onTimeSelected(t){console.log(t)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-timeAvailable"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"],[3,"onTimeSelected"]],template:function(i,n){1&i&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.j41(2,"time-available",1),e.bIt("onTimeSelected",function(o){return n.onTimeSelected(o)}),e.k0s()),2&i&&(e.FS9("title",e.bMT(1,2,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[pe.m,mr.h,c.D9]})}}return r})();var re=m(71100),se=m(50949);let oe=(()=>{class r{constructor(t,i,n,a){this.cancelReasonService=t,this.orderService=i,this.ngxLoader=n,this.alertService=a,this.cancelReasons=[],this.form={},this.orderId=0,this.loaderOperationShap=u.$$,this.operationLoader=u.ZW,this.notifier=new Fe.B,this.success=new e.bkB,this.dismiss=new e.bkB}ngOnInit(){this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}onCancelOrder(){let t={cancelReasonCode:this.form.cancelReasonCode,id:this.orderId};this.ngxLoader.startLoader(this.operationLoader),this.orderService.RemoveEvaluateOrder(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{this.ngxLoader.stopLoader(this.operationLoader),i.success?(this.alertService.success(),this.success.emit(!0),this.dismiss.emit(!0)):this.alertService.error()},()=>{this.alertService.error(),this.ngxLoader.stopLoader(this.operationLoader)})}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(ie.e),e.rXU(re.W),e.rXU(j.eD),e.rXU(R.u))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["cancel-evaluation-model"]],inputs:{orderId:"orderId"},outputs:{success:"success",dismiss:"dismiss"},decls:19,vars:10,consts:[["formEntity","ngForm"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.cancelReasonName",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"row"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"h4",3),e.nrm(3,"span",4),e.k0s(),e.j41(4,"button",5),e.bIt("click",function(){return e.eBV(a),e.Njj(n.dismissFn())}),e.k0s()(),e.j41(5,"div",6),e.nrm(6,"ngx-ui-loader",7),e.j41(7,"form",8,0),e.bIt("ngSubmit",function(){return e.eBV(a),e.Njj(n.onCancelOrder())}),e.j41(9,"div",9)(10,"div",10)(11,"label",11),e.EFF(12,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(13,"ng-select",12),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.form.cancelReasonCode,s)||(n.form.cancelReasonCode=s),e.Njj(s)}),e.k0s()()(),e.j41(15,"div",13)(16,"button",14),e.nrm(17,"i",15)(18,"span",16),e.k0s()()()()()}if(2&i){const a=e.sdS(8);e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,8,"orderManagement.order.cancelReasonName")),e.Y8G("items",n.cancelReasons)("multiple",!1),e.R50("ngModel",n.form.cancelReasonCode),e.R7$(3),e.Y8G("disabled",!a.valid)}},dependencies:[d.qT,d.BC,d.cb,d.YS,d.vS,d.cV,c.Mm,j.Cv,O.vr,c.D9],encapsulation:2})}}return r})();function gr(r,l){1&r&&(e.j41(0,"tr",29)(1,"th",30),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",31),e.nrm(4,"i",32),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",33),e.EFF(7," general.table.creationTime "),e.k0s(),e.j41(8,"th",34),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",34),e.EFF(11," orderManagement.order.mobile "),e.k0s(),e.j41(12,"th",35),e.EFF(13," orderManagement.order.cityName "),e.k0s(),e.j41(14,"th",35),e.EFF(15," orderManagement.order.districtName "),e.k0s(),e.j41(16,"th",35),e.EFF(17," orderManagement.priceEvaluation.status "),e.k0s(),e.nrm(18,"th",36),e.k0s())}function _r(r,l){1&r&&e.nrm(0,"span",52)}function hr(r,l){if(1&r&&(e.j41(0,"span",53),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function ur(r,l){1&r&&e.nrm(0,"span",54)}function br(r,l){1&r&&e.nrm(0,"span",55)}function fr(r,l){if(1&r&&(e.nrm(0,"i",56),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",57),e.EFF(5)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function vr(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.j41(8,"span",38),e.EFF(9),e.k0s()(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td")(13,"span",39),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(14),e.nrm(15,"i",40),e.k0s()(),e.j41(16,"td"),e.EFF(17),e.k0s(),e.j41(18,"td"),e.DNE(19,_r,1,0,"span",41)(20,hr,2,1,"span",42),e.k0s(),e.j41(21,"td"),e.DNE(22,ur,1,0,"span",43)(23,br,1,0,"span",44),e.k0s(),e.j41(24,"td"),e.DNE(25,fr,6,5,"ng-template",null,3,e.C5r),e.nrm(27,"i",45),e.j41(28,"button",46),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(43);return a.getEvalById(n.evaluationCode),e.Njj(a.openModal(n.evaluationCode,o,"lg"))}),e.nrm(29,"i",47)(30,"span",48),e.k0s(),e.j41(31,"button",49),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(41);return e.Njj(a.openModal(n.evaluationCode,o))}),e.nrm(32,"i",50)(33,"span",51),e.k0s()()()}if(2&r){const t=l.$implicit,i=l.rowIndex,n=e.sdS(26);e.R7$(2),e.JRh(i+1),e.R7$(2),e.SpI(" ",t.evaluationCode,""),e.R7$(2),e.SpI("",e.i5U(7,12,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI("",t.createdBy," "),e.R7$(2),e.JRh(t.agentName),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",""==t.districtName),e.R7$(),e.Y8G("ngIf",""!==t.districtName),e.R7$(2),e.Y8G("ngIf",t.isUrgent),e.R7$(),e.Y8G("ngIf",!t.isUrgent),e.R7$(4),e.Y8G("ngbTooltip",n)}}function Cr(r,l){1&r&&(e.j41(0,"div",58),e.EFF(1," general.table.noData "),e.k0s())}function jr(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",59)(1,"div",60),e.nrm(2,"ngb-pagination-info",61),e.j41(3,"table-length",62),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",63)(5,"ngb-pagination",64),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Fr(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-evaluation-model",65),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function xr(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function Mr(r,l){1&r&&(e.j41(0,"tr")(1,"td",99),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Tr(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",66)(1,"h4",67),e.nrm(2,"span",68),e.k0s(),e.j41(3,"button",69),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,4),e.nrm(6,"ngx-ui-loader",70),e.j41(7,"div",71)(8,"div",72)(9,"div",73)(10,"div",7)(11,"div",74)(12,"label",75),e.EFF(13,"orderManagement.order.cityName"),e.k0s(),e.j41(14,"div",76),e.EFF(15),e.k0s()(),e.j41(16,"div",74)(17,"label",75),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"div",76),e.EFF(20),e.k0s()(),e.j41(21,"div",74)(22,"label",77),e.EFF(23,"orderManagement.order.date"),e.k0s(),e.j41(24,"div",76),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",78)(28,"div",79)(29,"table",80)(30,"thead")(31,"tr")(32,"th",81),e.EFF(33," orderManagement.order.service "),e.k0s(),e.j41(34,"th",81),e.EFF(35," orderManagement.order.price "),e.k0s(),e.j41(36,"th",81),e.EFF(37," orderManagement.order.notes "),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,xr,7,3,"tr",82)(40,Mr,4,3,"tr",83),e.k0s()()()(),e.j41(41,"div",84)(42,"div",85)(43,"label",86),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"span",87),e.EFF(47),e.nI1(48,"translate"),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",88)(51,"label",89),e.EFF(52,"orderManagement.order.notes"),e.k0s(),e.j41(53,"span",90),e.EFF(54),e.k0s()(),e.j41(55,"div",91)(56,"label",92),e.EFF(57,"orderManagement.order.assignDate"),e.k0s(),e.j41(58,"div",93)(59,"input",94,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.assignDate,n)||(a.assignForm.assignDate=n),e.Njj(n)}),e.k0s()()(),e.j41(61,"div",91)(62,"label",92),e.EFF(63,"orderManagement.order.team"),e.k0s(),e.j41(64,"ng-select",95,6),e.nI1(66,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.teamCode,n)||(a.assignForm.teamCode=n),e.Njj(n)}),e.k0s()()(),e.j41(67,"div",96)(68,"button",97),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.ChangeAssignTeam())}),e.k0s(),e.j41(69,"button",98),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.SpI(" ",t.evaluationDetails.cityName||"--"," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName||"--"," "),e.R7$(5),e.SpI(" ",e.i5U(26,16,t.evaluationDetails.visitDate,"yyyy-MM-dd")||"--"," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(45,19,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(48,21,"orderManagement.order.yes"):e.bMT(49,23,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes||"--"," "),e.R7$(5),e.R50("ngModel",t.assignForm.assignDate),e.R7$(5),e.FS9("placeholder",e.bMT(66,25,"orderManagement.order.team")),e.Y8G("items",t.teams)("multiple",!1),e.R50("ngModel",t.assignForm.teamCode)}}let Sr=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,v,n,o,s,F),this.baseService=n,this.orderPendingService=a,this.authDaamService=x,this.excelService=M,this.cityService=S,this.districtService=I,this.channelService=y,this.router=P,this.title="orderManagement.priceEvaluation.title",this.titleOperation="orderManagement.priceEvaluation.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.teams=[],this.employees=[],this.searchForm={},this.assignForm={},this.isResolveList=!1,this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=3,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.GetCities(),this.getEvalTeams()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("priceEvalLoader"),this.pagination.isEvaluationPrice=!0,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("priceEvalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("priceEvalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.assignForm.code=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getEvalById(t){this.baseService.getById(t).subscribe(i=>{this.evaluationDetails=i.data},()=>{this.alertService.error()})}getEvalTeams(){this.baseService.EvaluationLookUp().subscribe(t=>{this.teams=t.data.teams},()=>{this.alertService.error()})}ChangeAssignTeam(){this.ngxLoader.startLoader(u.Fq),this.baseService.ChangeAssignTeam(this.assignForm).subscribe(t=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(re.W),e.rXU(se.H),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["priceEvaluation"]],features:[e.Vt3],decls:44,vars:41,consts:[["tableMaster",""],["deleteModal",""],["evaluateModal",""],["tooltipContent",""],["formEntity","ngForm"],["assignDate","ngModel"],["teamCode","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAllStr","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],["translate","",2,"width","15%"],[1,"fs-5"],[1,"badge","bg-primary-subtle","text-primary"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.priceEvaluation.isUrgent",4,"ngIf"],["class","badge bg-success-subtle text-success","translate","orderManagement.priceEvaluation.normal",4,"ngIf"],["tooltipPosition","top",1,"d-inline","text-primary","fs-10",3,"ngbTooltip"],["type","button",1,"btn","btn-sm","btn-success","w-sm","btn-label","waves-effect","waves-light","rounded-pill","p-0","py-1",3,"click"],[1,"ri-user-follow-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.priceEvaluation.assign"],["type","button",1,"btn","btn-sm","btn-danger","w-sm","btn-label","waves-effect","waves-light","rounded-pill","p-0","mx-1","py-1",3,"click"],[1,"ri-chat-delete-fill","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","orderManagement.priceEvaluation.cancel"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.priceEvaluation.isUrgent",1,"badge","bg-danger-subtle","text-danger"],["translate","orderManagement.priceEvaluation.normal",1,"badge","bg-success-subtle","text-success"],[1,"ri-history-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.priceEvaluation.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-body"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"form-control","w-100"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"mt-4","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-4","pt-3","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75","form-control","py-3"],[1,"col-12","col-md-6","mb-3"],["for","assignDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","assignDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","teamCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["colspan","4"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"base-filter",11),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,12),e.j41(6,"div",13)(7,"div",14)(8,"input",15),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",16),e.k0s()(),e.j41(11,"div",13)(12,"div",14)(13,"input",17),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",16),e.k0s()(),e.j41(16,"div",13)(17,"div",14)(18,"input",15),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",16),e.k0s()(),e.j41(21,"div",13)(22,"div",14)(23,"ng-select",18),e.nI1(24,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",13)(26,"div",14)(27,"ng-select",19),e.nI1(28,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",20)(30,"input",21),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",22)(33,"div",23)(34,"p-table",24,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(36,gr,19,0,"ng-template",25)(37,vr,34,15,"ng-template",26),e.k0s()(),e.DNE(38,Cr,2,0,"div",27)(39,jr,6,8,"div",28),e.k0s()()()(),e.DNE(40,Fr,1,1,"ng-template",null,1,e.C5r)(42,Tr,70,27,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","priceEvalLoader"),e.R7$(),e.Y8G("showAllStr",!1)("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,29,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,31,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,33,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,35,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,37,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,39,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,p.md,Y.m,oe,g.vh,c.D9]})}}return r})();function Ir(r,l){1&r&&(e.j41(0,"tr",31)(1,"th",32),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",33),e.nrm(4,"i",34),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",35),e.EFF(7," general.table.creationTime "),e.k0s(),e.j41(8,"th",36),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",36),e.EFF(11," orderManagement.order.mobile "),e.k0s(),e.j41(12,"th",37),e.EFF(13," orderManagement.order.cityName "),e.k0s(),e.j41(14,"th",37),e.EFF(15," orderManagement.order.districtName "),e.k0s(),e.j41(16,"th",37),e.EFF(17," orderManagement.priceEvaluation.status "),e.k0s(),e.j41(18,"th",37),e.EFF(19," orderManagement.order.teamName "),e.k0s(),e.j41(20,"th",37),e.EFF(21," orderManagement.order.visitDate "),e.k0s(),e.nrm(22,"th",35),e.k0s())}function kr(r,l){1&r&&e.nrm(0,"span",61)}function yr(r,l){if(1&r&&(e.j41(0,"span",62),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Rr(r,l){1&r&&e.nrm(0,"span",63)}function Er(r,l){1&r&&e.nrm(0,"span",64)}function Nr(r,l){if(1&r&&(e.nrm(0,"i",65),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",66),e.EFF(5)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function Dr(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",38)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"bdi"),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"date"),e.j41(9,"span",39),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span",40),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(15),e.nrm(16,"i",41),e.k0s()(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.DNE(20,kr,1,0,"span",42)(21,yr,2,1,"span",43),e.k0s(),e.j41(22,"td"),e.DNE(23,Rr,1,0,"span",44)(24,Er,1,0,"span",45),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s(),e.j41(27,"td"),e.EFF(28),e.nI1(29,"date"),e.k0s(),e.j41(30,"td"),e.DNE(31,Nr,6,5,"ng-template",null,5,e.C5r),e.nrm(33,"i",46),e.j41(34,"div",47)(35,"div",48)(36,"button",49),e.nrm(37,"i",50),e.k0s(),e.j41(38,"ul",51)(39,"li",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(45);return a.getEvalById(n.evaluationCode),e.Njj(a.openModal(n.evaluationCode,o,"lg"))}),e.j41(40,"a",53),e.nrm(41,"i",54)(42,"span",55),e.k0s()(),e.j41(43,"li",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(43);return a.getEvalById(n.evaluationCode),e.Njj(a.openModal(n.evaluationCode,o,"lg"))}),e.j41(44,"a",53),e.nrm(45,"i",56)(46,"span",57),e.k0s()(),e.j41(47,"li",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(41);return e.Njj(a.openModal(n.evaluationCode,o))}),e.j41(48,"a",53),e.nrm(49,"i",58)(50,"span",59),e.k0s()(),e.j41(51,"li",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openModal(n.evaluationCode,o))}),e.j41(52,"a",53),e.nrm(53,"i",58)(54,"span",60),e.k0s()()()()()()()}if(2&r){const t=l.$implicit,i=l.rowIndex,n=e.sdS(32);e.R7$(2),e.JRh(i+1),e.R7$(3),e.SpI("#SO#",t.evaluationCode,""),e.R7$(2),e.SpI("",e.i5U(8,14,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.JRh(t.createdBy),e.R7$(2),e.JRh(t.agentName),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",""==t.districtName),e.R7$(),e.Y8G("ngIf",""!==t.districtName),e.R7$(2),e.Y8G("ngIf",t.isUrgent),e.R7$(),e.Y8G("ngIf",!t.isUrgent),e.R7$(2),e.JRh(t.teamName),e.R7$(2),e.JRh(e.i5U(29,17,t.visitDate,"yyyy-MM-dd ")),e.R7$(5),e.Y8G("ngbTooltip",n)}}function Or(r,l){1&r&&(e.j41(0,"div",67),e.EFF(1," general.table.noData "),e.k0s())}function wr(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",68)(1,"div",69),e.nrm(2,"ngb-pagination-info",70),e.j41(3,"table-length",71),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",72)(5,"ngb-pagination",73),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Vr(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-evaluation-model",74),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Gr(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function Lr(r,l){1&r&&(e.j41(0,"tr")(1,"td",108),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function $r(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",75)(1,"h4",76),e.nrm(2,"span",77),e.k0s(),e.j41(3,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,6),e.nrm(6,"ngx-ui-loader",79),e.j41(7,"div",80)(8,"div",81)(9,"div",82)(10,"div",9)(11,"div",83)(12,"label",84),e.EFF(13,"orderManagement.order.cityName"),e.k0s(),e.j41(14,"div",85),e.EFF(15),e.k0s()(),e.j41(16,"div",83)(17,"label",84),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"div",85),e.EFF(20),e.k0s()(),e.j41(21,"div",83)(22,"label",86),e.EFF(23,"orderManagement.order.date"),e.k0s(),e.j41(24,"div",85),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",87)(28,"div",88)(29,"table",89)(30,"thead")(31,"tr")(32,"th",90),e.EFF(33," orderManagement.order.service "),e.k0s(),e.j41(34,"th",90),e.EFF(35," orderManagement.order.price "),e.k0s(),e.j41(36,"th",90),e.EFF(37," orderManagement.order.notes "),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,Gr,7,3,"tr",91)(40,Lr,4,3,"tr",92),e.k0s()()()(),e.j41(41,"div",93)(42,"div",94)(43,"label",95),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"span",96),e.EFF(47),e.nI1(48,"translate"),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",97)(51,"label",98),e.EFF(52,"orderManagement.order.notes"),e.k0s(),e.j41(53,"span",99),e.EFF(54),e.k0s()(),e.j41(55,"div",100)(56,"label",101),e.EFF(57,"orderManagement.order.assignDate"),e.k0s(),e.j41(58,"div",102)(59,"input",103,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.assignDate,n)||(a.assignForm.assignDate=n),e.Njj(n)}),e.k0s()()(),e.j41(61,"div",100)(62,"label",101),e.EFF(63,"orderManagement.order.team"),e.k0s(),e.j41(64,"ng-select",104,8),e.nI1(66,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.teamCode,n)||(a.assignForm.teamCode=n),e.Njj(n)}),e.k0s()()(),e.j41(67,"div",105)(68,"button",106),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.ChangeAssignTeam())}),e.k0s(),e.j41(69,"button",107),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.SpI(" ",t.evaluationDetails.cityName," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName," "),e.R7$(5),e.SpI(" ",e.i5U(26,16,t.evaluationDetails.visitDate,"yyyy-MM-dd")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(45,19,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(48,21,"orderManagement.order.yes"):e.bMT(49,23,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes||"--"," "),e.R7$(5),e.R50("ngModel",t.assignForm.assignDate),e.R7$(5),e.FS9("placeholder",e.bMT(66,25,"orderManagement.order.team")),e.Y8G("items",t.teams)("multiple",!1),e.R50("ngModel",t.assignForm.teamCode)}}function Br(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function Ar(r,l){1&r&&(e.j41(0,"tr")(1,"td",108),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Xr(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",75)(1,"h4",76),e.nrm(2,"span",109),e.k0s(),e.j41(3,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,6),e.nrm(6,"ngx-ui-loader",79),e.j41(7,"div",80)(8,"div",81)(9,"div",82)(10,"div",9)(11,"div",83)(12,"label",84),e.EFF(13,"orderManagement.order.cityName"),e.k0s(),e.j41(14,"div",85),e.EFF(15),e.k0s()(),e.j41(16,"div",83)(17,"label",84),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"div",85),e.EFF(20),e.k0s()(),e.j41(21,"div",83)(22,"label",86),e.EFF(23,"orderManagement.order.date"),e.k0s(),e.j41(24,"div",85),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",87)(28,"div",88)(29,"table",89)(30,"thead")(31,"tr")(32,"th",90),e.EFF(33," orderManagement.order.service "),e.k0s(),e.j41(34,"th",90),e.EFF(35," orderManagement.order.price "),e.k0s(),e.j41(36,"th",90),e.EFF(37," orderManagement.order.notes "),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,Br,7,3,"tr",91)(40,Ar,4,3,"tr",92),e.k0s()()()(),e.j41(41,"div",93)(42,"div",94)(43,"label",95),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"span",96),e.EFF(47),e.nI1(48,"translate"),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",97)(51,"label",98),e.EFF(52,"orderManagement.order.notes"),e.k0s(),e.j41(53,"span",99),e.EFF(54),e.k0s()()(),e.j41(55,"div",105)(56,"button",107),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.SpI(" ",t.evaluationDetails.cityName," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName," "),e.R7$(5),e.SpI(" ",e.i5U(26,11,t.evaluationDetails.visitDate,"yyyy-MM-dd")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(45,14,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(48,16,"orderManagement.order.yes"):e.bMT(49,18,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes||"--"," ")}}function Ur(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",75)(1,"h4",76),e.nrm(2,"span",110),e.k0s(),e.j41(3,"button",78),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,6),e.nrm(6,"ngx-ui-loader",79),e.j41(7,"div",80)(8,"div",81)(9,"div",111),e.nrm(10,"lord-icon",112),e.j41(11,"div",113),e.nrm(12,"h3",114)(13,"p",115),e.k0s()(),e.j41(14,"div",116)(15,"button",106),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.FinishEvaluation())}),e.k0s(),e.j41(16,"button",107),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let Yr=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P,le){super(t,i,v,n,o,s,F),this.baseService=n,this.orderPendingService=a,this.authDaamService=x,this.excelService=M,this.cityService=S,this.districtService=I,this.channelService=y,this.cancelReasonService=P,this.router=le,this.title="orderManagement.assignEvaluation.title",this.titleOperation="orderManagement.assignEvaluation.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.teams=[],this.employees=[],this.searchForm={},this.assignForm={},this.isResolveList=!1,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.cancelReasons=[],this.GetCities(),this.getEvalTeams(),this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("assignEvalLoader"),this.pagination.isEvaluationAssign=!0,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("assignEvalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("assignEvalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.assignForm.code=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getEvalById(t){this.baseService.getById(t).subscribe(i=>{this.evaluationDetails=i.data,this.assignForm.teamCode=i.date.teamCode,this.assignForm.assignDate=i.date.assignDate},()=>{this.alertService.error()})}getEvalTeams(){this.baseService.EvaluationLookUp().subscribe(t=>{this.teams=t.data.teams},()=>{this.alertService.error()})}ChangeAssignTeam(){this.ngxLoader.startLoader(u.Fq),this.baseService.ChangeAssignTeam(this.assignForm).subscribe(t=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error(),this.ngxLoader.stopLoader(u.Fq)})}FinishEvaluation(){this.ngxLoader.startLoader(u.Fq),this.baseService.SaveEvaluationFinish({}).subscribe(t=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error(),this.ngxLoader.stopLoader(u.Fq)})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(re.W),e.rXU(se.H),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(ie.e),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-assign-evaluation"]],features:[e.Vt3],decls:48,vars:41,consts:[["tableMaster",""],["deleteModal",""],["evaluateModal",""],["showModal",""],["finishModal",""],["tooltipContent",""],["formEntity","ngForm"],["assignDate","ngModel"],["teamCode","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAllStr","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","15%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],[1,"fs-5"],[1,"badge","bg-primary-subtle","text-primary"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.priceEvaluation.isUrgent",4,"ngIf"],["class","badge bg-success-subtle text-success","translate","orderManagement.priceEvaluation.normal",4,"ngIf"],["tooltipPosition","top",1,"ri-history-fill","d-inline","text-primary","fs-16","align-middle","me-1",3,"ngbTooltip"],[1,"d-inline"],[1,"dropdown-custom"],["type","button",1,"btn","dropbtn","btn-soft-secondary","btn-sm","dropdown-custom","arrow-none"],[1,"ri-more-fill"],[1,"dropdown-menu","dropdown-menu-end","dropdown-content",2,"left","0"],[3,"click"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-eye-fill","align-bottom","me-2","text-muted"],["translate","general.action.view"],[1,"ri-user-follow-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.priceEvaluation.reassign"],[1,"ri-chat-delete-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.priceEvaluation.cancel"],["translate","orderManagement.finishedEvaluation.finish"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.priceEvaluation.isUrgent",1,"badge","bg-danger-subtle","text-danger"],["translate","orderManagement.priceEvaluation.normal",1,"badge","bg-success-subtle","text-success"],[1,"ri-history-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.assignEvaluation.reassignEval",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-body"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"form-control","w-100"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"mt-4","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-4","pt-3","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75","form-control","py-3"],[1,"col-12","col-md-6","mb-3"],["for","assignDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","assignDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","teamCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["colspan","4"],["translate","orderManagement.assignEvaluation.title",1,"fw-bold","fs-4"],["translate","orderManagement.finishedEvaluation.title",1,"fw-bold","fs-4"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"ngx-ui-loader",12),e.j41(4,"base-filter",13),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,14),e.j41(6,"div",15)(7,"div",16)(8,"input",17),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",18),e.k0s()(),e.j41(11,"div",15)(12,"div",16)(13,"input",19),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",18),e.k0s()(),e.j41(16,"div",15)(17,"div",16)(18,"input",17),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",18),e.k0s()(),e.j41(21,"div",15)(22,"div",16)(23,"ng-select",20),e.nI1(24,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",15)(26,"div",16)(27,"ng-select",21),e.nI1(28,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",22)(30,"input",23),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",24)(33,"div",25)(34,"p-table",26,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(36,Ir,23,0,"ng-template",27)(37,Dr,55,20,"ng-template",28),e.k0s()(),e.DNE(38,Or,2,0,"div",29)(39,wr,6,8,"div",30),e.k0s()()()(),e.DNE(40,Vr,1,1,"ng-template",null,1,e.C5r)(42,$r,70,27,"ng-template",null,2,e.C5r)(44,Xr,57,20,"ng-template",null,3,e.C5r)(46,Ur,17,3,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","assignEvalLoader"),e.R7$(),e.Y8G("showAllStr",!1)("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,29,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,31,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,33,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,35,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,37,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,39,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,p.md,Y.m,oe,g.vh,c.D9]})}}return r})();function Pr(r,l){1&r&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",32),e.EFF(7," general.table.creationTime "),e.k0s(),e.j41(8,"th",33),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",33),e.EFF(11," orderManagement.order.mobile "),e.k0s(),e.j41(12,"th",34),e.EFF(13," orderManagement.order.cityName "),e.k0s(),e.j41(14,"th",34),e.EFF(15," orderManagement.order.districtName "),e.k0s(),e.j41(16,"th",34),e.EFF(17," orderManagement.priceEvaluation.status "),e.k0s(),e.j41(18,"th",34),e.EFF(19," orderManagement.order.visitDate "),e.k0s(),e.j41(20,"th",34),e.EFF(21," orderManagement.order.notes "),e.k0s()())}function zr(r,l){1&r&&e.nrm(0,"span",43)}function Hr(r,l){if(1&r&&(e.j41(0,"span",44),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Jr(r,l){1&r&&e.nrm(0,"span",45)}function Qr(r,l){1&r&&e.nrm(0,"span",46)}function qr(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",35)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"bdi"),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"date"),e.j41(9,"span",36),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(15),e.nrm(16,"i",38),e.k0s()(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.DNE(20,zr,1,0,"span",39)(21,Hr,2,1,"span",40),e.k0s(),e.j41(22,"td"),e.DNE(23,Jr,1,0,"span",41)(24,Qr,1,0,"span",42),e.k0s(),e.j41(25,"td"),e.EFF(26),e.nI1(27,"date"),e.k0s(),e.j41(28,"td"),e.EFF(29),e.k0s()()}if(2&r){const t=l.$implicit,i=l.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(3),e.SpI("#SO#",t.evaluationCode,""),e.R7$(2),e.SpI("",e.i5U(8,13,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI("",t.createdBy," "),e.R7$(2),e.JRh(t.agentName),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",""==t.districtName),e.R7$(),e.Y8G("ngIf",""!==t.districtName),e.R7$(2),e.Y8G("ngIf",t.isUrgent),e.R7$(),e.Y8G("ngIf",!t.isUrgent),e.R7$(2),e.JRh(e.i5U(27,16,t.visitDate,"yyyy-MM-dd HH:mm")),e.R7$(3),e.JRh(t.notes)}}function Wr(r,l){1&r&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function Kr(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Zr(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-evaluation-model",54),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function ea(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function ta(r,l){1&r&&(e.j41(0,"tr")(1,"td",85),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function na(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",null,3),e.nrm(2,"ngx-ui-loader",55),e.j41(3,"div",56)(4,"div",57)(5,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",59)(7,"div",60)(8,"div",6)(9,"div",61)(10,"label",62),e.EFF(11,"orderManagement.order.cityName"),e.k0s(),e.j41(12,"div",63),e.EFF(13),e.k0s()(),e.j41(14,"div",61)(15,"label",62),e.EFF(16,"orderManagement.order.districtName"),e.k0s(),e.j41(17,"div",63),e.EFF(18),e.k0s()(),e.j41(19,"div",61)(20,"label",64),e.EFF(21,"orderManagement.order.date"),e.k0s(),e.j41(22,"div",63),e.EFF(23),e.nI1(24,"date"),e.k0s()()(),e.j41(25,"div",65)(26,"div",66)(27,"table",67)(28,"thead")(29,"tr")(30,"th",68),e.EFF(31," orderManagement.order.service "),e.k0s(),e.j41(32,"th",68),e.EFF(33," orderManagement.order.price "),e.k0s(),e.j41(34,"th",68),e.EFF(35," orderManagement.order.notes "),e.k0s()()(),e.j41(36,"tbody"),e.DNE(37,ea,7,3,"tr",69)(38,ta,4,3,"tr",70),e.k0s()()()(),e.j41(39,"div",65)(40,"div",71)(41,"label",72),e.EFF(42),e.nI1(43,"translate"),e.k0s(),e.j41(44,"span",73),e.EFF(45),e.nI1(46,"translate"),e.nI1(47,"translate"),e.k0s()(),e.j41(48,"div",74)(49,"label",75),e.EFF(50,"orderManagement.order.notes"),e.k0s(),e.j41(51,"span",76),e.EFF(52),e.k0s()(),e.j41(53,"div",77)(54,"label",78),e.EFF(55,"orderManagement.order.assignDate"),e.k0s(),e.j41(56,"div",79)(57,"input",80,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.assignDate,n)||(a.assignForm.assignDate=n),e.Njj(n)}),e.k0s()()(),e.j41(59,"div",77)(60,"label",78),e.EFF(61,"orderManagement.order.team"),e.k0s(),e.j41(62,"ng-select",81,5),e.nI1(64,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.teamCode,n)||(a.assignForm.teamCode=n),e.Njj(n)}),e.k0s()()(),e.j41(65,"div",82)(66,"button",83),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.ChangeAssignTeam())}),e.k0s(),e.j41(67,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(11),e.SpI(" ",t.evaluationDetails.cityName," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName," "),e.R7$(5),e.SpI(" ",e.i5U(24,16,t.evaluationDetails.visitDate,"mediumDate")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(43,19,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(46,21,"orderManagement.order.yes"):e.bMT(47,23,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes," "),e.R7$(5),e.R50("ngModel",t.assignForm.assignDate),e.R7$(5),e.FS9("placeholder",e.bMT(64,25,"orderManagement.order.team")),e.Y8G("items",t.teams)("multiple",!1),e.R50("ngModel",t.assignForm.teamCode)}}let ia=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,v,n,o,s,F),this.baseService=n,this.orderPendingService=a,this.authDaamService=x,this.excelService=M,this.cityService=S,this.districtService=I,this.channelService=y,this.router=P,this.title="orderManagement.finishedEvaluation.title",this.titleOperation="orderManagement.finishedEvaluation.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.teams=[],this.employees=[],this.searchForm={},this.assignForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.GetCities(),this.getEvalTeams()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("finishEvalLoader"),this.pagination.isEvaluationFinish=!0,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("finishEvalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("finishEvalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getEvalById(t){this.baseService.getById(t).subscribe(i=>{this.evaluationDetails=i.data},()=>{this.alertService.error()})}getEvalTeams(){this.baseService.EvaluationLookUp().subscribe(t=>{this.teams=t.data.teams},()=>{this.alertService.error()})}ChangeAssignTeam(){this.baseService.ChangeAssignTeam(this.assignForm).subscribe(t=>{this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(re.W),e.rXU(se.H),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-finished-evaluation"]],features:[e.Vt3],decls:44,vars:41,consts:[["tableMaster",""],["deleteModal",""],["evaluateModal",""],["formEntity","ngForm"],["assignDate","ngModel"],["teamCode","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAllStr","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],[1,"fs-5"],[1,"badge","bg-primary-subtle","text-primary"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.priceEvaluation.isUrgent",4,"ngIf"],["class","badge bg-success-subtle text-success","translate","orderManagement.priceEvaluation.normal",4,"ngIf"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.priceEvaluation.isUrgent",1,"badge","bg-danger-subtle","text-danger"],["translate","orderManagement.priceEvaluation.normal",1,"badge","bg-success-subtle","text-success"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"form-control","w-100"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"mt-5","row"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75","form-control","py-3"],[1,"col-12","col-md-6","mb-3"],["for","assignDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","assignDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","teamCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["colspan","4"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",19)(30,"input",20),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",21)(33,"div",22)(34,"p-table",23,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(36,Pr,22,0,"ng-template",24)(37,qr,30,19,"ng-template",25),e.k0s()(),e.DNE(38,Wr,2,0,"div",26)(39,Kr,6,8,"div",27),e.k0s()()()(),e.DNE(40,Zr,1,1,"ng-template",null,1,e.C5r)(42,na,68,27,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","finishEvalLoader"),e.R7$(),e.Y8G("showAllStr",!1)("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,29,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,31,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,33,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,35,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,37,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,39,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,oe,g.vh,c.D9]})}}return r})();function ra(r,l){1&r&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",32),e.EFF(7," general.table.creationTime "),e.k0s(),e.j41(8,"th",33),e.EFF(9," orderManagement.order.agentName "),e.k0s(),e.j41(10,"th",33),e.EFF(11," orderManagement.order.mobile "),e.k0s(),e.j41(12,"th",34),e.EFF(13," orderManagement.order.cityName "),e.k0s(),e.j41(14,"th",34),e.EFF(15," orderManagement.order.districtName "),e.k0s(),e.j41(16,"th",34),e.EFF(17," orderManagement.priceEvaluation.status "),e.k0s(),e.j41(18,"th",33),e.EFF(19," orderManagement.order.cancelReasonName "),e.k0s()())}function aa(r,l){1&r&&e.nrm(0,"span",43)}function sa(r,l){if(1&r&&(e.j41(0,"span",44),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function oa(r,l){1&r&&e.nrm(0,"span",45)}function la(r,l){1&r&&e.nrm(0,"span",46)}function da(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",35)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td")(4,"bdi"),e.EFF(5),e.k0s()(),e.j41(6,"td"),e.EFF(7),e.nI1(8,"date"),e.j41(9,"span",36),e.EFF(10),e.k0s()(),e.j41(11,"td"),e.EFF(12),e.k0s(),e.j41(13,"td")(14,"span",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(15),e.nrm(16,"i",38),e.k0s()(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.DNE(20,aa,1,0,"span",39)(21,sa,2,1,"span",40),e.k0s(),e.j41(22,"td"),e.DNE(23,oa,1,0,"span",41)(24,la,1,0,"span",42),e.k0s(),e.j41(25,"td"),e.EFF(26),e.k0s()()}if(2&r){const t=l.$implicit,i=l.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(3),e.SpI("#SO#",t.evaluationCode,""),e.R7$(2),e.SpI("",e.i5U(8,12,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.SpI("",t.createdBy," "),e.R7$(2),e.JRh(t.agentName),e.R7$(3),e.SpI("",t.mobile," "),e.R7$(3),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",""==t.districtName),e.R7$(),e.Y8G("ngIf",""!==t.districtName),e.R7$(2),e.Y8G("ngIf",t.isUrgent),e.R7$(),e.Y8G("ngIf",!t.isUrgent),e.R7$(2),e.JRh(t.cancelReasonName)}}function ca(r,l){1&r&&(e.j41(0,"div",47),e.EFF(1," general.table.noData "),e.k0s())}function ma(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",48)(1,"div",49),e.nrm(2,"ngb-pagination-info",50),e.j41(3,"table-length",51),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",52)(5,"ngb-pagination",53),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function pa(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-evaluation-model",54),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function ga(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function _a(r,l){1&r&&(e.j41(0,"tr")(1,"td",85),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function ha(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",null,3),e.nrm(2,"ngx-ui-loader",55),e.j41(3,"div",56)(4,"div",57)(5,"button",58),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",59)(7,"div",60)(8,"div",6)(9,"div",61)(10,"label",62),e.EFF(11,"orderManagement.order.cityName"),e.k0s(),e.j41(12,"div",63),e.EFF(13),e.k0s()(),e.j41(14,"div",61)(15,"label",62),e.EFF(16,"orderManagement.order.districtName"),e.k0s(),e.j41(17,"div",63),e.EFF(18),e.k0s()(),e.j41(19,"div",61)(20,"label",64),e.EFF(21,"orderManagement.order.date"),e.k0s(),e.j41(22,"div",63),e.EFF(23),e.nI1(24,"date"),e.k0s()()(),e.j41(25,"div",65)(26,"div",66)(27,"table",67)(28,"thead")(29,"tr")(30,"th",68),e.EFF(31," orderManagement.order.service "),e.k0s(),e.j41(32,"th",68),e.EFF(33," orderManagement.order.price "),e.k0s(),e.j41(34,"th",68),e.EFF(35," orderManagement.order.notes "),e.k0s()()(),e.j41(36,"tbody"),e.DNE(37,ga,7,3,"tr",69)(38,_a,4,3,"tr",70),e.k0s()()()(),e.j41(39,"div",65)(40,"div",71)(41,"label",72),e.EFF(42),e.nI1(43,"translate"),e.k0s(),e.j41(44,"span",73),e.EFF(45),e.nI1(46,"translate"),e.nI1(47,"translate"),e.k0s()(),e.j41(48,"div",74)(49,"label",75),e.EFF(50,"orderManagement.order.notes"),e.k0s(),e.j41(51,"span",76),e.EFF(52),e.k0s()(),e.j41(53,"div",77)(54,"label",78),e.EFF(55,"orderManagement.order.assignDate"),e.k0s(),e.j41(56,"div",79)(57,"input",80,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.assignDate,n)||(a.assignForm.assignDate=n),e.Njj(n)}),e.k0s()()(),e.j41(59,"div",77)(60,"label",78),e.EFF(61,"orderManagement.order.team"),e.k0s(),e.j41(62,"ng-select",81,5),e.nI1(64,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.teamCode,n)||(a.assignForm.teamCode=n),e.Njj(n)}),e.k0s()()(),e.j41(65,"div",82)(66,"button",83),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.ChangeAssignTeam())}),e.k0s(),e.j41(67,"button",84),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(11),e.SpI(" ",t.evaluationDetails.cityName," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName," "),e.R7$(5),e.SpI(" ",e.i5U(24,16,t.evaluationDetails.visitDate,"mediumDate")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(43,19,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(46,21,"orderManagement.order.yes"):e.bMT(47,23,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes," "),e.R7$(5),e.R50("ngModel",t.assignForm.assignDate),e.R7$(5),e.FS9("placeholder",e.bMT(64,25,"orderManagement.order.team")),e.Y8G("items",t.teams)("multiple",!1),e.R50("ngModel",t.assignForm.teamCode)}}let ua=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,v,n,o,s,F),this.baseService=n,this.orderPendingService=a,this.authDaamService=x,this.excelService=M,this.cityService=S,this.districtService=I,this.channelService=y,this.router=P,this.title="orderManagement.canceledEvaluation.title",this.titleOperation="orderManagement.canceledEvaluation.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.teams=[],this.employees=[],this.searchForm={},this.assignForm={},this.isResolveList=!0,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.GetCities(),this.getEvalTeams()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("canceledLoader"),this.pagination.isEvaluationCancele=!0,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("canceledLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("canceledLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getEvalById(t){this.baseService.getById(t).subscribe(i=>{this.evaluationDetails=i.data},()=>{this.alertService.error()})}getEvalTeams(){this.baseService.EvaluationLookUp().subscribe(t=>{this.teams=t.data.teams},()=>{this.alertService.error()})}ChangeAssignTeam(){this.baseService.ChangeAssignTeam(this.assignForm).subscribe(t=>{this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(re.W),e.rXU(se.H),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-canceled-evaluation"]],features:[e.Vt3],decls:44,vars:41,consts:[["tableMaster",""],["deleteModal",""],["evaluateModal",""],["formEntity","ngForm"],["assignDate","ngModel"],["teamCode","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[3,"reset","search","exportXlsx","addNew","showAllStr","showAdd","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["translate","",2,"width","12%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],[1,"fs-5"],[1,"badge","bg-primary-subtle","text-primary"],[1,"cursor-pointer","badge","bg-danger-subtle","text-danger","fs-6",3,"click"],[1,"ri-clipboard-line"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.priceEvaluation.isUrgent",4,"ngIf"],["class","badge bg-success-subtle text-success","translate","orderManagement.priceEvaluation.normal",4,"ngIf"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.priceEvaluation.isUrgent",1,"badge","bg-danger-subtle","text-danger"],["translate","orderManagement.priceEvaluation.normal",1,"badge","bg-success-subtle","text-success"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"success","dismiss","orderId"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"form-control","w-100"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"mt-5","row"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75","form-control","py-3"],[1,"col-12","col-md-6","mb-3"],["for","assignDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","assignDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","teamCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["colspan","4"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",6)(1,"div",7)(2,"div",8),e.nrm(3,"ngx-ui-loader",9),e.j41(4,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(a),e.Njj(n.goRegister())}),e.qex(5,11),e.j41(6,"div",12)(7,"div",13)(8,"input",14),e.nI1(9,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(10,"i",15),e.k0s()(),e.j41(11,"div",12)(12,"div",13)(13,"input",16),e.nI1(14,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(15,"i",15),e.k0s()(),e.j41(16,"div",12)(17,"div",13)(18,"input",14),e.nI1(19,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(20,"i",15),e.k0s()(),e.j41(21,"div",12)(22,"div",13)(23,"ng-select",17),e.nI1(24,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(25,"div",12)(26,"div",13)(27,"ng-select",18),e.nI1(28,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(29,"div",19)(30,"input",20),e.nI1(31,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(32,"div",21)(33,"div",22)(34,"p-table",23,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(36,ra,20,0,"ng-template",24)(37,da,27,15,"ng-template",25),e.k0s()(),e.DNE(38,ca,2,0,"div",26)(39,ma,6,8,"div",27),e.k0s()()()(),e.DNE(40,pa,1,1,"ng-template",null,1,e.C5r)(42,ha,68,27,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","canceledLoader"),e.R7$(),e.Y8G("showAllStr",!1)("showAdd",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(9,29,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(14,31,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(19,33,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(24,35,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(28,37,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(31,39,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,p.s5,E.kL,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,Y.m,oe,g.vh,c.D9]})}}return r})();function ba(r,l){1&r&&e.nrm(0,"priceEvaluation")}function fa(r,l){1&r&&e.nrm(0,"app-assign-evaluation")}function va(r,l){1&r&&e.nrm(0,"app-all-finished-evaluation")}function Ca(r,l){1&r&&e.nrm(0,"app-canceled-evaluation")}let ja=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=1,this.activeindex="2"}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-all-eval-order"]],features:[e.Vt3],decls:21,vars:6,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","orderManagement.order.priceEvaluation"],["ngbNavContent",""],["translate","orderManagement.order.assignEvaluation"],["translate","orderManagement.order.finishEvaluation"],["translate","orderManagement.order.canceledEvaluation"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(s){return e.eBV(a),e.DH7(n.active,s)||(n.active=s),e.Njj(s)}),e.bIt("navChange",function(s){return e.eBV(a),e.Njj(n.onNavChange(s))}),e.j41(4,"li",4)(5,"a",5),e.nrm(6,"span",6),e.k0s(),e.DNE(7,ba,1,0,"ng-template",7),e.k0s(),e.j41(8,"li",4)(9,"a",5),e.nrm(10,"span",8),e.k0s(),e.DNE(11,fa,1,0,"ng-template",7),e.k0s(),e.j41(12,"li",4)(13,"a",5),e.nrm(14,"span",9),e.k0s(),e.DNE(15,va,1,0,"ng-template",7),e.k0s(),e.j41(16,"li",4)(17,"a",5),e.nrm(18,"span",10),e.k0s(),e.DNE(19,Ca,1,0,"ng-template",7),e.k0s()(),e.nrm(20,"div",11),e.k0s()()}if(2&i){const a=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavItem",3),e.R7$(4),e.Y8G("ngbNavItem",4),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,c.Mm,Sr,Yr,ia,ua],encapsulation:2})}}return r})(),Fa=(()=>{class r{constructor(){this.breadCrumbItems=[],this.addOrders="orderManagement.order.addOrders"}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["order-register"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"]],template:function(i,n){1&i&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.nrm(2,"order-operation")),2&i&&(e.FS9("title",e.bMT(1,2,n.addOrders)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[pe.m,ee.L,c.D9],encapsulation:2})}}return r})();var ge=m(56701),ue=m(67569),be=m(21626);let _e=(()=>{class r extends ue.d{constructor(t){super(t,ne.c.apiUrl+"ExpensesItem/")}Delete(t){return this.http.delete(`${this.baseUrl}Delete/${t}`)}editExpensesItems(t,i){return this.http.put(this.baseUrl+"Edit/"+t,i)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(be.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var fe=m(54384);function xa(r,l){1&r&&(e.j41(0,"tr",24)(1,"th",25),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",26),e.nrm(4,"i",27),e.EFF(5," orderManagement.expensesItems.name "),e.k0s(),e.j41(6,"th",28),e.nrm(7,"i",27),e.EFF(8," orderManagement.expensesItems.notes "),e.k0s(),e.j41(9,"th",28),e.nrm(10,"i",27),e.EFF(11," orderManagement.expensesItems.isActive "),e.k0s(),e.nrm(12,"th",29),e.k0s())}function Ma(r,l){1&r&&e.nrm(0,"span",37)}function Ta(r,l){1&r&&e.nrm(0,"span",38)}function Sa(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",30)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.DNE(8,Ma,1,0,"span",31)(9,Ta,1,0,"span",32),e.k0s(),e.j41(10,"td")(11,"button",33),e.nI1(12,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(22);return e.Njj(a.editModal(n,o))}),e.nrm(13,"i",34),e.k0s(),e.j41(14,"button",35),e.nI1(15,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(24);return e.Njj(a.openModal(n.expensesItemCode,o))}),e.nrm(16,"i",36),e.k0s()()()}if(2&r){const t=l.$implicit,i=l.rowIndex;e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.expensesItemName),e.R7$(2),e.JRh(t.notes?t.notes:"--"),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(2),e.FS9("pTooltip",e.bMT(12,7,"general.edit")),e.R7$(3),e.FS9("pTooltip",e.bMT(15,9,"general.delete"))}}function Ia(r,l){1&r&&(e.j41(0,"div",39),e.EFF(1," general.table.noData"),e.k0s())}function ka(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",40)(1,"div",41),e.nrm(2,"ngb-pagination-info",42),e.j41(3,"table-length",43),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",44)(5,"ngb-pagination",45),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ya(r,l){1&r&&(e.j41(0,"span",67),e.EFF(1,"general.action.register "),e.k0s())}function Ra(r,l){1&r&&(e.j41(0,"span",67),e.EFF(1,"general.action.edit "),e.k0s())}function Ea(r,l){1&r&&(e.j41(0,"div",68),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Na(r,l){1&r&&(e.j41(0,"div",68),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function Da(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",46)(1,"h4",47),e.DNE(2,ya,2,0,"span",48)(3,Ra,2,0,"span",48),e.nrm(4,"span",49),e.k0s(),e.j41(5,"button",50),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",51,3),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.nrm(8,"ngx-ui-loader",17),e.j41(9,"div",52)(10,"div",53)(11,"div",54)(12,"div",7)(13,"div",55)(14,"label",56),e.EFF(15,"orderManagement.expensesItems.name"),e.k0s(),e.j41(16,"div",57)(17,"input",58,4),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesItemName,n)||(a.form.expensesItemName=n),e.Njj(n)}),e.k0s(),e.DNE(19,Ea,2,0,"div",59),e.k0s()(),e.j41(20,"div",55)(21,"label",60),e.EFF(22,"orderManagement.expensesItems.notes"),e.k0s(),e.j41(23,"div",57)(24,"textarea",61,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(26,"                                "),e.k0s(),e.DNE(27,Na,2,0,"div",59),e.k0s()(),e.j41(28,"div",55)(29,"label",62),e.EFF(30,"orderManagement.expensesItems.isActive"),e.k0s(),e.j41(31,"p-inputSwitch",63),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.isActive,n)||(a.form.isActive=n),e.Njj(n)}),e.k0s()()(),e.j41(32,"div",64),e.nrm(33,"button",65),e.j41(34,"button",66),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.sdS(7),i=e.sdS(18),n=e.sdS(25),a=e.XpG();e.R7$(2),e.Y8G("ngIf",!a.isEditForm),e.R7$(),e.Y8G("ngIf",a.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",a.loaderOperationShap)("loaderId",a.operationLoader),e.R7$(9),e.R50("ngModel",a.form.expensesItemName),e.R7$(2),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(5),e.R50("ngModel",a.form.notes),e.R7$(3),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(4),e.R50("ngModel",a.form.isActive),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Oa(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",69),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let wa=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M){super(t,i,F,o,n,a,s),this.baseService=o,this.service=v,this.excelService=x,this.router=M,this.title="orderManagement.expensesItems.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.isResolveList=!0,this.configRoute()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),t}editModal(t,i,n="md"){this.isEditForm=!0,this.form=t,this.modalService.open(i,{centered:!0,size:n})}editEntity(){let t=this.mapForm(this.form);this.baseService.editExpensesItems(t.expensesItemCode,t).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.Delete(this.selectedRow[0].id).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(_e),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(fe.m),e.rXU(A.V),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-expenses-categories"]],features:[e.Vt3],decls:25,vars:19,consts:[["tableMaster",""],["whatsappModal",""],["deleteModal",""],["formEntity","ngForm"],["expensesItemName","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","orderManagement.expensesItems.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-md-12","mb-3"],["for","expensesItemName","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","expensesItemName","type","text","required","","id","expensesItemName",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","notes","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","notes","rows","3","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","isActive","translate","",1,"fw-bold","form-label","d-block"],["id","isActive","name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",6),e.nI1(1,"translate"),e.j41(2,"div",7)(3,"div",8)(4,"div",9)(5,"base-filter",10),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const s=e.sdS(22);return e.Njj(n.openModalTitle(s))}),e.qex(6,11),e.j41(7,"div",12)(8,"div",13)(9,"input",14),e.nI1(10,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.filterValue,s)||(n.pagination.filterValue=s),e.Njj(s)}),e.k0s(),e.nrm(11,"i",15),e.k0s()(),e.bVm(),e.k0s(),e.j41(12,"div",16),e.nrm(13,"ngx-ui-loader",17),e.j41(14,"div",18)(15,"p-table",19,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(17,xa,13,0,"ng-template",20)(18,Sa,17,11,"ng-template",21),e.k0s()(),e.DNE(19,Ia,2,0,"div",22)(20,ka,6,8,"div",23),e.k0s()()()(),e.DNE(21,Da,35,11,"ng-template",null,1,e.C5r)(23,Oa,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,15,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,17,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.BC,d.cb,d.YS,d.vS,d.cV,p.s5,pe.m,U.b,c.Mm,f.XI,J.Ei,f.Tg,de.HW,j.Cv,Y.m,W.m,c.D9],encapsulation:2})}}return r})();var Te=m(56131);let Va=(()=>{class r extends Te.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(C.Ix),e.KVO(_e),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Se=m(99437),Ie=m(18810);let ve=(()=>{class r extends ue.d{constructor(t){super(t,ne.c.apiUrl+"ExpensesOrder/")}Delete(t){return this.http.delete(`${this.baseUrl}Delete/${t}`)}editExpensesItems(t,i){return this.http.put(this.baseUrl+"Edit/"+t,i)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(be.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Ga(r,l){1&r&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," orderManagement.expensesOrders.code "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," orderManagement.expensesOrders.expensesItem "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",31),e.EFF(11," orderManagement.expensesOrders.date "),e.k0s(),e.j41(12,"th",32),e.nrm(13,"i",31),e.EFF(14," orderManagement.expensesOrders.price "),e.k0s(),e.j41(15,"th",32),e.nrm(16,"i",31),e.EFF(17," orderManagement.expensesOrders.creationUser "),e.k0s(),e.j41(18,"th",32),e.nrm(19,"i",31),e.EFF(20," orderManagement.expensesOrders.creationDate "),e.k0s(),e.j41(21,"th",32),e.nrm(22,"i",31),e.EFF(23," orderManagement.expensesOrders.attachFile "),e.k0s(),e.nrm(24,"th",33),e.k0s())}function La(r,l){if(1&r&&(e.nrm(0,"i",41),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",42),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",43),e.EFF(9)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.createdUserName," ")}}function $a(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",34)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"td"),e.EFF(16),e.k0s(),e.j41(17,"td")(18,"a",35),e.EFF(19," orderManagement.expensesOrders.show "),e.k0s()(),e.j41(20,"td"),e.DNE(21,La,10,9,"ng-template",null,3,e.C5r),e.nrm(23,"i",36),e.j41(24,"button",37),e.nI1(25,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(22);return e.Njj(a.editModal(n,o))}),e.nrm(26,"i",38),e.k0s(),e.j41(27,"button",39),e.nI1(28,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(24);return e.Njj(a.openModal(n.expensesOrderCode,o))}),e.nrm(29,"i",40),e.k0s()()()}if(2&r){const t=l.$implicit,i=l.rowIndex,n=e.sdS(22),a=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.expensesOrderCode),e.R7$(2),e.JRh(t.expensesItemName),e.R7$(2),e.JRh(e.i5U(9,11,t.expensesDate,"dd-MM-yyyy")),e.R7$(3),e.JRh(t.expensesValue),e.R7$(2),e.JRh(e.i5U(14,14,t.createdDate,"dd-MM-yyyy")),e.R7$(3),e.JRh(t.createdUserName),e.R7$(2),e.FS9("href",a.serverPath+t.attachFilePath,e.B4B),e.R7$(5),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(25,17,"general.edit")),e.R7$(3),e.FS9("pTooltip",e.bMT(28,19,"general.delete"))}}function Ba(r,l){1&r&&(e.j41(0,"div",44),e.EFF(1," general.table.noData "),e.k0s())}function Aa(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",45)(1,"div",46),e.nrm(2,"ngb-pagination-info",47),e.j41(3,"table-length",48),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",49)(5,"ngb-pagination",50),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Xa(r,l){1&r&&(e.j41(0,"span",87),e.EFF(1,"general.action.register "),e.k0s())}function Ua(r,l){1&r&&(e.j41(0,"span",87),e.EFF(1,"general.action.edit "),e.k0s())}function Ya(r,l){1&r&&(e.j41(0,"div",88),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Pa(r,l){1&r&&(e.j41(0,"div",88),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function za(r,l){1&r&&(e.j41(0,"div",88),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Ha(r,l){1&r&&(e.j41(0,"div",88),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function Ja(r,l){if(1&r){const t=e.RV6();e.j41(0,"i",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.k0s()}}function Qa(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",51)(1,"h4",52),e.DNE(2,Xa,2,0,"span",53)(3,Ua,2,0,"span",53),e.nrm(4,"span",54),e.k0s(),e.j41(5,"button",55),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",56,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.nrm(8,"ngx-ui-loader",21),e.j41(9,"div",57)(10,"div",58)(11,"div",59)(12,"div",11)(13,"div",60)(14,"div",11)(15,"div",61)(16,"label",62),e.EFF(17,"orderManagement.expensesOrders.expensesItem"),e.k0s(),e.j41(18,"ng-select",63,5),e.nI1(20,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesItemCode,n)||(a.form.expensesItemCode=n),e.Njj(n)}),e.k0s(),e.DNE(21,Ya,2,0,"div",64),e.k0s(),e.j41(22,"div",61)(23,"label",65),e.EFF(24,"orderManagement.expensesOrders.price"),e.k0s(),e.j41(25,"div",66)(26,"input",67,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesValue,n)||(a.form.expensesValue=n),e.Njj(n)}),e.k0s(),e.DNE(28,Pa,2,0,"div",64),e.k0s()(),e.j41(29,"div",61)(30,"label",68),e.EFF(31,"orderManagement.expensesOrders.date"),e.k0s(),e.j41(32,"div",66)(33,"input",69,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesDate,n)||(a.form.expensesDate=n),e.Njj(n)}),e.k0s(),e.DNE(35,za,2,0,"div",64),e.k0s()(),e.j41(36,"div",61)(37,"label",70),e.EFF(38,"orderManagement.expensesOrders.notes"),e.k0s(),e.j41(39,"div",66)(40,"textarea",71,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(42,"                                "),e.k0s(),e.DNE(43,Ha,2,0,"div",64),e.k0s()()()(),e.j41(44,"div",60)(45,"div",72)(46,"label",62),e.EFF(47,"orderManagement.expensesOrders.attachFile"),e.k0s(),e.j41(48,"div",73)(49,"label",74),e.bIt("click",function(){e.eBV(t);const n=e.sdS(54);return e.Njj(n.click())}),e.j41(50,"div",75)(51,"div",76),e.nrm(52,"i",77),e.k0s()()(),e.j41(53,"input",78,9),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileChanged(n))}),e.k0s()(),e.j41(55,"div",79)(56,"div",80),e.DNE(57,Ja,1,0,"i",81),e.j41(58,"div",82),e.nrm(59,"img",83),e.k0s()()()()()(),e.j41(60,"div",84),e.nrm(61,"button",85),e.j41(62,"button",86),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.sdS(7),i=e.sdS(19),n=e.sdS(27),a=e.sdS(34),o=e.sdS(41),s=e.XpG();e.R7$(2),e.Y8G("ngIf",!s.isEditForm),e.R7$(),e.Y8G("ngIf",s.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(10),e.FS9("placeholder",e.bMT(20,18,"orderManagement.expensesOrders.expensesItem")),e.Y8G("items",s.expensesItems),e.R50("ngModel",s.form.expensesItemCode),e.R7$(3),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(5),e.R50("ngModel",s.form.expensesValue),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(5),e.R50("ngModel",s.form.expensesDate),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(5),e.R50("ngModel",s.form.notes),e.R7$(3),e.Y8G("ngIf",o.invalid&&o.touched),e.R7$(14),e.Y8G("ngIf",s.image.path),e.R7$(2),e.Y8G("src",s.image.isApi?s.serverPath+s.image.path:s.image.path,e.B4B),e.R7$(2),e.Y8G("disabled",!t.valid||!s.image.path)}}function qa(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",90),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let Wa=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I){super(t,i,v,o,n,a,F),this.baseService=o,this.expensesCategoriesService=s,this.service=x,this.excelService=M,this._formDataService=S,this.router=I,this.title="orderManagement.expensesOrders.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.image={isApi:!1,path:""},this.form={image:""},this.isResolveList=!0,this.serverPath=ne.c.mediaUrl,this.configRoute(),this.getExpensesItems()}configRoute(){this.routerActive.data.pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}getExpensesItems(){this.expensesCategoriesService.getDropDown().subscribe({next:t=>{this.expensesItems=t.data}})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),t}editModal(t,i,n="lg"){this.isEditForm=!0,this.form=t,this.image={isApi:!0,path:t.attachFilePath},this.modalService.open(i,{centered:!0,size:n})}registerEntity(){let t=this._formDataService.formatFormData(this.form);this.baseService.register(t).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,Se.W)(i=>(0,Ie.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this._formDataService.formatFormData(this.form);this.baseService.editExpensesItems(this.form.expensesOrderCode,t).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.Delete(this.selectedRow[0].id).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}onFileChanged(t){if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let n=0;n<i;n++){let a=new FileReader;this.form.image=t.target.files.item(n),a.onload=o=>{this.image={isApi:!1,path:o.target.result}},a.readAsDataURL(t.target.files[n])}}}removeImage(){console.log(),this.form.image="",this.image={id:0,path:""}}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(ve),e.rXU(_e),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(fe.m),e.rXU(A.V),e.rXU(me.Q),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-expenses-orders"]],features:[e.Vt3],decls:25,vars:19,consts:[["tableMaster",""],["whatsappModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["expensesItemCode","ngModel"],["expensesValue","ngModel"],["expensesDate","ngModel"],["notes","ngModel"],["FileInput",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["target","_blank","translate","",3,"href"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","orderManagement.expensesOrders.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-lg-6"],[1,"col-12","col-md-12","mb-3"],["for","expensesItemCode","translate","",1,"fw-bold","form-label","required"],["name","expensesItemCode","bindValue","code","bindLabel","name","id","expensesItemCode","required","",3,"ngModelChange","items","placeholder","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","expensesValue","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","expensesValue","type","number","required","","id","expensesValue",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","expensesDate","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","expensesDate","type","date","required","","id","expensesDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","rows","3","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","justify-content-center","w-100"],[1,"avatar-xl-custom","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-xl-custom","h-auto",3,"src"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.nrm(0,"app-breadcrumbs",10),e.nI1(1,"translate"),e.j41(2,"div",11)(3,"div",12)(4,"div",13)(5,"base-filter",14),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const s=e.sdS(22);return e.Njj(n.openModalTitle(s,"lg"))}),e.qex(6,15),e.j41(7,"div",16)(8,"div",17)(9,"input",18),e.nI1(10,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.filterValue,s)||(n.pagination.filterValue=s),e.Njj(s)}),e.k0s(),e.nrm(11,"i",19),e.k0s()(),e.bVm(),e.k0s(),e.j41(12,"div",20),e.nrm(13,"ngx-ui-loader",21),e.j41(14,"div",22)(15,"p-table",23,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(17,Ga,25,0,"ng-template",24)(18,$a,30,21,"ng-template",25),e.k0s()(),e.DNE(19,Ba,2,0,"div",26)(20,Aa,6,8,"div",27),e.k0s()()()(),e.DNE(21,Qa,63,20,"ng-template",null,1,e.C5r)(23,qa,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,15,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,17,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,p.s5,pe.m,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,p.md,Y.m,W.m,g.vh,c.D9],encapsulation:2})}}return r})(),Ka=(()=>{class r extends Te.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(C.Ix),e.KVO(ve),e.KVO(R.u))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Za(r,l){1&r&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.expensesOrders.code "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.expensesOrders.expensesItem "),e.k0s(),e.j41(9,"th",31),e.nrm(10,"i",30),e.EFF(11," orderManagement.expensesOrders.date "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",30),e.EFF(14," orderManagement.expensesOrders.price "),e.k0s(),e.j41(15,"th",31),e.nrm(16,"i",30),e.EFF(17," orderManagement.expensesOrders.creationUser "),e.k0s(),e.j41(18,"th",31),e.nrm(19,"i",30),e.EFF(20," orderManagement.expensesOrders.creationDate "),e.k0s(),e.j41(21,"th",31),e.nrm(22,"i",30),e.EFF(23," orderManagement.expensesOrders.attachFile "),e.k0s(),e.nrm(24,"th",32),e.k0s())}function es(r,l){if(1&r&&(e.nrm(0,"i",40),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",41),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",42),e.EFF(9)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.creationTime,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.createdUserName," ")}}function ts(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr",33)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.nI1(16,"date"),e.k0s(),e.j41(17,"td")(18,"a",34),e.EFF(19," orderManagement.expensesOrders.show "),e.k0s()(),e.j41(20,"td"),e.DNE(21,es,10,9,"ng-template",null,3,e.C5r),e.nrm(23,"i",35),e.j41(24,"button",36),e.nI1(25,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(20);return e.Njj(a.editModal(n,o))}),e.nrm(26,"i",37),e.k0s(),e.j41(27,"button",38),e.nI1(28,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(22);return e.Njj(a.openModal(n.expensesOrderCode,o))}),e.nrm(29,"i",39),e.k0s()()()}if(2&r){const t=l.$implicit,i=l.rowIndex,n=e.sdS(22),a=e.XpG();e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.expensesOrderCode),e.R7$(2),e.JRh(t.expensesItemName),e.R7$(2),e.JRh(e.i5U(9,11,t.expensesDate,"dd-MM-yyyy")),e.R7$(3),e.JRh(t.expensesValue),e.R7$(2),e.JRh(t.createdUserName),e.R7$(2),e.JRh(e.i5U(16,14,t.createdDate,"dd-MM-yyyy")),e.R7$(3),e.FS9("href",a.serverPath+t.attachFilePath,e.B4B),e.R7$(5),e.Y8G("ngbTooltip",n),e.R7$(),e.FS9("pTooltip",e.bMT(25,17,"general.edit")),e.R7$(3),e.FS9("pTooltip",e.bMT(28,19,"general.delete"))}}function ns(r,l){1&r&&(e.j41(0,"div",43),e.EFF(1," general.table.noData "),e.k0s())}function is(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",44)(1,"div",45),e.nrm(2,"ngb-pagination-info",46),e.j41(3,"table-length",47),e.bIt("lengthChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",48)(5,"ngb-pagination",49),e.bIt("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.pagination.pageNumber,n)||(a.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function rs(r,l){1&r&&(e.j41(0,"span",86),e.EFF(1,"general.action.register "),e.k0s())}function as(r,l){1&r&&(e.j41(0,"span",86),e.EFF(1,"general.action.edit "),e.k0s())}function ss(r,l){1&r&&(e.j41(0,"div",87),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function os(r,l){1&r&&(e.j41(0,"div",87),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ls(r,l){1&r&&(e.j41(0,"div",87),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function ds(r,l){1&r&&(e.j41(0,"div",87),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function cs(r,l){if(1&r){const t=e.RV6();e.j41(0,"i",88),e.bIt("click",function(){e.eBV(t);const n=e.XpG(2);return e.Njj(n.removeImage())}),e.k0s()}}function ms(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",50)(1,"h4",51),e.DNE(2,rs,2,0,"span",52)(3,as,2,0,"span",52),e.nrm(4,"span",53),e.k0s(),e.j41(5,"button",54),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"form",55,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.onSubmit())}),e.nrm(8,"ngx-ui-loader",20),e.j41(9,"div",56)(10,"div",57)(11,"div",58)(12,"div",10)(13,"div",59)(14,"div",10)(15,"div",60)(16,"label",61),e.EFF(17,"orderManagement.expensesOrders.expensesItem"),e.k0s(),e.j41(18,"ng-select",62,5),e.nI1(20,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesItemCode,n)||(a.form.expensesItemCode=n),e.Njj(n)}),e.k0s(),e.DNE(21,ss,2,0,"div",63),e.k0s(),e.j41(22,"div",60)(23,"label",64),e.EFF(24,"orderManagement.expensesOrders.price"),e.k0s(),e.j41(25,"div",65)(26,"input",66,6),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesValue,n)||(a.form.expensesValue=n),e.Njj(n)}),e.k0s(),e.DNE(28,os,2,0,"div",63),e.k0s()(),e.j41(29,"div",60)(30,"label",67),e.EFF(31,"orderManagement.expensesOrders.date"),e.k0s(),e.j41(32,"div",65)(33,"input",68,7),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.expensesDate,n)||(a.form.expensesDate=n),e.Njj(n)}),e.k0s(),e.DNE(35,ls,2,0,"div",63),e.k0s()(),e.j41(36,"div",60)(37,"label",69),e.EFF(38,"orderManagement.expensesOrders.notes"),e.k0s(),e.j41(39,"div",65)(40,"textarea",70,8),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.notes,n)||(a.form.notes=n),e.Njj(n)}),e.EFF(42,"                                "),e.k0s(),e.DNE(43,ds,2,0,"div",63),e.k0s()()()(),e.j41(44,"div",59)(45,"div",71)(46,"label",61),e.EFF(47,"orderManagement.expensesOrders.attachFile"),e.k0s(),e.j41(48,"div",72)(49,"label",73),e.bIt("click",function(){e.eBV(t);const n=e.sdS(54);return e.Njj(n.click())}),e.j41(50,"div",74)(51,"div",75),e.nrm(52,"i",76),e.k0s()()(),e.j41(53,"input",77,9),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileChanged(n))}),e.k0s()(),e.j41(55,"div",78)(56,"div",79),e.DNE(57,cs,1,0,"i",80),e.j41(58,"div",81),e.nrm(59,"img",82),e.k0s()()()()()(),e.j41(60,"div",83),e.nrm(61,"button",84),e.j41(62,"button",85),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.sdS(7),i=e.sdS(19),n=e.sdS(27),a=e.sdS(34),o=e.sdS(41),s=e.XpG();e.R7$(2),e.Y8G("ngIf",!s.isEditForm),e.R7$(),e.Y8G("ngIf",s.isEditForm),e.R7$(5),e.Y8G("hasProgressBar",!1)("fgsType",s.loaderOperationShap)("loaderId",s.operationLoader),e.R7$(10),e.FS9("placeholder",e.bMT(20,18,"orderManagement.expensesOrders.expensesItem")),e.Y8G("items",s.expensesItems),e.R50("ngModel",s.form.expensesItemCode),e.R7$(3),e.Y8G("ngIf",i.invalid&&i.touched),e.R7$(5),e.R50("ngModel",s.form.expensesValue),e.R7$(2),e.Y8G("ngIf",n.invalid&&n.touched),e.R7$(5),e.R50("ngModel",s.form.expensesDate),e.R7$(2),e.Y8G("ngIf",a.invalid&&a.touched),e.R7$(5),e.R50("ngModel",s.form.notes),e.R7$(3),e.Y8G("ngIf",o.invalid&&o.touched),e.R7$(14),e.Y8G("ngIf",s.image.path),e.R7$(2),e.Y8G("src",s.image.isApi?s.serverPath+s.image.path:s.image.path,e.B4B),e.R7$(2),e.Y8G("disabled",!t.valid||!s.image.path)}}function ps(r,l){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",89),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let gs=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I){super(t,i,v,o,n,a,F),this.baseService=o,this.expensesCategoriesService=s,this.service=x,this.excelService=M,this._formDataService=S,this.router=I,this.title="orderManagement.expensesOrders.title",this.submitted=!1,this.cities={},this.channels={},this.leadTypes={},this.image={isApi:!1,path:""},this.form={image:""},this.isResolveList=!0,this.serverPath=ne.c.mediaUrl,this.loadentities(),this.getExpensesItems()}getExpensesItems(){this.expensesCategoriesService.getDropDown().subscribe({next:t=>{this.expensesItems=t.data}})}onSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}onSearch(){this.ngxLoader.startLoader(this.searchLoader),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(this.searchLoader),this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(this.searchLoader),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(this.searchLoader),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({title:i.title,body:i.body,type:i.type,isActive:this.getTranslationText("general.table.active")})}),t}editModal(t,i,n="lg"){this.isEditForm=!0,this.form=t,this.image={isApi:!0,path:t.attachFilePath},this.modalService.open(i,{centered:!0,size:n})}registerEntity(){let t=this._formDataService.formatFormData(this.form);this.baseService.register(t).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,Se.W)(i=>(0,Ie.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this._formDataService.formatFormData(this.form);this.baseService.editExpensesItems(this.form.expensesOrderCode,t).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(this.deleteLoader),this.baseService.Delete(this.selectedRow[0].id).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.deleteLoader))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}onFileChanged(t){if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let n=0;n<i;n++){let a=new FileReader;this.form.image=t.target.files.item(n),a.onload=o=>{this.image={isApi:!1,path:o.target.result}},a.readAsDataURL(t.target.files[n])}}}removeImage(){console.log(),this.form.image="",this.image={id:0,path:""}}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(R.u),e.rXU(g.vh),e.rXU(ve),e.rXU(_e),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(fe.m),e.rXU(A.V),e.rXU(me.Q),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-team-expenses-orders"]],features:[e.Vt3],decls:23,vars:16,consts:[["tableMaster",""],["whatsappModal",""],["deleteModal",""],["tooltipContent",""],["formEntity","ngForm"],["expensesItemCode","ngModel"],["expensesValue","ngModel"],["expensesDate","ngModel"],["notes","ngModel"],["FileInput",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-6","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","name","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["translate","",2,"width","20%"],[1,"fs-5"],["target","_blank","translate","",3,"href"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-info","edit-list","mx-2",3,"click","pTooltip"],[1,"ri-pencil-fill","align-bottom","mx-1"],["tooltipPosition","top",1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click","pTooltip"],[1,"ri-delete-bin-5-fill","align-bottom"],[1,"ri-history-fill","text-warning"],[1,"ri-history-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["class","fw-bold fs-4","translate","",4,"ngIf"],["translate","orderManagement.expensesOrders.title",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"ngSubmit"],[1,"modal-content"],[1,"modal-body"],[1,"mx-2"],[1,"col-12","col-lg-6"],[1,"col-12","col-md-12","mb-3"],["for","expensesItemCode","translate","",1,"fw-bold","form-label","required"],["name","expensesItemCode","bindValue","code","bindLabel","name","id","expensesItemCode","required","",3,"ngModelChange","items","placeholder","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","expensesValue","translate","",1,"fw-bold","form-label","required"],[1,"input-group"],["InputTirmFilter","","name","expensesValue","type","number","required","","id","expensesValue",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","expensesDate","translate","",1,"fw-bold","form-label","required"],["InputTirmFilter","","name","expensesDate","type","date","required","","id","ExpensesDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","rows","3","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"position-relative","d-inline-block"],[1,"position-absolute","top-100","start-100","translate-middle"],["placement","right","ngbTooltip","Select Image",1,"mb-0",3,"click"],[1,"avatar-xs"],[1,"avatar-title","bg-light","border","rounded-circle","text-muted","cursor-pointer"],[1,"ri-image-fill"],["value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","justify-content-center","w-100"],[1,"avatar-xl-custom","mx-2","position-relative"],["class","position-absolute bx bx-x-circle text-white","style","background: red; top: 1px; right: -4px; font-size: 1rem;\n                                                border-radius: 50% ",3,"click",4,"ngIf"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-xl-custom","h-auto",3,"src"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","",1,"fw-bold","fs-4"],["translate","",1,"text-danger","text-center"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",10)(1,"div",11)(2,"div",12)(3,"base-filter",13),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())})("addNew",function(){e.eBV(a);const s=e.sdS(20);return e.Njj(n.openModalTitle(s,"lg"))}),e.qex(4,14),e.j41(5,"div",15)(6,"div",16)(7,"input",17),e.nI1(8,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.filterValue,s)||(n.pagination.filterValue=s),e.Njj(s)}),e.k0s(),e.nrm(9,"i",18),e.k0s()(),e.bVm(),e.k0s(),e.j41(10,"div",19),e.nrm(11,"ngx-ui-loader",20),e.j41(12,"div",21)(13,"p-table",22,0),e.bIt("onLazyLoad",function(s){return e.eBV(a),e.Njj(n.tableChange(s))})("selectionChange",function(s){return e.eBV(a),e.Njj(n.onSelectionChange(s))}),e.DNE(15,Za,25,0,"ng-template",23)(16,ts,30,21,"ng-template",24),e.k0s()(),e.DNE(17,ns,2,0,"div",25)(18,is,6,8,"div",26),e.k0s()()()(),e.DNE(19,ms,63,20,"ng-template",null,1,e.C5r)(21,ps,1,0,"ng-template",null,2,e.C5r)}2&i&&(e.R7$(3),e.Y8G("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,14,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,p.s5,U.b,c.Mm,f.XI,J.Ei,f.Tg,j.Cv,O.vr,p.md,Y.m,W.m,g.vh,c.D9],encapsulation:2})}}return r})(),_s=(()=>{class r extends ue.d{constructor(t){super(t,ne.c.apiUrl+"OrderAssign/")}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(be.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const hs=["FileInput"],us=()=>["assigned.changeStatus"],bs=()=>["assigned.finishedOrder"];function fs(r,l){if(1&r&&(e.j41(0,"span",60),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function vs(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Cs(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function js(r,l){if(1&r&&(e.qex(0),e.j41(1,"span",61),e.EFF(2),e.k0s(),e.bVm()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t)}}function Fs(r,l){if(1&r){const t=e.RV6();e.j41(0,"a",62),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(29);return e.Njj(a.openChangeStatusModal(n,o))}),e.nrm(1,"i",63)(2,"span",64),e.k0s()}}function xs(r,l){if(1&r){const t=e.RV6();e.j41(0,"a",65),e.bIt("click",function(){e.eBV(t);const n=e.XpG().$implicit,a=e.XpG(),o=e.sdS(31);return a.GetOrderServiceAndPayment(n),e.Njj(a.openChangeStatusModal(n,o,"xl"))}),e.nrm(1,"i",66)(2,"span",67),e.k0s()}}function Ms(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",27)(1,"div",14)(2,"div",16)(3,"div",28)(4,"button",29),e.nI1(5,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(35);return e.Njj(a.OpenOrderTimeLineModel(n,o,"lg"))}),e.nrm(6,"i",30),e.k0s(),e.j41(7,"button",31),e.nI1(8,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(37);return e.Njj(a.OpenOrderTimeLineModel(n.orderCode,o,"md"))}),e.nrm(9,"i",32),e.k0s()(),e.j41(10,"div",33)(11,"p",34),e.nrm(12,"i",35),e.EFF(13),e.nI1(14,"date"),e.k0s(),e.j41(15,"p",36),e.EFF(16),e.nI1(17,"translate"),e.k0s()(),e.j41(18,"a",37)(19,"h5",38),e.nrm(20,"i",39),e.EFF(21),e.k0s()(),e.j41(22,"div",40)(23,"div",41),e.nrm(24,"i",42),e.EFF(25),e.DNE(26,fs,2,1,"span",43),e.k0s(),e.j41(27,"div"),e.nrm(28,"i",44),e.j41(29,"span",45),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(30),e.nrm(31,"i",46),e.k0s()()(),e.nrm(32,"hr"),e.j41(33,"div",47)(34,"div"),e.nrm(35,"i",48),e.DNE(36,vs,3,1,"ng-container",49),e.k0s()(),e.j41(37,"div",50)(38,"span",51),e.EFF(39,"orderManagement.order.teamStatus"),e.k0s(),e.EFF(40,": "),e.j41(41,"span"),e.EFF(42),e.nI1(43,"translate"),e.k0s()(),e.j41(44,"div",52)(45,"div",53)(46,"h6"),e.nrm(47,"i",54),e.EFF(48),e.nI1(49,"translate"),e.k0s(),e.DNE(50,Cs,3,1,"ng-container",49),e.k0s(),e.j41(51,"div",55)(52,"h6"),e.nrm(53,"i",56),e.EFF(54),e.nI1(55,"translate"),e.k0s(),e.DNE(56,js,3,1,"ng-container",49),e.k0s()(),e.j41(57,"div",57),e.DNE(58,Fs,3,0,"a",58)(59,xs,3,0,"a",59),e.k0s()()()()}if(2&r){const t=l.$implicit,i=e.XpG();e.R7$(4),e.FS9("pTooltip",e.bMT(5,20,"orderManagement.order.trackOrder")),e.R7$(3),e.FS9("pTooltip",e.bMT(8,22,"orderManagement.order.rollBackAssign")),e.R7$(6),e.SpI(" ",e.i5U(14,24,t.visitDate,"yyyy-MM-dd")," "),e.R7$(3),e.Lme(" ",e.bMT(17,27,"orderManagement.order.orderCode"),": #SO#",t.orderCode," "),e.R7$(5),e.SpI(" ",t.agentName," "),e.R7$(4),e.SpI(" ",t.cityName," "),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(4),e.SpI("",t.mobile," "),e.R7$(6),e.Y8G("ngForOf",i.getServices(t.services)),e.R7$(5),e.ZvI("badge ",i.getTeamStatus(t.teamStatus)," bg-primary-subtle text-primary mx-1"),e.R7$(),e.SpI(" ",e.bMT(43,29,"orderManagement.order."+t.teamStatusName),""),e.R7$(6),e.SpI(" ",e.bMT(49,31,"orderManagement.order.assignTo"),""),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.teamNames)),e.R7$(4),e.SpI(" ",e.bMT(55,33,"orderManagement.order.workTimes"),""),e.R7$(2),e.Y8G("ngForOf",i.getTimes(t.workTimes)),e.R7$(2),e.Y8G("hasPermission",e.lJ4(35,us)),e.R7$(),e.Y8G("hasPermission",e.lJ4(36,bs))}}function Ts(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",76)(1,"label",84),e.EFF(2,"orderManagement.order.cancelReasonName"),e.k0s(),e.j41(3,"ng-select",85),e.nI1(4,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(2);return e.DH7(a.form.cancelReasonCode,n)||(a.form.cancelReasonCode=n),e.Njj(n)}),e.k0s()()}if(2&r){const t=e.XpG(2);e.R7$(3),e.FS9("placeholder",e.bMT(4,4,"orderManagement.order.cancelReasonName")),e.Y8G("items",t.cancelReasons)("multiple",!1),e.R50("ngModel",t.form.cancelReasonCode)}}function Ss(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",68)(1,"div",69)(2,"h4",70),e.nrm(3,"span",71),e.k0s(),e.j41(4,"button",72),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(5,"div",73),e.nrm(6,"ngx-ui-loader",74),e.j41(7,"form",75,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.changeStatus())}),e.j41(9,"div",11)(10,"div",76)(11,"label",77),e.EFF(12,"orderManagement.order.changeTeamStatus"),e.k0s(),e.j41(13,"ng-select",78),e.nI1(14,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.teamStatus,n)||(a.form.teamStatus=n),e.Njj(n)}),e.k0s()(),e.DNE(15,Ts,5,6,"div",79),e.j41(16,"div",76)(17,"label",77),e.EFF(18,"orderManagement.order.teamStatusNotes"),e.k0s(),e.j41(19,"textarea",80),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.form.teamStatusNotes,n)||(a.form.teamStatusNotes=n),e.Njj(n)}),e.k0s()()(),e.j41(20,"div",38)(21,"button",81),e.nrm(22,"i",82)(23,"span",83),e.k0s()()()()()}if(2&r){const t=e.sdS(8),i=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",i.loaderOperationShap)("loaderId",i.operationLoader),e.R7$(7),e.FS9("placeholder",e.bMT(14,10,"orderManagement.order.changeTeamStatus")),e.Y8G("items",i.statusList)("multiple",!1),e.R50("ngModel",i.form.teamStatus),e.R7$(2),e.Y8G("ngIf",3==i.form.teamStatus),e.R7$(4),e.R50("ngModel",i.form.teamStatusNotes),e.R7$(2),e.Y8G("disabled",!t.valid)}}function Is(r,l){if(1&r&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.price," ")}}function ks(r,l){if(1&r){const t=e.RV6();e.j41(0,"span",127)(1,"input",128),e.nI1(2,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG(3);return e.DH7(a.editPrice,n)||(a.editPrice=n),e.Njj(n)}),e.k0s(),e.j41(3,"button",129),e.bIt("click",function(){e.eBV(t);const n=e.XpG().index,a=e.XpG(2);return e.Njj(a.editEachPrice(n))}),e.nrm(4,"i",130),e.k0s(),e.j41(5,"button",131),e.bIt("click",function(){e.eBV(t);const n=e.XpG(3);return e.Njj(n.isEditPrice=!1)}),e.nrm(6,"i",132),e.k0s()()}if(2&r){const t=e.XpG(3);e.R7$(),e.FS9("placeholder",e.bMT(2,2,"orderManagement.order.notes")),e.R50("ngModel",t.editPrice)}}function ys(r,l){if(1&r){const t=e.RV6();e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.DNE(4,Is,2,1,"span",102)(5,ks,7,4,"span",123),e.k0s(),e.j41(6,"td"),e.EFF(7),e.k0s(),e.j41(8,"td")(9,"button",124),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return e.Njj(a.deleteService(n))}),e.nrm(10,"i",125),e.k0s(),e.j41(11,"button",97),e.bIt("click",function(){const n=e.eBV(t).index,a=e.XpG(2);return a.isEditPrice=!0,e.Njj(a.editPrice=a.finishOrderForm.invoiceService[n].price)}),e.nrm(12,"i",126),e.k0s()()()}if(2&r){const t=l.$implicit,i=e.XpG(2);e.R7$(2),e.JRh(t.service),e.R7$(2),e.Y8G("ngIf",!i.isEditPrice),e.R7$(),e.Y8G("ngIf",i.isEditPrice),e.R7$(2),e.JRh(t.notes)}}function Rs(r,l){1&r&&(e.j41(0,"tr")(1,"td",133),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Es(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",134)(1,"i",135),e.bIt("click",function(){const n=e.eBV(t),a=n.$implicit,o=n.index,s=e.XpG(2);return e.Njj(s.removeImage(a.id,o))}),e.k0s(),e.j41(2,"div",136),e.nrm(3,"img",137),e.k0s()()}if(2&r){const t=l.$implicit,i=e.XpG(2);e.R7$(3),e.Y8G("src",0==t.id?t.path:i.serverPath+t.path,e.B4B)}}function Ns(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",69)(1,"h4",70),e.nrm(2,"span",86),e.k0s(),e.j41(3,"button",72),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"div",73)(5,"form",null,5),e.nrm(7,"ngx-ui-loader",74),e.j41(8,"div",87)(9,"div",73)(10,"div",88)(11,"div",89)(12,"div",90)(13,"label",91),e.EFF(14,"orderManagement.order.services"),e.k0s()(),e.j41(15,"div",92)(16,"ng-select",93,6),e.nI1(18,"translate"),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.setService(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.serviceCode,n)||(a.finishOrderForm.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(19,"div",92)(20,"div",94)(21,"input",95,7),e.nI1(23,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.note,n)||(a.finishOrderForm.note=n),e.Njj(n)}),e.k0s()()(),e.j41(24,"div",96)(25,"button",97),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(26,"i",98),e.k0s()(),e.j41(27,"div",99)(28,"table",100)(29,"thead")(30,"tr")(31,"th",101),e.EFF(32," orderManagement.order.service "),e.k0s(),e.j41(33,"th",101),e.EFF(34," orderManagement.order.price "),e.k0s(),e.j41(35,"th",101),e.EFF(36," orderManagement.order.notes "),e.k0s(),e.j41(37,"th",101),e.EFF(38," orderManagement.order.actions "),e.k0s()()(),e.j41(39,"tbody"),e.DNE(40,ys,13,4,"tr",49)(41,Rs,4,3,"tr",102),e.k0s()()()(),e.j41(42,"div",103)(43,"div",104)(44,"label",105),e.EFF(45,"orderManagement.order.assignedOrders.usedShow"),e.k0s(),e.j41(46,"div",106),e.EFF(47),e.k0s()()(),e.j41(48,"div",103)(49,"div",107)(50,"label",108),e.EFF(51,"orderManagement.order.assignedOrders.total"),e.k0s(),e.j41(52,"div",109),e.EFF(53),e.k0s()(),e.j41(54,"div",107)(55,"label",108),e.EFF(56,"orderManagement.order.assignedOrders.extraDiscount"),e.k0s(),e.j41(57,"div",109),e.EFF(58),e.k0s()(),e.j41(59,"div",107)(60,"label",108),e.EFF(61,"orderManagement.order.assignedOrders.tax"),e.k0s(),e.j41(62,"div",109),e.EFF(63),e.k0s()(),e.j41(64,"div",107)(65,"label",108),e.EFF(66,"orderManagement.order.assignedOrders.promotionDiscount"),e.k0s(),e.j41(67,"div",109),e.EFF(68),e.k0s()(),e.j41(69,"div",107)(70,"label",108),e.EFF(71,"orderManagement.order.assignedOrders.net"),e.k0s(),e.j41(72,"div",109),e.EFF(73),e.k0s()(),e.j41(74,"div",107)(75,"label",108),e.EFF(76,"orderManagement.order.assignedOrders.paid"),e.k0s(),e.j41(77,"div",109),e.EFF(78),e.k0s()(),e.j41(79,"div",107)(80,"label",110),e.EFF(81,"orderManagement.order.assignedOrders.paymentMethod"),e.k0s(),e.j41(82,"div",111)(83,"ng-select",112,8),e.nI1(85,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.paymentTypeCode,n)||(a.finishOrderForm.paymentTypeCode=n),e.Njj(n)}),e.k0s()()(),e.j41(86,"div",107)(87,"label",108),e.EFF(88,"orderManagement.order.assignedOrders.remain"),e.k0s(),e.j41(89,"div",109),e.EFF(90),e.k0s()(),e.j41(91,"div",113)(92,"label",108),e.EFF(93,"orderManagement.order.assignedOrders.notes"),e.k0s(),e.j41(94,"textarea",114,9),e.nI1(96,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.finishOrderForm.notes,n)||(a.finishOrderForm.notes=n),e.Njj(n)}),e.EFF(97,"                                "),e.k0s()(),e.j41(98,"div",115)(99,"label",108),e.EFF(100,"orderManagement.order.assignedOrders.notes"),e.k0s(),e.j41(101,"div",111)(102,"button",116),e.bIt("click",function(){e.eBV(t);const n=e.sdS(107);return e.Njj(n.click())}),e.EFF(103," orderManagement.order.assignedOrders.select "),e.k0s(),e.j41(104,"div",117),e.DNE(105,Es,4,1,"div",118),e.k0s()(),e.j41(106,"input",119,10),e.bIt("change",function(n){e.eBV(t);const a=e.XpG();return e.Njj(a.onFileChanged(n))}),e.k0s()()(),e.j41(108,"div",120)(109,"button",121),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.finishOrder())}),e.k0s(),e.j41(110,"button",122),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()()}if(2&r){const t=e.XpG();e.R7$(7),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.FS9("placeholder",e.bMT(18,27,"orderManagement.order.services")),e.Y8G("items",t.services)("multiple",!1),e.R50("ngModel",t.finishOrderForm.serviceCode),e.R7$(5),e.FS9("placeholder",e.bMT(23,29,"orderManagement.order.notes")),e.R50("ngModel",t.finishOrderForm.note),e.R7$(19),e.Y8G("ngForOf",t.finishOrderForm.invoiceService),e.R7$(),e.Y8G("ngIf",0==t.finishOrderForm.invoiceService.length),e.R7$(6),e.SpI(" ",t.finishOrderForm.usedShow||"--"," "),e.R7$(6),e.SpI(" ",t.finishOrderForm.total||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.discountAdd||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.tax||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.promotionDiscount||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.net||"0"," "),e.R7$(5),e.SpI(" ",t.finishOrderForm.paid||"0"," "),e.R7$(5),e.FS9("placeholder",e.bMT(85,31,"orderManagement.order.assignedOrders.paymentMethod")),e.Y8G("items",t.paymentTypes)("multiple",!1),e.R50("ngModel",t.finishOrderForm.paymentTypeCode),e.R7$(7),e.SpI(" ",t.finishOrderForm.remain||"--"," "),e.R7$(4),e.FS9("placeholder",e.bMT(96,33,"orderManagement.order.notes")),e.R50("ngModel",t.finishOrderForm.notes),e.R7$(11),e.Y8G("ngForOf",t.images),e.R7$(4),e.Y8G("disabled",!t.finishOrderForm.paymentTypeCode)}}function Ds(r,l){if(1&r&&e.nrm(0,"order-operation",138),2&r){const t=e.XpG();e.Y8G("isOrderEdit",!1)("isInner",!0)("orderCode",t.orderSelected)}}function Os(r,l){if(1&r){const t=e.RV6();e.j41(0,"order-timeline",139),e.bIt("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderSelected",t.orderSelected)}}function ws(r,l){if(1&r){const t=e.RV6();e.j41(0,"form",75,5),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.RollBack())}),e.nrm(2,"ngx-ui-loader",74),e.j41(3,"div",87)(4,"div",140)(5,"button",141),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",73)(7,"div",142),e.nrm(8,"lord-icon",143),e.j41(9,"div",144),e.nrm(10,"h3",145)(11,"p",146),e.k0s()(),e.j41(12,"div",147),e.nrm(13,"button",148),e.j41(14,"button",122),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let Vs=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P,le,Ce,je,ro){super(t,i,F,n,a,o,s),this.baseService=n,this.authDaamService=v,this.invoicesService=x,this._servicesService=M,this.excelService=S,this._formDataService=I,this.cityService=y,this.districtService=P,this.channelService=le,this.orderAssignService=Ce,this.cancelReasonService=je,this.router=ro,this.title="orderManagement.order.assignedOrders.title",this.titleOperation="orderManagement.order.assignedOrders.titleOperation",this.language=localStorage.getItem("language"),this.assignUsers=[],this.times=[],this.images=[],this.employees=[],this.searchForm={},this.finishOrderForm={invoiceService:[],invoiceAttachImages:[],usedShow:"",promotionDiscount:""},this.pagination={pageNumber:1,pageSize:100},this.isResolveList=!1,this.editPrice=0,this.isEditPrice=!1,this.formPassword={},this.OrderStatusEnum=Z,this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.serverPath=ne.c.mediaUrl,this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.services=[],this.statusList=[{id:0,name:"requestNoStart"},{id:1,name:"callLoggedBeforeArrival"},{id:2,name:"noAnswerStatusUpdated"},{id:3,name:"requestCancellation"},{id:4,name:"appointmentPostponed"},{id:5,name:"enRouteToCustomer"},{id:6,name:"arrivedAtLocation"},{id:7,name:"requestFinished"}],this.cancelReasons=[],this.loadentities(),this.GetCities(),this.GetServicesDropDown(),this.GetPaymentTypesDropDown(),this.GetChannels(),this.translateStatus(),this.GetReturnReasons()}GetReturnReasons(){this.cancelReasonService.getDropDown().subscribe(t=>{this.cancelReasons=t.data},t=>{console.log(t)})}translateStatus(){this.statusList.forEach(t=>{t.name=this.getTranslationText("orderManagement.order."+t.name)})}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.finishOrderForm.districtCode=null,this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader("assignLoader"),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999"}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999"):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("assignLoader"),this.pagination.statusFilter=this.OrderStatusEnum.Assigned,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("assignLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("assignLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({"Order Code":i.orderCode,"City Name":i.cityName,"District Name":i.districtName?i.districtName:"--","Agent Name":i.agentName,Mobile:i.mobile,"Assigned To":i.teamNames,Times:i.workTimes,Services:this.getServices(i.services),Status:this.translateService.instant(`orderManagement.order.${i.teamStatusName}`)})}),t}reCallOrder(){this.ngxLoader.startLoader(u.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,this.translateService.instant(this.title),[])}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}getTimes(t){return t.split(",")}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getTeamStatus(t){return 0==t||1==t||2==t?"bg-warning-subtle text-warning":3==t||4==t?"bg-danger-subtle text-danger":5==t||6==t?"bg-info-subtle text-info":"bg-success-subtle text-success"}openChangeStatusModal(t,i,n="md"){this.form={},this.form.teamStatus=t.teamStatus,this.finishOrderForm.orderCode=t.orderCode,this.orderSelected=t.orderCode,this.modalService.open(i,{centered:!0,size:n})}changeStatus(){this.ngxLoader.startLoader(this.operationLoader),this.baseService.ChangeTeamStatus({OrderCode:this.orderSelected,teamStatus:this.form.teamStatus,cancelReasonCode:this.form.cancelReasonCode,teamStatusNotes:this.form.teamStatusNotes}).pipe((0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{this.loadentities(),this.alertService.success(),this.modalService.dismissAll()},()=>{this.alertService.error()})}finishOrder(){this.ngxLoader.startLoader(u.Fq);let t=this._formDataService.formatFormData(this.finishOrderForm);this.invoicesService.SaveInvoice(t).subscribe(i=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll()},i=>{console.log(i),this.ngxLoader.stopLoader(u.Fq)})}GetServicesDropDown(){this._servicesService.getDropDown().subscribe(t=>{this.services=t.data},t=>{console.log(t)})}GetOrderServiceAndPayment(t){this.finishOrderDetails=t,this.finishOrderForm={...this.finishOrderForm,orderCode:t.orderCode,discountAdd:t.discountAmountAdd},console.log(this.finishOrderForm),console.log(this.finishOrderDetails,"this.finishOrderDetails"),this.invoicesService.GetOrderServiceAndPayment(t.orderCode).subscribe(n=>{this.finishOrderForm.invoiceService=[],this.OrderServiceAndPayment=n.data,n.data.forEach(a=>{this.finishOrderForm.invoiceService.push({serviceCode:a.serviceCode,service:a.serviceName,notes:a.notes,price:a.price,paidValue:a.paidValue})}),this.calculatePrices()},n=>{console.log(n)})}GetPaymentTypesDropDown(){this.baseService.GetOrderLookUp().subscribe(t=>{this.paymentTypes=t.data.paymentTypes},t=>{console.log(t)})}setService(t){console.log(t),this.finishOrderForm.service=t.name,this.finishOrderForm.price=t.price}addService(){this.finishOrderForm.invoiceService.push({service:this.finishOrderForm.service,serviceCode:this.finishOrderForm.serviceCode,price:this.finishOrderForm.price,notes:this.finishOrderForm.note,paidValue:0}),this.calculatePrices()}calculatePrices(){const t=this.finishOrderForm.discountAdd||0;let i=0,n=0;this.finishOrderForm.invoiceService.forEach(v=>{i+=+v.price,n+=+v.paidValue});let a=0,o=0,s=0;a=.15*(i-t),o=i-t+a,s=o-n,this.finishOrderForm={...this.finishOrderForm,net:o,tax:a,total:i,remain:s,paid:n}}editEachPrice(t){this.finishOrderForm.invoiceService[t].price=this.editPrice,this.isEditPrice=!1,this.calculatePrices()}deleteService(t){console.log(t),this.finishOrderForm.invoiceService.splice(t,1),this.calculatePrices()}onFileChanged(t){if(t.target.files&&t.target.files[0]){let i=t.target.files.length;for(let n=0;n<i;n++){let a=new FileReader;this.finishOrderForm.invoiceAttachImages.push({attachImage:t.target.files.item(n),type:"file"}),console.log(this.finishOrderForm.invoiceAttachImages),a.onload=o=>{this.images.push({id:0,path:o.target.result,completePath:o.target.result})},a.readAsDataURL(t.target.files[n])}}}removeImage(t,i){this.finishOrderForm.invoiceAttachImages.splice(i,1),this.images.splice(i,1)}getServices(t){return t.split("#")}OpenOrderTimeLineModel(t,i,n="md"){this.orderSelected=t,this.modalService.open(i,{centered:!0,size:n})}RollBack(){this.ngxLoader.startLoader(u.Fq),this.baseService.RemoveAssign(this.orderSelected).pipe((0,G.O)(),(0,L.c)(this.mainDelay),(0,$.Z)(),(0,h.Q)(this.notifier),(0,D.j)(()=>this.ngxLoader.stopLoader(u.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(X.Q),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(xe.U),e.rXU(Me.N),e.rXU(A.V),e.rXU(me.Q),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(_s),e.rXU(ie.e),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-team-assigned-orders"]],viewQuery:function(i,n){if(1&i&&e.GBs(hs,5),2&i){let a;e.mGM(a=e.lsd())&&(n.FileInput=a.first)}},features:[e.Vt3],decls:38,vars:24,consts:[["changeStatusModal",""],["finishOrderModal",""],["orderModel",""],["OrderTimeLineModel",""],["RollBackModal",""],["formEntity","ngForm"],["serviceCode","ngModel"],["note","ngModel"],["paymentTypeCode","ngModel"],["notes","ngModel"],["FileInput",""],[1,"row"],[1,"col-lg-12"],[1,"grid"],[1,"card"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"card-body"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["class","col-xxl-3 col-xl-4 col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xxl-3","col-xl-4","col-lg-4","col-md-6"],[1,"mb-4","d-flex","justify-content-between"],["tooltipPosition","top","type","button","data-bs-toggle","button","aria-pressed","true",1,"btn","btn-icon","btn-soft-primary","float-end",3,"click","pTooltip"],[1,"ri-history-fill","fs-16"],["tooltipPosition","top","type","button","data-bs-toggle","button","aria-pressed","true",1,"btn","btn-icon","btn-soft-danger","float-end",3,"click","pTooltip"],[1,"ri-arrow-go-back-line","fs-16"],[1,"d-flex","justify-content-between"],[1,"text-muted"],[1,"ri-calendar-2-fill","text-muted","me-1","align-bottom"],[1,"text-muted","ms-2"],["href","javascript:void(0);"],[1,"text-center"],[1,"ri-user-2-fill","text-muted","me-1","align-bottom"],[1,"d-flex","gap-4","mb-1","justify-content-between"],[1,"text-success"],[1,"ri-map-pin-2-line","text-success","me-1","align-bottom"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-flex","gap-4"],[1,"ri-shake-hands-fill","text-primary","me-1","align-bottom"],[4,"ngFor","ngForOf"],[1,"hstack","gap-2","my-1"],["translate","",1,"text-muted"],[1,"d-flex","justify-content-between",2,"min-height","112px"],[1,"w-50","text-left"],[1,"ri-group-fill","text-primary","me-1","align-bottom"],[1,"w-50","text-right"],[1,"ri-history-fill","text-primary","me-1","align-bottom"],[1,"mt-2","hstack","gap-2"],["class","btn  btn-sm btn-soft-success w-100",3,"click",4,"hasPermission"],["href","javascript:void(0);","class","btn btn-sm btn-soft-primary w-100",3,"click",4,"hasPermission"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],[1,"btn","btn-sm","btn-soft-success","w-100",3,"click"],[1,"ri-swap-line","label-icon","align-bottom","rounded-pill","fs-16","me-2"],["translate","orderManagement.order.changeTeamStatus"],["href","javascript:void(0);",1,"btn","btn-sm","btn-soft-primary","w-100",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom"],["translate","orderManagement.order.finishOrder"],[1,"modal-content","border-0"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.order.changeTeamStatus",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"mb-3"],["for","actionMismatch","translate","",1,"fw-bold","form-label"],["name","teamStatus","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["class","mb-3",4,"ngIf"],["rows","2","InputTirmFilter","","name","teamStatusNotes","type","text","id","teamStatusNotes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill",3,"disabled"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],["for","cancelReasonName","translate","",1,"required","fw-bold","form-label"],["name","name","bindValue","code","bindLabel","name","required","",3,"ngModelChange","placeholder","items","multiple","ngModel"],["translate","orderManagement.order.assignedOrders.finishOrder",1,"fw-bold","fs-4"],[1,"modal-content"],[1,""],[1,"mt-2","row"],[1,"col-lg-2","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"col-12","col-lg-4","mb-2"],["name","serviceCode","bindValue","code","bindLabel","name",3,"change","ngModelChange","items","multiple","placeholder","ngModel"],[1,"input-group"],["InputTirmFilter","","name","note","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"col-lg-2","mb-2"],[1,"btn","btn-success","py-1","px-2",3,"click"],[1,"ri-add-fill",2,"font-size","1.2rem"],[1,"col-12","text-center","mt-2"],[1,"table","table-bordered"],["translate",""],[4,"ngIf"],[1,"pt-2","row"],[1,"col-12","col-lg-12","mb-3"],["translate","",1,"fw-bold","form-label"],[1,"form-control","custom-form-textArea"],[1,"col-12","col-lg-6","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"form-control","w-75","custom-form-input"],["translate","",1,"fw-bold","form-label","required","w-25"],[1,"w-75"],["name","paymentTypeCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"col-12","col-lg-12","mb-3","d-flex"],["InputTirmFilter","","name","note","rows","3",1,"form-control","fs-6","w-75",3,"ngModelChange","placeholder","ngModel"],[1,"col-12","col-lg-12","mt-3","d-flex"],["translate","",1,"btn","btn-warning","px-5",3,"click"],[1,"my-3","d-flex"],["class","avatar-lg mx-2 position-relative",4,"ngFor","ngForOf"],["multiple","","value","","type","file","accept","image/png, image/gif, image/jpeg",1,"form-control","d-none",3,"change"],[1,"d-flex","gap-2","justify-content-end","my-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click","disabled"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["class","d-flex",4,"ngIf"],[1,"btn","btn-danger","py-1","px-2","me-1",3,"click"],[1,"ri-delete-bin-3-fill",2,"font-size","1.2rem"],[1,"ri-edit-2-fill",2,"font-size","1.2rem"],[1,"d-flex"],["InputTirmFilter","","name","editPrice","type","text","id","editPrice",1,"form-control","fs-6",3,"ngModelChange","placeholder","ngModel"],[1,"btn","btn-success","py-1","px-2","mx-1",3,"click"],[1,"ri-check-double-fill",2,"font-size","1.2rem"],[1,"btn","btn-danger","py-1","px-2",3,"click"],[1,"ri-close-fill",2,"font-size","1.2rem"],["colspan","4"],[1,"avatar-lg","mx-2","position-relative"],[1,"position-absolute","bx","bx-x-circle","text-white",2,"background","red","top","1px","right","-4px","font-size","1rem","border-radius","50%",3,"click"],[1,"avatar-title","bg-light","rounded"],["id","product-img1","alt","",1,"avatar-md","h-auto",3,"src"],[3,"isOrderEdit","isInner","orderCode"],[3,"dismiss","orderSelected"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div",14),e.nrm(4,"ngx-ui-loader",15),e.j41(5,"div",16)(6,"base-filter",17),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(7,18),e.j41(8,"div",19)(9,"div",20)(10,"input",21),e.nI1(11,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(12,"i",22),e.k0s()(),e.j41(13,"div",19)(14,"div",20)(15,"input",23),e.nI1(16,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(17,"i",22),e.k0s()(),e.j41(18,"div",19)(19,"div",20)(20,"input",21),e.nI1(21,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(22,"i",22),e.k0s()(),e.j41(23,"div",24)(24,"input",25),e.nI1(25,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s()()(),e.j41(26,"div",11),e.DNE(27,Ms,60,37,"div",26),e.k0s()()()(),e.DNE(28,Ss,24,12,"ng-template",null,0,e.C5r)(30,Ns,111,35,"ng-template",null,1,e.C5r)(32,Ds,1,3,"ng-template",null,2,e.C5r)(34,Os,1,1,"ng-template",null,3,e.C5r)(36,ws,15,3,"ng-template",null,4,e.C5r)}2&i&&(e.R7$(4),e.Y8G("loaderId","assignLoader"),e.R7$(2),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,16,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(16,18,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(21,20,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(4),e.FS9("placeholder",e.bMT(25,22,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.Y8G("ngForOf",n.entities))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.YS,d.vS,d.cV,E.kL,U.b,ee.L,c.Mm,j.Cv,O.vr,Y.m,b.p,W.m,K,g.vh,c.D9],encapsulation:2})}}return r})();function Gs(r,l){if(1&r&&(e.j41(0,"span",58),e.EFF(1),e.k0s()),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",t.districtName," ")}}function Ls(r,l){1&r&&e.nrm(0,"span",59)}function $s(r,l){1&r&&e.nrm(0,"span",60)}function Bs(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",26)(1,"div",11)(2,"div",12)(3,"div",27)(4,"button",28),e.nI1(5,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(45);return a.getEvalById(n.evaluationCode),e.Njj(a.openModal(n.evaluationCode,o,"lg"))}),e.nrm(6,"i",29),e.k0s(),e.j41(7,"button",30),e.nI1(8,"translate"),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(41);return e.Njj(a.openModal(n.evaluationCode,o))}),e.nrm(9,"i",31),e.k0s()(),e.j41(10,"a",32)(11,"h5"),e.EFF(12),e.k0s()(),e.j41(13,"div",33)(14,"p",34)(15,"span",35),e.nrm(16,"i",36),e.nI1(17,"translate"),e.EFF(18),e.nI1(19,"date"),e.k0s(),e.j41(20,"span",35),e.nrm(21,"i",36),e.nI1(22,"translate"),e.EFF(23),e.nI1(24,"date"),e.k0s()(),e.j41(25,"p",37),e.EFF(26),e.nI1(27,"translate"),e.k0s()(),e.j41(28,"div",38)(29,"div",39),e.nrm(30,"i",40),e.EFF(31),e.DNE(32,Gs,2,1,"span",41),e.k0s(),e.j41(33,"div",35),e.nrm(34,"i",42),e.j41(35,"span",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.copytext(n.mobile))}),e.EFF(36),e.nrm(37,"i",44),e.k0s()()(),e.j41(38,"div",45)(39,"div",35),e.qex(40),e.nrm(41,"i",46),e.nI1(42,"translate"),e.j41(43,"span",47),e.EFF(44),e.k0s(),e.bVm(),e.k0s(),e.j41(45,"div",35),e.nrm(46,"i",48),e.nI1(47,"translate"),e.DNE(48,Ls,1,0,"span",49)(49,$s,1,0,"span",50),e.k0s()(),e.j41(50,"div",51)(51,"a",52),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(43);return a.getEvalById(n.evaluationCode),e.Njj(a.openModal(n.evaluationCode,o,"lg"))}),e.nrm(52,"i",53)(53,"span",54),e.k0s(),e.j41(54,"a",55),e.bIt("click",function(){const n=e.eBV(t).$implicit,a=e.XpG(),o=e.sdS(47);return e.Njj(a.openModal(n.evaluationCode,o))}),e.nrm(55,"i",56)(56,"span",57),e.k0s()()()()()}if(2&r){const t=l.$implicit;e.R7$(4),e.FS9("pTooltip",e.bMT(5,17,"general.action.view")),e.R7$(3),e.FS9("pTooltip",e.bMT(8,19,"orderManagement.priceEvaluation.cancel")),e.R7$(5),e.JRh(t.agentName),e.R7$(4),e.FS9("pTooltip",e.bMT(17,21,"general.table.creationTime")),e.R7$(2),e.SpI(" ",e.i5U(19,23,t.createdDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.FS9("pTooltip",e.bMT(22,26,"orderManagement.order.visitDate")),e.R7$(2),e.SpI(" ",e.i5U(24,28,t.visitDate,"yyyy-MM-dd HH:mm")," "),e.R7$(3),e.Lme(" ",e.bMT(27,31,"orderManagement.order.orderCode"),": #SO#",t.evaluationCode," "),e.R7$(5),e.SpI(" ",t.cityName," "),e.R7$(),e.Y8G("ngIf",!t.districtName),e.R7$(4),e.SpI("",t.mobile," "),e.R7$(5),e.FS9("pTooltip",e.bMT(42,33,"orderManagement.order.teamName")),e.R7$(3),e.SpI(" ",t.teamName," "),e.R7$(2),e.FS9("pTooltip",e.bMT(47,35,"orderManagement.priceEvaluation.status")),e.R7$(2),e.Y8G("ngIf",t.isUrgent),e.R7$(),e.Y8G("ngIf",!t.isUrgent)}}function As(r,l){if(1&r){const t=e.RV6();e.j41(0,"cancel-evaluation-model",61),e.bIt("success",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.loadentities())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("orderId",t.orderSelected)}}function Xs(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function Us(r,l){1&r&&(e.j41(0,"tr")(1,"td",95),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Ys(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",62)(1,"h4",63),e.nrm(2,"span",64),e.k0s(),e.j41(3,"button",65),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,4),e.nrm(6,"ngx-ui-loader",66),e.j41(7,"div",67)(8,"div",68)(9,"div",69)(10,"div",7)(11,"div",70)(12,"label",71),e.EFF(13,"orderManagement.order.cityName"),e.k0s(),e.j41(14,"div",72),e.EFF(15),e.k0s()(),e.j41(16,"div",70)(17,"label",71),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"div",72),e.EFF(20),e.k0s()(),e.j41(21,"div",70)(22,"label",73),e.EFF(23,"orderManagement.order.date"),e.k0s(),e.j41(24,"div",72),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",74)(28,"div",75)(29,"table",76)(30,"thead")(31,"tr")(32,"th",77),e.EFF(33," orderManagement.order.service "),e.k0s(),e.j41(34,"th",77),e.EFF(35," orderManagement.order.price "),e.k0s(),e.j41(36,"th",77),e.EFF(37," orderManagement.order.notes "),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,Xs,7,3,"tr",78)(40,Us,4,3,"tr",79),e.k0s()()()(),e.j41(41,"div",80)(42,"div",81)(43,"label",82),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"span",83),e.EFF(47),e.nI1(48,"translate"),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",84)(51,"label",85),e.EFF(52,"orderManagement.order.notes"),e.k0s(),e.j41(53,"span",86),e.EFF(54),e.k0s()(),e.j41(55,"div",87)(56,"label",88),e.EFF(57,"orderManagement.order.assignDate"),e.k0s(),e.j41(58,"div",89)(59,"input",90,5),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.assignDate,n)||(a.assignForm.assignDate=n),e.Njj(n)}),e.k0s()()(),e.j41(61,"div",87)(62,"label",88),e.EFF(63,"orderManagement.order.team"),e.k0s(),e.j41(64,"ng-select",91,6),e.nI1(66,"translate"),e.mxI("ngModelChange",function(n){e.eBV(t);const a=e.XpG();return e.DH7(a.assignForm.teamCode,n)||(a.assignForm.teamCode=n),e.Njj(n)}),e.k0s()()(),e.j41(67,"div",92)(68,"button",93),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.ChangeAssignTeam())}),e.k0s(),e.j41(69,"button",94),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.SpI(" ",t.evaluationDetails.cityName||"--"," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName||"--"," "),e.R7$(5),e.SpI(" ",e.i5U(26,16,t.evaluationDetails.visitDate,"yyyy-MM-dd")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(45,19,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(48,21,"orderManagement.order.yes"):e.bMT(49,23,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes||"--"," "),e.R7$(5),e.R50("ngModel",t.assignForm.assignDate),e.R7$(5),e.FS9("placeholder",e.bMT(66,25,"orderManagement.order.team")),e.Y8G("items",t.teams)("multiple",!1),e.R50("ngModel",t.assignForm.teamCode)}}function Ps(r,l){if(1&r&&(e.j41(0,"tr")(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s()()),2&r){const t=l.$implicit;e.R7$(2),e.JRh(t.serviceCode),e.R7$(2),e.JRh(t.price),e.R7$(2),e.JRh(t.notes)}}function zs(r,l){1&r&&(e.j41(0,"tr")(1,"td",95),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&r&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Hs(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",62)(1,"h4",63),e.nrm(2,"span",96),e.k0s(),e.j41(3,"button",65),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,4),e.nrm(6,"ngx-ui-loader",66),e.j41(7,"div",67)(8,"div",68)(9,"div",69)(10,"div",7)(11,"div",70)(12,"label",71),e.EFF(13,"orderManagement.order.cityName"),e.k0s(),e.j41(14,"div",72),e.EFF(15),e.k0s()(),e.j41(16,"div",70)(17,"label",71),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"div",72),e.EFF(20),e.k0s()(),e.j41(21,"div",70)(22,"label",73),e.EFF(23,"orderManagement.order.date"),e.k0s(),e.j41(24,"div",72),e.EFF(25),e.nI1(26,"date"),e.k0s()()(),e.j41(27,"div",74)(28,"div",75)(29,"table",76)(30,"thead")(31,"tr")(32,"th",77),e.EFF(33," orderManagement.order.service "),e.k0s(),e.j41(34,"th",77),e.EFF(35," orderManagement.order.price "),e.k0s(),e.j41(36,"th",77),e.EFF(37," orderManagement.order.notes "),e.k0s()()(),e.j41(38,"tbody"),e.DNE(39,Ps,7,3,"tr",78)(40,zs,4,3,"tr",79),e.k0s()()()(),e.j41(41,"div",80)(42,"div",81)(43,"label",82),e.EFF(44),e.nI1(45,"translate"),e.k0s(),e.j41(46,"span",83),e.EFF(47),e.nI1(48,"translate"),e.nI1(49,"translate"),e.k0s()(),e.j41(50,"div",84)(51,"label",85),e.EFF(52,"orderManagement.order.notes"),e.k0s(),e.j41(53,"span",86),e.EFF(54),e.k0s()()(),e.j41(55,"div",92)(56,"button",94),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(9),e.SpI(" ",t.evaluationDetails.cityName||"--"," "),e.R7$(5),e.SpI(" ",t.evaluationDetails.districtName||"--"," "),e.R7$(5),e.SpI(" ",e.i5U(26,11,t.evaluationDetails.visitDate,"yyyy-MM-dd")," "),e.R7$(14),e.Y8G("ngForOf",t.evaluationDetails.evaluationservices),e.R7$(),e.Y8G("ngIf",!t.evaluationDetails.evaluationservices),e.R7$(4),e.SpI(" ",e.bMT(45,14,"orderManagement.order.isUrgent")," "),e.R7$(3),e.SpI(" ",t.evaluationDetails.isUrgent?e.bMT(48,16,"orderManagement.order.yes"):e.bMT(49,18,"orderManagement.order.no")," "),e.R7$(7),e.SpI(" ",t.evaluationDetails.notes||"--"," ")}}function Js(r,l){if(1&r){const t=e.RV6();e.j41(0,"div",62)(1,"h4",63),e.nrm(2,"span",97),e.k0s(),e.j41(3,"button",65),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(4,"form",null,4),e.nrm(6,"ngx-ui-loader",66),e.j41(7,"div",67)(8,"div",68)(9,"div",98),e.nrm(10,"lord-icon",99),e.j41(11,"div",100),e.nrm(12,"h3",101)(13,"p",102),e.k0s()(),e.j41(14,"div",103)(15,"button",93),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.FinishEvaluation())}),e.k0s(),e.j41(16,"button",94),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&r){const t=e.XpG();e.R7$(6),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let Qs=(()=>{class r extends w.w{constructor(t,i,n,a,o,s,F,v,x,M,S,I,y,P){super(t,i,v,n,o,s,F),this.baseService=n,this.orderPendingService=a,this.authDaamService=x,this.excelService=M,this.cityService=S,this.districtService=I,this.channelService=y,this.router=P,this.title="orderManagement.assignEvaluation.title",this.titleOperation="orderManagement.assignEvaluation.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.teams=[],this.employees=[],this.searchForm={},this.assignForm={},this.isResolveList=!1,this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.callHistory={},this.loadentities(),this.GetCities(),this.getEvalTeams()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(i=>{this.districts=i.data},i=>{console.log(i)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,h.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}mapRegisterForm(t){let i={...t};return i.employeeCode=0,i}onSearch(){var i;if(this.ngxLoader.startLoader(u.a7),console.log(this.searchForm),(i=this.searchForm.dates)+void 0&&i.includes("to")){var t=i.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(i=this.searchForm.creationDates)+void 0&&i.includes("to")?(t=i.split("to").map(a=>a.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader("assignEvalLoader"),this.pagination.isEvaluationAssign=!0,this.baseService.get(this.pagination).pipe((0,h.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader("assignEvalLoader"),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader("assignEvalLoader"),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(i=>{t.push({orderCode:i.orderCode,visitDate:i.visitDate,notes:i.notes,createdDate:i.createdDate,assignDate:i.assignDate,finishDate:i.finishDate,districtName:i.districtName,cityName:i.cityName,agentName:i.agentName,mobile:i.mobile,email:i.email,creationUser:i.creationUser,channelName:i.channelName,teamNames:i.teamNames,services:i.services,workTimes:i.workTimes,paymentTypeName:i.paymentTypeName,finishUser:i.finishUser,isCancel:i.isCancel,isReopen:i.isReopen,isFree:i.isFree,isFinish:i.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,i,n="md"){this.orderSelected=t,this.assignForm.code=t,this.modalService.open(i,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}copytext(t){navigator.clipboard.writeText(t),this.alertService.info(t)}getEvalById(t){this.baseService.getById(t).subscribe(i=>{this.evaluationDetails=i.data,this.assignForm.teamCode=i.date.teamCode,this.assignForm.assignDate=i.date.assignDate},()=>{this.alertService.error()})}getEvalTeams(){this.baseService.EvaluationLookUp().subscribe(t=>{this.teams=t.data.teams},()=>{this.alertService.error()})}ChangeAssignTeam(){this.ngxLoader.startLoader(u.Fq),this.baseService.ChangeAssignTeam(this.assignForm).subscribe(t=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error(),this.ngxLoader.stopLoader(u.Fq)})}FinishEvaluation(){this.ngxLoader.startLoader(u.Fq),this.baseService.SaveEvaluationFinish({}).subscribe(t=>{this.ngxLoader.stopLoader(u.Fq),this.loadentities(),this.modalService.dismissAll(),t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},()=>{this.alertService.error(),this.ngxLoader.stopLoader(u.Fq)})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(C.nX),e.rXU(c.c$),e.rXU(re.W),e.rXU(se.H),e.rXU(R.u),e.rXU(g.vh),e.rXU(j.eD),e.rXU(p.Bq),e.rXU(_.J),e.rXU(A.V),e.rXU(z.h),e.rXU(H.m),e.rXU(Q.l),e.rXU(C.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-team-assign-evaluation"]],features:[e.Vt3],decls:48,vars:42,consts:[["deleteModal",""],["evaluateModal",""],["showModal",""],["finishModal",""],["formEntity","ngForm"],["assignDate","ngModel"],["teamCode","ngModel"],[1,"row"],[1,"col-lg-12"],[1,"grid"],["overlayColor","rgba(255,255,255,0.05)","fgsColor","rgba(255,255,255,0)",3,"loaderId"],[1,"card"],[1,"card-body"],[3,"reset","search","exportXlsx","showAdd","showExport","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["class","col-xxl-3 col-xl-4 col-lg-4 col-md-6",4,"ngFor","ngForOf"],[1,"col-xxl-3","col-xl-4","col-lg-4","col-md-6"],[1,"mb-4","d-flex","justify-content-between"],["tooltipPosition","top","type","button","data-bs-toggle","button","aria-pressed","true",1,"btn","btn-icon","btn-soft-primary","float-end",3,"click","pTooltip"],[1,"ri-eye-fill","fs-16"],["tooltipPosition","top","type","button","data-bs-toggle","button","aria-pressed","true",1,"btn","btn-icon","btn-soft-danger","float-end",3,"click","pTooltip"],[1,"ri-chat-delete-fill","fs-16"],["href","javascript:void(0);"],[1,""],[1,"text-muted"],[1,"w-50"],["tooltipPosition","top",1,"ri-calendar-2-fill","text-muted","me-1","align-bottom",3,"pTooltip"],[1,"text-muted","ms-2"],[1,"d-flex","gap-4","mb-1"],[1,"text-success","w-50"],[1,"ri-map-pin-2-line","text-success","me-1","align-bottom"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-flex","gap-4"],["tooltipPosition","top",1,"ri-user-2-fill","text-primary","me-1","align-bottom","fs-6",3,"pTooltip"],[1,"badge","bg-primary-subtle","text-primary","mx-1"],["tooltipPosition","top",1,"ri-flag-2-fill","text-primary","me-1","align-bottom","fs-6",3,"pTooltip"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.priceEvaluation.isUrgent",4,"ngIf"],["class","badge bg-success-subtle text-success","translate","orderManagement.priceEvaluation.normal",4,"ngIf"],[1,"mt-2","hstack","gap-2"],[1,"btn","btn-soft-success","w-100",3,"click"],[1,"ri-user-follow-fill","label-icon","align-bottom","rounded-pill","fs-16","me-2"],["translate","orderManagement.priceEvaluation.reassign"],["href","javascript:void(0);",1,"btn","btn-soft-primary","w-100",3,"click"],[1,"ri-checkbox-circle-fill","align-bottom","me-2"],["translate","orderManagement.finishedEvaluation.finish"],[1,"badge","bg-success-subtle","text-success"],["translate","orderManagement.priceEvaluation.isUrgent",1,"badge","bg-danger-subtle","text-danger"],["translate","orderManagement.priceEvaluation.normal",1,"badge","bg-success-subtle","text-success"],[3,"success","dismiss","orderId"],[1,"modal-header","p-3","bg-info-subtle"],[1,"card-title","mb-0"],["translate","orderManagement.assignEvaluation.reassignEval",1,"fw-bold","fs-4"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-body"],[1,"mx-4"],[1,"col-12","col-md-4","mb-3"],["translate","",1,"fw-bold","form-label","w-100"],[1,"form-control","w-100"],["for","visitDate","translate","",1,"fw-bold","form-label"],[1,"mt-4","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-12","text-center","mt-4"],[1,"table","table-bordered"],["translate",""],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"mt-4","pt-3","row",2,"border-top","1px solid rgba(128,128,128,0.29)"],[1,"col-md-12","mb-3","d-flex"],[1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75"],[1,"col-12","col-md-12","mb-3","d-flex"],["translate","",1,"fw-bold","form-label","w-25"],[1,"fw-bold","form-label","w-75","form-control","py-3"],[1,"col-12","col-md-6","mb-3"],["for","assignDate","translate","",1,"fw-bold","form-label"],[1,"input-group"],["InputTirmFilter","","name","mobile","type","date","id","assignDate",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","teamCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","placeholder","ngModel"],[1,"d-flex","gap-2","justify-content-end","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger",3,"click"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["colspan","4"],["translate","orderManagement.assignEvaluation.title",1,"fw-bold","fs-4"],["translate","orderManagement.finishedEvaluation.title",1,"fw-bold","fs-4"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","130px","height","130px"],[1,"pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.AreYouSureMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",7)(1,"div",8)(2,"div",9),e.nrm(3,"ngx-ui-loader",10),e.j41(4,"div",11)(5,"div",12)(6,"base-filter",13),e.bIt("reset",function(){return e.eBV(a),e.Njj(n.onReset())})("search",function(){return e.eBV(a),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(a),e.Njj(n.onExportXlsx())}),e.qex(7,14),e.j41(8,"div",15)(9,"div",16)(10,"input",17),e.nI1(11,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.orderCode,s)||(n.pagination.orderCode=s),e.Njj(s)}),e.k0s(),e.nrm(12,"i",18),e.k0s()(),e.j41(13,"div",15)(14,"div",16)(15,"input",19),e.nI1(16,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.agentName,s)||(n.pagination.agentName=s),e.Njj(s)}),e.k0s(),e.nrm(17,"i",18),e.k0s()(),e.j41(18,"div",15)(19,"div",16)(20,"input",17),e.nI1(21,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.mobile,s)||(n.pagination.mobile=s),e.Njj(s)}),e.k0s(),e.nrm(22,"i",18),e.k0s()(),e.j41(23,"div",15)(24,"div",16)(25,"ng-select",20),e.nI1(26,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.channelCode,s)||(n.pagination.channelCode=s),e.Njj(s)}),e.k0s()()(),e.j41(27,"div",15)(28,"div",16)(29,"ng-select",21),e.nI1(30,"translate"),e.bIt("change",function(s){return e.eBV(a),e.Njj(n.oncityChange(s))}),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.cityCode,s)||(n.pagination.cityCode=s),e.Njj(s)}),e.k0s()()(),e.j41(31,"div",15)(32,"div",16)(33,"ng-select",22),e.nI1(34,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.pagination.districtName,s)||(n.pagination.districtName=s),e.Njj(s)}),e.k0s()()(),e.j41(35,"div",23)(36,"input",24),e.nI1(37,"translate"),e.mxI("ngModelChange",function(s){return e.eBV(a),e.DH7(n.searchForm.creationDates,s)||(n.searchForm.creationDates=s),e.Njj(s)}),e.k0s()(),e.bVm(),e.k0s()()(),e.j41(38,"div",7),e.DNE(39,Bs,57,37,"div",25),e.k0s()()()(),e.DNE(40,As,1,1,"ng-template",null,0,e.C5r)(42,Ys,70,27,"ng-template",null,1,e.C5r)(44,Hs,57,20,"ng-template",null,2,e.C5r)(46,Js,17,3,"ng-template",null,3,e.C5r)}2&i&&(e.R7$(3),e.Y8G("loaderId","assignLoader"),e.R7$(3),e.Y8G("showAdd",!1)("showExport",!1)("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(11,28,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(16,30,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(21,32,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(26,34,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(30,36,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(34,38,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(37,40,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(3),e.Y8G("ngForOf",n.entities))},dependencies:[g.Sq,g.bT,d.qT,d.me,d.Q0,d.BC,d.cb,d.vS,d.cV,E.kL,U.b,c.Mm,j.Cv,O.vr,Y.m,W.m,oe,g.vh,c.D9]})}}return r})();function qs(r,l){1&r&&e.nrm(0,"app-team-assigned-orders")}function Ws(r,l){1&r&&e.nrm(0,"app-team-assign-evaluation")}function Ks(r,l){1&r&&e.nrm(0,"app-team-expenses-orders")}const eo=[{path:"list",component:cr,canActivate:[ge.g],data:{permission:["order.view"]}},{path:"eval-list",component:ja,canActivate:[ge.g],data:{permission:["priceEval.view"]}},{path:"map",component:he,canActivate:[ge.g],data:{permission:["leads.register"]}},{path:"new",component:Fa,canActivate:[ge.g],data:{permission:["order.register"]}},{path:"timeAvailable",component:pr,data:{roles:[]}},{path:"expenses-items",component:wa,resolve:{data:Va},data:{roles:[]}},{path:"expenses-orders",component:Wa,resolve:{data:Ka},data:{roles:[]}},{path:"team-assign",component:(()=>{class r{constructor(){this.active=1,this.activeindex="1"}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-Team-container"]],decls:17,vars:5,consts:[["nav","ngbNav"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","orderManagement.order.assignedOrders.title"],["ngbNavContent",""],["translate","orderManagement.assignEvaluation.title"],["translate","orderManagement.expensesOrders.title"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(i,n){if(1&i){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"ul",3,0),e.mxI("activeIdChange",function(s){return e.eBV(a),e.DH7(n.active,s)||(n.active=s),e.Njj(s)}),e.bIt("navChange",function(s){return e.eBV(a),e.Njj(n.onNavChange(s))}),e.j41(4,"li",4)(5,"a",5),e.nrm(6,"span",6),e.k0s(),e.DNE(7,qs,1,0,"ng-template",7),e.k0s(),e.j41(8,"li",4)(9,"a",5),e.nrm(10,"span",8),e.k0s(),e.DNE(11,Ws,1,0,"ng-template",7),e.k0s(),e.j41(12,"li",4)(13,"a",5),e.nrm(14,"span",9),e.k0s(),e.DNE(15,Ks,1,0,"ng-template",7),e.k0s()(),e.nrm(16,"div",10),e.k0s()()}if(2&i){const a=e.sdS(3);e.R7$(2),e.R50("activeId",n.active),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavItem",3),e.R7$(4),e.Y8G("ngbNavOutlet",a)}},dependencies:[p.Um,p.X9,p.sy,p.Gx,p.Ri,p.WA,p.m_,c.Mm,gs,Vs,Qs],encapsulation:2})}}return r})(),data:{roles:[]}}];let to=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[C.iI.forChild(eo),C.iI]})}}return r})();var no=m(71144);let io=(()=>{class r{constructor(){(0,T.eV)(V().loadAnimation)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[g.MD,d.YN,d.X1,p.zH,p.Pv,p.c9,E.ND,k.r,to,N.G,c.h,f.bG,te.q4,de.H_,p.c9,j.th,O.MQ,p.n8,no.j,p._f,W.S]})}}return r})()},75622:(ae,q,m)=>{m.d(q,{w:()=>w});var g=m(21413),d=m(56977),p=m(37021),E=m(35335),k=m(45236),T=m(70980),B=m(99437),V=m(18810),N=m(35263),c=m(36158),f=m(54438),te=m(51188),de=m(8147),j=m(69005),O=m(67569),C=m(3888),e=m(60177),he=m(1530);let w=(()=>{class X{constructor(_,b,h,u,A,z,H){this.routerActive=_,this.translateService=b,this.modalService=h,this.baseService=u,this.alertService=A,this.datePipe=z,this.ngxLoader=H,this.title="",this.mainDelay=50,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new g.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=c.cX,this.loaderOperationShap=c.$$,this.operationLoader=c.ZW,this.loaderDeleteShap=c.jg,this.mainTable=c.uG,this.searchLoader=c.a7,this.deleteLoader=c.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,d.Q)(this.notifier)).subscribe(_=>{this.entities=_.data.result,this.pagination=_.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(c.a7)},_=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,d.Q)(this.notifier)).subscribe(_=>{this.lang=_.lang})}getTranslationText(_){let b="";return this.translateService.get(_).pipe((0,d.Q)(this.notifier)).subscribe(h=>{b=h}),b}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(_){return null!=_?_.substring(0,10)+"...":""}getRenderIndex(_){return this.index++,this.index}successDataTable(_){this.ngxLoader.stopLoader(c.a7),this.pagination.totalItems=_.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(c.a7),this.alertService.error()}openModalTitle(_,b="md"){this.isEditForm=!1,this.form={},this.modalService.open(_,{centered:!0,size:b})}openModal(_,b,h="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:_}],this.modalService.open(b,{centered:!0,size:h})}openModalMoreOperation(_){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(b=>b.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(_){this.ngxLoader.startLoader(c.a7),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(c.a7),this.baseService.get(this.pagination).pipe((0,d.Q)(this.notifier)).subscribe(_=>{this.ngxLoader.stopLoader(c.a7),this.entities=_.data,this.pagination.totalItems=_.totalItems,this.LoadSuccess()},_=>{this.ngxLoader.stopLoader(c.a7),this.alertService.error(_)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(_){this.pagination.filterType=_.sortField,this.pagination.sortType=1==_.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let _=this.mapRegisterForm(this.form);this.baseService.register(_).pipe((0,p.O)(),(0,E.c)(this.mainDelay),(0,k.Z)(),(0,d.Q)(this.notifier),(0,T.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,B.W)(b=>(0,V.$)(b))).subscribe(b=>{b.success?this.submitFunished():this.alertService.error("general.message."+b.message)},b=>{this.alertService.error("general.message."+b)})}editEntity(){let _=this.mapForm(this.form);this.baseService.edit(_.id,_).pipe((0,p.O)(),(0,E.c)(this.mainDelay),(0,k.Z)(),(0,d.Q)(this.notifier),(0,T.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(b=>{b.success?this.submitFunished():this.alertService.error("general.message."+b.message)},b=>{this.alertService.error("general.message."+b)})}mapForm(_){return _}mapRegisterForm(_){return _.id=0,_}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(c.a7),this.btnDisabled=!0}EditModel(_,b,h="md"){this.isEditForm=!0,this.baseService.getById(_).pipe((0,d.Q)(this.notifier)).subscribe(u=>{u.success?this.form=u.data:this.alertService.error("general.message."+u.message),this.modalService.open(b,{centered:!0,size:h})},u=>{this.alertService.error()})}EditModelTilte(_){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,d.Q)(this.notifier)).subscribe(h=>{h?this.form=h:this.alertService.error("general.message."+h)},h=>{this.alertService.error()})}onSelectionChange(_){this.selectedRow=_,this.lengthSelect=_.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(_){this.pagination.pageNumber=_,this.loadentities()}ListItemChange(_){this.pagination.pageSize=_.target.value,this.loadentities()}searchChange(_){this.pagination.filterValue=_,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(c.Fq);let _=this.selectedRow.map(b=>b.id);this.baseService.deleteRange(_).pipe((0,p.O)(),(0,E.c)(this.mainDelay),(0,k.Z)(),(0,d.Q)(this.notifier),(0,T.j)(()=>this.ngxLoader.stopLoader(c.Fq))).subscribe(b=>{b.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+b)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(_=>_.id)}isEmpty(_){return(void 0===_||null==_||_.length)<=0}OnReset(_){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(_){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(b){return new(b||X)(f.rXU(te.nX),f.rXU(de.c$),f.rXU(j.Bq),f.rXU(O.d),f.rXU(C.u),f.rXU(e.vh),f.rXU(he.eD))}}static{this.\u0275cmp=f.VBU({type:X,selectors:[["app-base"]],viewQuery:function(b,h){if(1&b&&f.GBs(N.XI,5),2&b){let u;f.mGM(u=f.lsd())&&(h.tableMaster=u.first)}},decls:0,vars:0,template:function(b,h){},encapsulation:2})}}return X})()},99902:(ae,q,m)=>{m.d(q,{Q:()=>d});var g=m(54438);let d=(()=>{class p{constructor(){}formatFormData(k){const T=new FormData,B=(V,N)=>{if(null!=N)if(N instanceof File||N instanceof Blob)T.append(V,N);else if(Array.isArray(N))N.forEach((c,f)=>{if("object"==typeof c&&null!==c)for(const te in c)c.hasOwnProperty(te)&&B(`${V}[${f}].${te}`,c[te]);else B(`${V}[${f}]`,c)});else if("object"==typeof N)for(const c in N)N.hasOwnProperty(c)&&B(`${V}.${c}`,N[c]);else T.append(V,N)};for(const V in k)k.hasOwnProperty(V)&&B(V,k[V]);return T}formatBody(k){for(const T in k)Array.isArray(k[T])&&k[T].length>0?Object?.keys(k[T][0])?.length>1&&k[T].forEach((B,V)=>{for(const N in B)(!B[N]||0===B[N])&&delete B[N]}):!k[T]&&!1!==k[T]&&delete k[T];return k}static{this.\u0275fac=function(T){return new(T||p)}}static{this.\u0275prov=g.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()}}]);