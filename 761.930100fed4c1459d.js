"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[761],{56131:(B,E,a)=>{a.d(E,{E:()=>m});var o=a(7673),c=a(99437);class m{constructor(I,p,f){this.router=I,this.BaseService=p,this.alertService=f,this.pagination={pageNumber:1,pageSize:10}}resolve(I,p){return this.BaseService.get(this.pagination).pipe((0,c.W)(f=>(this.router.navigate([""]),this.alertService.error(f),(0,o.of)(null))))}}},83761:(B,E,a)=>{a.r(E),a.d(E,{ClientModule:()=>ve});var o=a(60177),c=a(89417),m=a(22960),C=a(32454),I=a(66900),p=a(91022),f=a(70255),v=a(63789),T=a(98982),g=a.n(T),u=a(556),M=a(8147),D=a(56803),P=a(65430),U=a(41631),x=a(1530),N=a(72510),L=a(51188),F=a(23128),S=a(56977),V=a(37021),s=a(35335),d=a(45236),b=a(70980),j=a(75622),y=a(36158),e=a(54438),O=a(75922),A=a(3888),K=a(91426),z=a(90094),G=a(26364),$=a(91580),Y=a(88148),w=a(15084),H=a(40724),Q=a(5779);function Z(r,R){1&r&&(e.j41(0,"tr",25)(1,"th",26),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",27),e.nrm(4,"i",28),e.EFF(5," general.table.name "),e.k0s(),e.j41(6,"th",29),e.nrm(7,"i",28),e.EFF(8," client.client.mobile "),e.k0s(),e.j41(9,"th",30),e.nrm(10,"i",28),e.EFF(11," client.client.cityName "),e.k0s(),e.j41(12,"th",31),e.nrm(13,"i",28),e.EFF(14," client.client.channelName "),e.k0s(),e.j41(15,"th",32),e.nrm(16,"i",28),e.EFF(17," general.table.isActive "),e.k0s(),e.nrm(18,"th",33),e.k0s())}function J(r,R){1&r&&e.nrm(0,"span",52)}function q(r,R){1&r&&e.nrm(0,"span",53)}function ee(r,R){if(1&r&&(e.nrm(0,"i",54),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",55),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",56),e.EFF(9)),2&r){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function te(r,R){if(1&r){const t=e.RV6();e.j41(0,"tr",34)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td"),e.EFF(10),e.k0s(),e.j41(11,"td"),e.DNE(12,J,1,0,"span",35)(13,q,1,0,"span",36),e.k0s(),e.j41(14,"td"),e.DNE(15,ee,10,9,"ng-template",null,2,e.C5r),e.j41(17,"span",37)(18,"div",38),e.nrm(19,"i",39),e.j41(20,"button",40),e.nrm(21,"i",41),e.k0s(),e.j41(22,"ul",42)(23,"li",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.goClientEdit(n.agentCode))}),e.j41(24,"span",44),e.nrm(25,"i",45)(26,"span",46),e.k0s()(),e.j41(27,"li",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG();return e.Njj(l.goClientProfile(n.agentCode))}),e.j41(28,"span",44),e.nrm(29,"i",47)(30,"span",48),e.k0s()(),e.j41(31,"li",43),e.bIt("click",function(){const n=e.eBV(t).$implicit,l=e.XpG(),_=e.sdS(34);return e.Njj(l.openModal(n.userCode,_))}),e.j41(32,"a",49),e.nrm(33,"i",50)(34,"span",51),e.k0s()()()()()()()}if(2&r){const t=R.$implicit,i=R.rowIndex,n=e.sdS(16);e.R7$(2),e.JRh(i+1),e.R7$(2),e.JRh(t.agentName),e.R7$(2),e.JRh(t.mobile),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.JRh(t.channelName),e.R7$(2),e.Y8G("ngIf",t.isActive),e.R7$(),e.Y8G("ngIf",!t.isActive),e.R7$(6),e.Y8G("ngbTooltip",n)}}function ie(r,R){1&r&&(e.j41(0,"div",57),e.EFF(1," general.table.noData"),e.k0s())}function ne(r,R){if(1&r){const t=e.RV6();e.j41(0,"div",58)(1,"div",59),e.nrm(2,"ngb-pagination-info",60),e.j41(3,"table-length",61),e.bIt("lengthChange",function(n){e.eBV(t);const l=e.XpG();return e.Njj(l.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",62)(5,"ngb-pagination",63),e.bIt("pageChange",function(n){e.eBV(t);const l=e.XpG();return e.Njj(l.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.pagination.pageNumber,n)||(l.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function ae(r,R){if(1&r){const t=e.RV6();e.j41(0,"delete-modal",64),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}let se=(()=>{class r extends j.w{constructor(t,i,n,l,_,h,X,k,Ee,_e,Me){super(i,n,k,l,_,h,X),this.router=t,this.baseService=l,this.excelService=_e,this.encrptAervice=Me,this.title="client.client.title",this.titleOperation="client.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.cities={},this.channels={},this.status={},this.isResolveList=!0,this.configRoute(),this.GetAgentLookUps()}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,S.Q)(this.notifier)).subscribe(i=>{i?this.alertService.success():this.alertService.error("general.message."+i)},i=>{this.alertService.error()})}ngOnInitMore(){}mapForm(t){let i={...t};return i.id=i.workTimeCode,i}mapRegisterForm(t){let i={...t};return i.workTimeCode=0,i}OnSearch(t){this.ngxLoader.startLoader(y.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(y.a7),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,S.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities?.forEach(i=>{t.push({name:i.agentName,mobile:i.mobile,cityName:i.cityName,channelName:i.channelName,isActive:this.getTranslationText("general.table.active")})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"Service Type",[])}EditModel(t,i,n="md"){this.isEditForm=!0,this.form={workTimeCode:t.workTimeCode,workTime:t.workTime,notes:t.notes,isActive:t.isActive},this.modalService.open(i,{centered:!0,size:n})}editEntity(){let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,V.O)(),(0,s.c)(this.mainDelay),(0,d.Z)(),(0,S.Q)(this.notifier),(0,b.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}GetAgentLookUps(){this.baseService.GetAgentLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cities,this.status=t.data.status},t=>{console.log(t)})}goClientRegister(){this.router.navigateByUrl("/clients/client-list/register")}goClientEdit(t){this.router.navigateByUrl("/clients/client-list/edit",{state:{id:t}})}goClientProfile(t){this.router.navigateByUrl("/clients/client-list/profile",{state:{id:t}});let i=this.encrptAervice.encode(t.toString());this.router.navigateByUrl("/clients/client-list/profile/"+i,{state:{id:t}})}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(L.Ix),e.rXU(L.nX),e.rXU(M.c$),e.rXU(O.X),e.rXU(A.u),e.rXU(o.vh),e.rXU(x.eD),e.rXU(m.Bq),e.rXU(e.gRc),e.rXU(K.V),e.rXU(z._))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-client"]],features:[e.Vt3],decls:35,vars:29,consts:[["tableMaster",""],["deleteModal",""],["tooltipContent",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","search","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","mobile","name","mobile",1,"form-control",3,"ngModelChange","ngModel"],["name","userType","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","channelCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","Status","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","employeeCode","translate","",2,"width","10%"],[1,"ri-expand-up-down-line"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityName","translate","",2,"width","10%"],["pSortableColumn","channelName","translate","",2,"width","10%"],["pSortableColumn","isActive","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],["class","badge bg-success-subtle text-success p-2","translate","general.table.active",4,"ngIf"],["class","badge bg-danger-subtle text-danger p-2","translate","general.table.noActive",4,"ngIf"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[3,"click"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],[1,"ri-user-location-fill","align-bottom","me-2","text-muted"],["translate","client.client.profile"],["href","javascript:void(0);",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","general.table.active",1,"badge","bg-success-subtle","text-success","p-2"],["translate","general.table.noActive",1,"badge","bg-danger-subtle","text-danger","p-2"],[1,"ri-time-fill","text-warning"],[1,"ri-time-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(i,n){if(1&i){const l=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.nI1(1,"translate"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"base-filter",7),e.bIt("reset",function(){return e.eBV(l),e.Njj(n.onReset())})("search",function(){return e.eBV(l),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(l),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(l),e.Njj(n.goClientRegister())}),e.qex(6,8),e.j41(7,"div",9)(8,"div",10)(9,"input",11),e.nI1(10,"translate"),e.mxI("ngModelChange",function(h){return e.eBV(l),e.DH7(n.pagination.filterValue,h)||(n.pagination.filterValue=h),e.Njj(h)}),e.k0s(),e.nrm(11,"i",12),e.k0s()(),e.j41(12,"div",9)(13,"div",10)(14,"input",13),e.mxI("ngModelChange",function(h){return e.eBV(l),e.DH7(n.pagination.mobile,h)||(n.pagination.mobile=h),e.Njj(h)}),e.k0s()()(),e.j41(15,"div",9)(16,"div",10)(17,"ng-select",14),e.mxI("ngModelChange",function(h){return e.eBV(l),e.DH7(n.pagination.CityCode,h)||(n.pagination.CityCode=h),e.Njj(h)}),e.k0s()()(),e.j41(18,"div",9)(19,"div",10)(20,"ng-select",15),e.mxI("ngModelChange",function(h){return e.eBV(l),e.DH7(n.pagination.channelCode,h)||(n.pagination.channelCode=h),e.Njj(h)}),e.k0s()()(),e.j41(21,"div",9)(22,"div",10)(23,"ng-select",16),e.mxI("ngModelChange",function(h){return e.eBV(l),e.DH7(n.pagination.Status,h)||(n.pagination.Status=h),e.Njj(h)}),e.k0s()()(),e.bVm(),e.k0s(),e.j41(24,"div",17),e.nrm(25,"ngx-ui-loader",18),e.j41(26,"div",19)(27,"p-table",20,0),e.bIt("onLazyLoad",function(h){return e.eBV(l),e.Njj(n.tableChange(h))})("selectionChange",function(h){return e.eBV(l),e.Njj(n.onSelectionChange(h))}),e.DNE(29,Z,19,0,"ng-template",21)(30,te,35,8,"ng-template",22),e.k0s()(),e.DNE(31,ie,2,0,"div",23)(32,ne,6,8,"div",24),e.k0s()()()(),e.DNE(33,ae,1,0,"ng-template",null,1,e.C5r)}2&i&&(e.FS9("title",e.bMT(1,25,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,27,"task.tasklist.subject")),e.R50("ngModel",n.pagination.filterValue),e.R7$(5),e.R50("ngModel",n.pagination.mobile),e.R7$(3),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.CityCode),e.R7$(3),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(3),e.Y8G("items",n.status)("multiple",!1),e.R50("ngModel",n.pagination.Status),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[o.bT,c.me,c.BC,c.vS,m.tg,m.do,m.U0,m.s5,G.m,$.g,Y.p,w.w,H.b,M.Mm,D.XI,Q.Ei,D.Tg,x.Cv,N.vr,m.md,o.vh,M.D9],encapsulation:2})}}return r})();var oe=a(21413),re=a(99437),le=a(18810);function de(r,R){1&r&&(e.j41(0,"div",41),e.EFF(1," general.message.filedIdRequired"),e.k0s())}function me(r,R){if(1&r){const t=e.RV6();e.j41(0,"div",23)(1,"div",24)(2,"label",25),e.EFF(3,"client.client.name"),e.k0s(),e.j41(4,"input",26,2),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.agentName,n)||(l.form.agentName=n),e.Njj(n)}),e.k0s(),e.DNE(6,de,2,0,"div",27),e.k0s(),e.j41(7,"div",24)(8,"label",28),e.EFF(9,"client.client.mobile"),e.k0s(),e.j41(10,"input",29,3),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.mobile,n)||(l.form.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",24)(13,"label",30),e.EFF(14,"client.client.email"),e.k0s(),e.j41(15,"input",31,4),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.email,n)||(l.form.email=n),e.Njj(n)}),e.k0s()(),e.j41(17,"div",24)(18,"label",32),e.EFF(19,"client.client.status"),e.k0s(),e.j41(20,"ng-select",33),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.agentAddStatusCode,n)||(l.form.agentAddStatusCode=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",24)(22,"label",32),e.EFF(23,"client.client.cityName"),e.k0s(),e.j41(24,"ng-select",34),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.cityCode,n)||(l.form.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",24)(26,"label",32),e.EFF(27,"client.client.channelName"),e.k0s(),e.j41(28,"ng-select",35),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.channelCode,n)||(l.form.channelCode=n),e.Njj(n)}),e.k0s()(),e.j41(29,"div",24)(30,"label",36),e.EFF(31,"client.client.note"),e.k0s(),e.j41(32,"input",37,5),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.notes,n)||(l.form.notes=n),e.Njj(n)}),e.k0s()(),e.j41(34,"div",38)(35,"label",39),e.EFF(36,"general.table.isActive"),e.k0s(),e.j41(37,"p-inputSwitch",40),e.mxI("ngModelChange",function(n){e.eBV(t);const l=e.XpG();return e.DH7(l.form.isActive,n)||(l.form.isActive=n),e.Njj(n)}),e.k0s()()()}if(2&r){const t=e.sdS(5),i=e.XpG();e.R7$(4),e.R50("ngModel",i.form.agentName),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",i.form.mobile),e.R7$(5),e.R50("ngModel",i.form.email),e.R7$(5),e.Y8G("items",i.status)("multiple",!1),e.R50("ngModel",i.form.agentAddStatusCode),e.R7$(4),e.Y8G("items",i.cities)("multiple",!1),e.R50("ngModel",i.form.cityCode),e.R7$(4),e.Y8G("items",i.channels)("multiple",!1),e.R50("ngModel",i.form.channelCode),e.R7$(4),e.R50("ngModel",i.form.notes),e.R7$(5),e.R50("ngModel",i.form.isActive)}}let W=(()=>{class r{constructor(t,i,n,l,_,h,X,k){this.routerActive=t,this.translateService=i,this.baseService=n,this.alertService=l,this.datePipe=_,this.modalService=h,this.ngxLoader=X,this.router=k,this.editEmployee="client.client.editClient",this.addEmployee="client.client.addClient",this.titleOperation="client.client.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={},this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new oe.B,this.mainDelay=100,this.loaderSearchShap=y.cX,this.loaderOperationShap=y.$$,this.operationLoader=y.ZW,this.isEditForm=!1,this.channels=[],this.cities=[],this.status=[]}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.GetAgentLookUps(),this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.client"},{label:"client.client.title",active:!0,url:"clients/client-list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}]}configRoute(){this.routerActive.data.pipe((0,S.Q)(this.notifier)).subscribe(t=>{let i=t.data.data;i&&(this.isEditForm=!0,this.form=i)},()=>{this.alertService.error()})}GetAgentLookUps(){this.baseService.GetAgentLookUps().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cities,this.status=t.data.status},t=>{console.log(t)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapForm(t){let i={...t};return i.id=i.agentCode,i}mapRegisterForm(t){let i={...t};return i.agentCode=0,i}registerEntity(){this.ngxLoader.startLoader(y.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,V.O)(),(0,s.c)(this.mainDelay),(0,d.Z)(),(0,S.Q)(this.notifier),(0,b.j)(()=>this.ngxLoader.stopLoader(y.ZW)),(0,re.W)(i=>(0,le.$)(i))).subscribe(i=>{i.success?(this.alertService.success(),this.router.navigateByUrl("/clients/client-list")):this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){this.ngxLoader.startLoader(y.ZW);let t=this.mapForm(this.form);this.baseService.editPut(t.id,t).pipe((0,V.O)(),(0,s.c)(this.mainDelay),(0,d.Z)(),(0,S.Q)(this.notifier),(0,b.j)(()=>this.ngxLoader.stopLoader(y.ZW))).subscribe(i=>{i.success?this.alertService.success():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,S.Q)(this.notifier)).subscribe(n=>{i=n}),i}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(L.nX),e.rXU(M.c$),e.rXU(O.X),e.rXU(A.u),e.rXU(o.vh),e.rXU(m.Bq),e.rXU(x.eD),e.rXU(L.Ix))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-client-operation"]],decls:20,vars:10,consts:[["formEntity","ngForm"],["ModifierCustom","ngbNav"],["agentName","ngModel"],["mobile","ngModel"],["email","ngModel"],["notes","ngModel"],[3,"title","breadcrumbItems"],[1,"col-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],["ngbNav","",1,"nav","nav-pills","nav-customs","nav-danger","mb-3",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink","","translate","hr.employee.basicInfo",1,"nav-link"],["ngbNavContent",""],[1,"tab-content","text-muted"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row"],[1,"col-12","col-md-6"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","agentName","type","text","id","agentName","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","text","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","email","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","email","type","text","id","email",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","agentAddStatusCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","cityCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","channelCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","notes","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","form-check"],["for","isActive","translate","",1,"fw-bold","form-label","w-100"],["name","isActive","inputId","isActive",3,"ngModelChange","ngModel"],["translate","",1,"text-danger","text-center"]],template:function(i,n){if(1&i){const l=e.RV6();e.nrm(0,"app-breadcrumbs",6),e.nI1(1,"translate"),e.j41(2,"div",7)(3,"div",8),e.nrm(4,"ngx-ui-loader",9),e.j41(5,"form",10,0),e.bIt("ngSubmit",function(){return e.eBV(l),e.Njj(n.OnSubmit())}),e.j41(7,"div",11)(8,"ul",12,1)(10,"li",13),e.nrm(11,"a",14),e.DNE(12,me,38,15,"ng-template",15),e.k0s()(),e.j41(13,"div",16),e.nrm(14,"div",17),e.k0s()(),e.j41(15,"div",18)(16,"div",19)(17,"button",20),e.nrm(18,"i",21)(19,"span",22),e.k0s()()()()()()}if(2&i){const l=e.sdS(9);e.FS9("title",0==n.isEditForm?n.addEmployee:e.bMT(1,8,n.editEmployee)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(4),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavOutlet",l)}},dependencies:[o.bT,c.qT,c.me,c.BC,c.cb,c.YS,c.vS,c.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,G.m,M.Mm,U.HW,x.Cv,N.vr,M.D9],encapsulation:2})}}return r})();var ce=a(7673);let ge=(()=>{class r{constructor(t,i,n){this.router=t,this.clientService=i,this.alertService=n}resolve(t,i){const l=this.router.getCurrentNavigation()?.extras?.state?.id;return""===l?(this.alertService.error(),this.router.navigateByUrl("/clients"),(0,ce.of)(null)):this.clientService.getById(l)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(L.Ix),e.KVO(O.X),e.KVO(A.u))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var he=a(56131);let pe=(()=>{class r extends he.E{constructor(t,i,n){super(t,i,n)}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(L.Ix),e.KVO(O.X),e.KVO(A.u))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var ue=a(14221);const be=[{path:"client-list",component:se,resolve:{data:pe},canActivate:[F.B],data:{roles:["admin"]}},{path:"client-list/register",component:W,canActivate:[F.B],data:{roles:["admin"]}},{path:"client-list/edit",component:W,resolve:{data:ge},canActivate:[F.B],data:{roles:["admin"]}},{path:"client-list/profile/:id",component:(()=>{class r{constructor(){this.title="client.client.profile"}ngOnInit(){}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["client-profile"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"]],template:function(i,n){1&i&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.nrm(2,"client-profile-main")),2&i&&(e.FS9("title",e.bMT(1,2,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[G.m,ue.t,M.D9],encapsulation:2})}}return r})(),canActivate:[F.B],data:{roles:["admin"]}}];let Ce=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[L.iI.forChild(be),L.iI]})}}return r})(),ve=(()=>{class r{constructor(){(0,v.eV)(g().loadAnimation)}static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[o.MD,c.YN,c.X1,m.zH,m.Pv,m.Gk,m.h_,m.c9,C.A,I.JG,p.ND,f.r,Ce,u.G,M.h,D.bG,P.q4,U.H_,m.c9,x.th,N.MQ,m.n8]})}}return r})()},75622:(B,E,a)=>{a.d(E,{w:()=>F});var o=a(21413),c=a(56977),m=a(37021),C=a(35335),I=a(45236),p=a(70980),f=a(99437),v=a(18810),T=a(56803),g=a(36158),u=a(54438),M=a(51188),D=a(8147),P=a(22960),U=a(67569),x=a(3888),N=a(60177),L=a(1530);let F=(()=>{class S{constructor(s,d,b,j,y,e,O){this.routerActive=s,this.translateService=d,this.modalService=b,this.baseService=j,this.alertService=y,this.datePipe=e,this.ngxLoader=O,this.title="",this.mainDelay=50,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new o.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=g.cX,this.loaderOperationShap=g.$$,this.operationLoader=g.ZW,this.loaderDeleteShap=g.jg,this.mainTable=g.uG,this.searchLoader=g.a7,this.deleteLoader=g.Fq,this.langArabic="ar",this.entitiesList=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,c.Q)(this.notifier)).subscribe(s=>{this.entities=s.data.result,this.pagination=s.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(g.a7)},s=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,c.Q)(this.notifier)).subscribe(s=>{this.lang=s.lang})}getTranslationText(s){let d="";return this.translateService.get(s).pipe((0,c.Q)(this.notifier)).subscribe(b=>{d=b}),d}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(s){return null!=s?s.substring(0,10)+"...":""}getRenderIndex(s){return this.index++,this.index}successDataTable(s){this.ngxLoader.stopLoader(g.a7),this.pagination.totalItems=s.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(g.a7),this.alertService.error()}openModalTitle(s,d="md"){this.isEditForm=!1,this.form={},this.modalService.open(s,{centered:!0,size:d})}openModal(s,d,b="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:s}],this.modalService.open(d,{centered:!0,size:b})}openModalMoreOperation(s){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(d=>d.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(s){this.ngxLoader.startLoader(g.a7),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.baseService.get(this.pagination).pipe((0,c.Q)(this.notifier)).subscribe(s=>{this.ngxLoader.stopLoader(g.a7),this.entities=s.data,this.pagination.totalItems=s.totalItems,this.LoadSuccess()},s=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(s)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(s){this.pagination.filterType=s.sortField,this.pagination.sortType=1==s.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let s=this.mapRegisterForm(this.form);this.baseService.register(s).pipe((0,m.O)(),(0,C.c)(this.mainDelay),(0,I.Z)(),(0,c.Q)(this.notifier),(0,p.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,f.W)(d=>(0,v.$)(d))).subscribe(d=>{d.success?this.submitFunished():this.alertService.error("general.message."+d.message)},d=>{this.alertService.error("general.message."+d)})}editEntity(){let s=this.mapForm(this.form);this.baseService.edit(s.id,s).pipe((0,m.O)(),(0,C.c)(this.mainDelay),(0,I.Z)(),(0,c.Q)(this.notifier),(0,p.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(d=>{d.success?this.submitFunished():this.alertService.error("general.message."+d.message)},d=>{this.alertService.error("general.message."+d)})}mapForm(s){return s}mapRegisterForm(s){return s.id=0,s}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(g.a7),this.btnDisabled=!0}EditModel(s,d,b="md"){this.isEditForm=!0,this.baseService.getById(s).pipe((0,c.Q)(this.notifier)).subscribe(j=>{j.success?this.form=j.data:this.alertService.error("general.message."+j.message),this.modalService.open(d,{centered:!0,size:b})},j=>{this.alertService.error()})}EditModelTilte(s){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,c.Q)(this.notifier)).subscribe(b=>{b?this.form=b:this.alertService.error("general.message."+b)},b=>{this.alertService.error()})}onSelectionChange(s){this.selectedRow=s,this.lengthSelect=s.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(s){this.pagination.pageNumber=s,this.loadentities()}ListItemChange(s){this.pagination.pageSize=s.target.value,this.loadentities()}searchChange(s){this.pagination.filterValue=s,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(g.Fq);let s=this.selectedRow.map(d=>d.id);this.baseService.deleteRange(s).pipe((0,m.O)(),(0,C.c)(this.mainDelay),(0,I.Z)(),(0,c.Q)(this.notifier),(0,p.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe(d=>{d.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+d)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(s=>s.id)}isEmpty(s){return(void 0===s||null==s||s.length)<=0}OnReset(s){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(s){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(d){return new(d||S)(u.rXU(M.nX),u.rXU(D.c$),u.rXU(P.Bq),u.rXU(U.d),u.rXU(x.u),u.rXU(N.vh),u.rXU(L.eD))}}static{this.\u0275cmp=u.VBU({type:S,selectors:[["app-base"]],viewQuery:function(d,b){if(1&d&&u.GBs(T.XI,5),2&d){let j;u.mGM(j=u.lsd())&&(b.tableMaster=j.first)}},decls:0,vars:0,template:function(d,b){},encapsulation:2})}}return S})()},15084:(B,E,a)=>{a.d(E,{w:()=>p});var o=a(54438),c=a(36158),m=a(8147),C=a(89417),I=a(1530);let p=(()=>{class f{constructor(){this.titleOperation="",this.loaderOperationShap=c.$$,this.deleteLoader=c.Fq,this.deleteConfirm=new o.bkB,this.dismiss=new o.bkB}deleteConfirmFn(){this.deleteConfirm.emit(!0)}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(g){return new(g||f)}}static{this.\u0275cmp=o.VBU({type:f,selectors:[["delete-modal"]],inputs:{titleOperation:"titleOperation"},outputs:{deleteConfirm:"deleteConfirm",dismiss:"dismiss"},decls:15,vars:3,consts:[["formEntity","ngForm"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","general.message.areyouSureDelete"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","delete","translate","general.action.delete",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(g,u){if(1&g){const M=o.RV6();o.j41(0,"form",1,0),o.bIt("ngSubmit",function(){return o.eBV(M),o.Njj(u.deleteConfirmFn())}),o.nrm(2,"ngx-ui-loader",2),o.j41(3,"div",3)(4,"div",4)(5,"button",5),o.bIt("click",function(){return o.eBV(M),o.Njj(u.dismissFn())}),o.k0s()(),o.j41(6,"div",6)(7,"div",7),o.nrm(8,"lord-icon",8),o.j41(9,"div",9),o.nrm(10,"h4",10)(11,"p",11),o.k0s()(),o.j41(12,"div",12),o.nrm(13,"button",13),o.j41(14,"button",14),o.bIt("click",function(){return o.eBV(M),o.Njj(u.dismissFn())}),o.k0s()()()()()}2&g&&(o.R7$(2),o.Y8G("hasProgressBar",!1)("fgsType",u.loaderOperationShap)("loaderId",u.deleteLoader))},dependencies:[m.Mm,C.qT,C.cb,C.cV,I.Cv],encapsulation:2})}}return f})()},88148:(B,E,a)=>{a.d(E,{p:()=>m});var o=a(54438),c=a(8147);let m=(()=>{class C{static{this.\u0275fac=function(f){return new(f||C)}}static{this.\u0275cmp=o.VBU({type:C,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(f,v){1&f&&(o.j41(0,"span",0),o.EFF(1),o.k0s(),o.nrm(2,"span",1),o.j41(3,"span",0),o.EFF(4),o.k0s(),o.nrm(5,"span",2)),2&f&&(o.R7$(),o.JRh(v.pagination.totalItems>v.pagination.pageNumber*v.pagination.pageSize?v.pagination.pageNumber*v.pagination.pageSize:v.pagination.totalItems),o.R7$(3),o.JRh(v.pagination.totalItems))},dependencies:[c.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return C})()},91580:(B,E,a)=>{a.d(E,{g:()=>I});var o=a(54438),c=a(60177),m=a(89417);function C(p,f){if(1&p&&(o.j41(0,"option"),o.EFF(1),o.k0s()),2&p){const v=f.$implicit;o.R7$(),o.JRh(v)}}let I=(()=>{class p{constructor(){this.lengthChange=new o.bkB}ListItemChange(v){this.lengthChange.emit(v)}static{this.\u0275fac=function(T){return new(T||p)}}static{this.\u0275cmp=o.VBU({type:p,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(T,g){1&T&&(o.j41(0,"div",0),o.nrm(1,"span",1),o.j41(2,"select",2),o.bIt("change",function(M){return g.ListItemChange(M)}),o.DNE(3,C,2,1,"option",3),o.k0s()()),2&T&&(o.R7$(3),o.Y8G("ngForOf",g.lengthTable))},dependencies:[c.Sq,m.xH,m.y7],encapsulation:2})}}return p})()}}]);