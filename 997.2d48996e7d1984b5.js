"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[997],{29935:(E,p,s)=>{s.d(p,{m:()=>r});var t=s(54438);let r=(()=>{class h{constructor(g){this.el=g}onChange(){this.el.nativeElement.value=this.el.nativeElement.value.trim()}static{this.\u0275fac=function(n){return new(n||h)(t.rXU(t.aKT))}}static{this.\u0275dir=t.FsC({type:h,selectors:[["","InputTirmFilter",""]],hostBindings:function(n,d){1&n&&t.bIt("change",function(){return d.onChange()})}})}}return h})()},75622:(E,p,s)=>{s.d(p,{w:()=>I});var t=s(21413),r=s(56977),h=s(37021),m=s(35335),g=s(45236),n=s(70980),d=s(99437),l=s(18810),u=s(35263),a=s(36158),o=s(54438),f=s(51188),v=s(8147),M=s(22960),b=s(67569),L=s(3888),O=s(60177),C=s(1530);let I=(()=>{class D{constructor(e,i,c,_,S,P,T){this.routerActive=e,this.translateService=i,this.modalService=c,this.baseService=_,this.alertService=S,this.datePipe=P,this.ngxLoader=T,this.title="",this.mainDelay=50,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new t.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=a.cX,this.loaderOperationShap=a.$$,this.operationLoader=a.ZW,this.loaderDeleteShap=a.jg,this.mainTable=a.uG,this.searchLoader=a.a7,this.deleteLoader=a.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,r.Q)(this.notifier)).subscribe(e=>{this.entities=e.data.result,this.pagination=e.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(a.a7)},e=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,r.Q)(this.notifier)).subscribe(e=>{this.lang=e.lang})}getTranslationText(e){let i="";return this.translateService.get(e).pipe((0,r.Q)(this.notifier)).subscribe(c=>{i=c}),i}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(e){return null!=e?e.substring(0,10)+"...":""}getRenderIndex(e){return this.index++,this.index}successDataTable(e){this.ngxLoader.stopLoader(a.a7),this.pagination.totalItems=e.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(a.a7),this.alertService.error()}openModalTitle(e,i="md"){this.isEditForm=!1,this.form={},this.modalService.open(e,{centered:!0,size:i})}openModal(e,i,c="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:e}],this.modalService.open(i,{centered:!0,size:c})}openModalMoreOperation(e){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(i=>i.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(e){this.ngxLoader.startLoader(a.a7),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(a.a7),this.baseService.get(this.pagination).pipe((0,r.Q)(this.notifier)).subscribe(e=>{this.ngxLoader.stopLoader(a.a7),this.entities=e.data,this.pagination.totalItems=e.totalItems,this.LoadSuccess()},e=>{this.ngxLoader.stopLoader(a.a7),this.alertService.error(e)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(e){this.pagination.filterType=e.sortField,this.pagination.sortType=1==e.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let e=this.mapRegisterForm(this.form);this.baseService.register(e).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,g.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,d.W)(i=>(0,l.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let e=this.mapForm(this.form);this.baseService.edit(e.id,e).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,g.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}mapForm(e){return e}mapRegisterForm(e){return e.id=0,e}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(a.a7),this.btnDisabled=!0}EditModel(e,i,c="md"){this.isEditForm=!0,this.baseService.getById(e).pipe((0,r.Q)(this.notifier)).subscribe(_=>{_.success?this.form=_.data:this.alertService.error("general.message."+_.message),this.modalService.open(i,{centered:!0,size:c})},_=>{this.alertService.error()})}EditModelTilte(e){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,r.Q)(this.notifier)).subscribe(c=>{c?this.form=c:this.alertService.error("general.message."+c)},c=>{this.alertService.error()})}onSelectionChange(e){this.selectedRow=e,this.lengthSelect=e.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(e){this.pagination.pageNumber=e,this.loadentities()}ListItemChange(e){this.pagination.pageSize=e.target.value,this.loadentities()}searchChange(e){this.pagination.filterValue=e,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(a.Fq);let e=this.selectedRow.map(i=>i.id);this.baseService.deleteRange(e).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,g.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(a.Fq))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(e=>e.id)}isEmpty(e){return(void 0===e||null==e||e.length)<=0}OnReset(e){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(e){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(i){return new(i||D)(o.rXU(f.nX),o.rXU(v.c$),o.rXU(M.Bq),o.rXU(b.d),o.rXU(L.u),o.rXU(O.vh),o.rXU(C.eD))}}static{this.\u0275cmp=o.VBU({type:D,selectors:[["app-base"]],viewQuery:function(i,c){if(1&i&&o.GBs(u.XI,5),2&i){let _;o.mGM(_=o.lsd())&&(c.tableMaster=_.first)}},decls:0,vars:0,template:function(i,c){},encapsulation:2})}}return D})()},15084:(E,p,s)=>{s.d(p,{w:()=>n});var t=s(54438),r=s(36158),h=s(8147),m=s(89417),g=s(1530);let n=(()=>{class d{constructor(){this.titleOperation="",this.loaderOperationShap=r.$$,this.deleteLoader=r.Fq,this.deleteConfirm=new t.bkB,this.dismiss=new t.bkB}deleteConfirmFn(){this.deleteConfirm.emit(!0)}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(a){return new(a||d)}}static{this.\u0275cmp=t.VBU({type:d,selectors:[["delete-modal"]],inputs:{titleOperation:"titleOperation"},outputs:{deleteConfirm:"deleteConfirm",dismiss:"dismiss"},decls:15,vars:3,consts:[["formEntity","ngForm"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","general.message.areyouSureDelete"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","delete","translate","general.action.delete",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(a,o){if(1&a){const f=t.RV6();t.j41(0,"form",1,0),t.bIt("ngSubmit",function(){return t.eBV(f),t.Njj(o.deleteConfirmFn())}),t.nrm(2,"ngx-ui-loader",2),t.j41(3,"div",3)(4,"div",4)(5,"button",5),t.bIt("click",function(){return t.eBV(f),t.Njj(o.dismissFn())}),t.k0s()(),t.j41(6,"div",6)(7,"div",7),t.nrm(8,"lord-icon",8),t.j41(9,"div",9),t.nrm(10,"h4",10)(11,"p",11),t.k0s()(),t.j41(12,"div",12),t.nrm(13,"button",13),t.j41(14,"button",14),t.bIt("click",function(){return t.eBV(f),t.Njj(o.dismissFn())}),t.k0s()()()()()}2&a&&(t.R7$(2),t.Y8G("hasProgressBar",!1)("fgsType",o.loaderOperationShap)("loaderId",o.deleteLoader))},dependencies:[h.Mm,m.qT,m.cb,m.cV,g.Cv],encapsulation:2})}}return d})()},88148:(E,p,s)=>{s.d(p,{p:()=>h});var t=s(54438),r=s(8147);let h=(()=>{class m{static{this.\u0275fac=function(d){return new(d||m)}}static{this.\u0275cmp=t.VBU({type:m,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(d,l){1&d&&(t.j41(0,"span",0),t.EFF(1),t.k0s(),t.nrm(2,"span",1),t.j41(3,"span",0),t.EFF(4),t.k0s(),t.nrm(5,"span",2)),2&d&&(t.R7$(),t.JRh(l.pagination.totalItems>l.pagination.pageNumber*l.pagination.pageSize?l.pagination.pageNumber*l.pagination.pageSize:l.pagination.totalItems),t.R7$(3),t.JRh(l.pagination.totalItems))},dependencies:[r.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return m})()},91580:(E,p,s)=>{s.d(p,{g:()=>g});var t=s(54438),r=s(60177),h=s(89417);function m(n,d){if(1&n&&(t.j41(0,"option"),t.EFF(1),t.k0s()),2&n){const l=d.$implicit;t.R7$(),t.JRh(l)}}let g=(()=>{class n{constructor(){this.lengthChange=new t.bkB}ListItemChange(l){this.lengthChange.emit(l)}static{this.\u0275fac=function(u){return new(u||n)}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(u,a){1&u&&(t.j41(0,"div",0),t.nrm(1,"span",1),t.j41(2,"select",2),t.bIt("change",function(f){return a.ListItemChange(f)}),t.DNE(3,m,2,1,"option",3),t.k0s()()),2&u&&(t.R7$(3),t.Y8G("ngForOf",a.lengthTable))},dependencies:[r.Sq,h.xH,h.y7],encapsulation:2})}}return n})()}}]);