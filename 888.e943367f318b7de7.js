"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[888],{33826:(p7,b,i)=>{i.d(b,{Q:()=>q});var z=i(67569),L=i(45312),r=i(54438),I=i(21626);let q=(()=>{class p extends z.d{constructor(o){super(o,L.c.apiUrl+"Order/")}GetOrderLookUp(){return this.http.get(this.baseUrl+"OrderLookUp")}districtsByCity(o){return this.http.get(this.baseUrl+"districtsByCity/"+o)}registerNewOrder(o){return this.http.post(this.baseUrl+"RegisterNewOrder",o)}EditOrder(o){return this.http.post(this.baseUrl+"EditOrder",o)}getServicesByCategory(o){return this.http.post(this.baseUrl+"servicesByCategory",o)}getPendingOrders(o){return this.http.post(this.baseUrl+"GetAllPendingOrder",o)}getRecallOrders(o){return this.http.post(this.baseUrl+"GetAllRecallOrder",o)}getAfterSale(o){return this.http.post(this.baseUrl+"GetAfterSale",o)}UpdateCallCounter(o){return this.http.put(this.baseUrl+"UpdateCallCounter/"+o,{})}SubmitOrder(o){return this.http.put(this.baseUrl+"SureOrder/"+o,{})}assignOrder(o){return this.http.put(this.baseUrl+"AssignOrder/"+o,{})}SureOrderRollBack(o){return this.http.put(this.baseUrl+"SureOrderRollBack/"+o,{})}GetChartData(o){return this.http.post(this.baseUrl+"GetDailySummary",o)}GetTotalOrderSummaryChart(o){return this.http.post(this.baseUrl+"GetTotalOrderSummaryChart",o)}GetTotalOrderTableSummaryChart(o){return this.http.post(this.baseUrl+"GetTotalOrderTableSummaryChart",o)}GetChartLookup(){return this.http.get(this.baseUrl+"GetChartLookup")}GetTimeAvailableLookup(){return this.http.get(this.baseUrl+"GetTimeAvailableLookup")}GetAvailableTime(o){return this.http.post(this.baseUrl+"GetAvailableTime",o)}ReopenOrder(o){return this.http.put(this.baseUrl+"ReopenOrder",o)}CancelOrder(o){return this.http.put(this.baseUrl+"CancelOrder",o)}ChangeTeamStatus(o){return this.http.put(this.baseUrl+"ChangeTeamStatus",o)}GetById(o){return this.http.get(this.baseUrl+"GetById/"+o)}GoLead(o){return this.http.get(this.baseUrl+"GoLead/"+o)}GetOrderTimeLine(o){return this.http.get(this.baseUrl+"GetOrderTimeLine/"+o)}SaveNoAnswer(o){return this.http.get(this.baseUrl+"SaveNoAnswer/"+o)}RemoveAssign(o){return this.http.put(this.baseUrl+"RemoveAssign/"+o,{})}GetTeamByCity(o){return this.http.post(this.baseUrl+"GetTeamByCity",o)}GetTestOrdersJson(){return this.http.get("/assets/testorder.json")}static{this.\u0275fac=function(m){return new(m||p)(r.KVO(I.Qq))}}static{this.\u0275prov=r.jDH({token:p,factory:p.\u0275fac,providedIn:"root"})}}return p})()},10888:(p7,b,i)=>{i.r(b),i.d(b,{StatisticsModule:()=>Gw});var z=i(60177),L=i(89417),r=i(69005),I=i(32454),q=i(66900),p=i(91022),U2=i(70255),o=i(93887),m=i(8147),C7=i(35263),d7=i(65430),u7=i(41631),h7=i(1530),V=i(72510),S=i(51188),W=i(23128),g7=i(21413),x7=i(56977),c=i(54438),$=i(33826),N7=i(91426),_=i(26364),b7=i(40724),J=i(4626);function S7(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s(),c.j41(11,"td"),c.EFF(12),c.k0s(),c.j41(13,"td")(14,"span",51),c.EFF(15),c.k0s()(),c.j41(16,"td")(17,"span",52),c.EFF(18),c.k0s()()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.day),c.R7$(2),c.JRh(l.averageNumberofOrders),c.R7$(2),c.JRh(l.numberOfOrders),c.R7$(2),c.JRh(l.numberOfInvoices),c.R7$(2),c.JRh(l.valueInvoices),c.R7$(2),c.JRh(l.percentage),c.R7$(3),c.JRh(l.dailyTarget),c.R7$(3),c.JRh(l.unrealizedRevenue)}}function k7(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.averageDaily)}}function w7(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}function v7(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}function y7(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s(),c.j41(5,"td"),c.EFF(6),c.k0s(),c.j41(7,"td"),c.EFF(8),c.k0s(),c.j41(9,"td"),c.EFF(10),c.k0s()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.name),c.R7$(2),c.JRh(l.schedules),c.R7$(2),c.JRh(l.invoices),c.R7$(2),c.JRh(l.averageOrder),c.R7$(2),c.JRh(l.orderValue)}}let A7=(()=>{class e{constructor(l,a,s,t){this.orderService=l,this.datePipe=a,this.excelService=s,this.translateService=t,this.title="statistics.orderManager.title",this.pagination={},this.teams=[],this.cities=[],this.searchForm={},this.orderDays=[],this.topPages=[],this.zones=[],this.num=0,this.option={startVal:this.num,useEasing:!0,duration:2,decimalPlaces:2},this.dailyOrders={name:"",data:[]},this.totalInvoices={name:"",data:[]},this.invoiceAmount={name:"",data:[]},this.unrealizedRevenue={name:"",data:[]},this.days=[],this.totalBar={avgTimeOrder:0,avgTeamOrder:0,avgValueOrder:0,totalOrder:0,totalInvoices:0},this.tableChart=[],this.notifier=new g7.B}ngOnInit(){this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]'),this.setCurrentMonthRange(),this.getScreen(),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]'),this.fillDays(),this.setTopPages(),this.GetChartLookup(),this.setZones()}GetChartData(){this.orderService.GetChartData(this.pagination).subscribe(l=>{this.dailyOrders=l.dailyOrders,this.totalInvoices=l.totalInvoices,this.invoiceAmount=l.invoiceAmount,this.unrealizedRevenue=l.unrealizedRevenue,this.days=l.days,this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]')})}getScreen(){this.filter(),this.GetChartData(),this.GetTotalOrderSummaryChart(),this.GetTotalOrderTableSummaryChart()}GetTotalOrderSummaryChart(){this.orderService.GetTotalOrderSummaryChart(this.pagination).subscribe(l=>{let a=l.data;this.totalBar.avgTimeOrder=a.avgTimeOrder,this.totalBar.avgTeamOrder=a.avgTeamOrder,this.totalBar.avgValueOrder=a.avgValueOrder,this.totalBar.totalOrder=a.totalOrder,this.totalBar.totalInvoices=a.totalInvoices})}GetTotalOrderTableSummaryChart(){this.orderService.GetTotalOrderTableSummaryChart(this.pagination).subscribe(l=>{this.tableChart=l.data})}GetChartLookup(){this.orderService.GetChartLookup().subscribe(l=>{this.teams=l.data.teams,this.cities=l.data.city})}getChartColorsArray(l){return(l=JSON.parse(l)).map(function(a){var s=a.replace(" ","");if(-1===s.indexOf(",")){var t=getComputedStyle(document.documentElement).getPropertyValue(s);return t?t=t.replace(" ",""):s}var n=a.split(",");if(2==n.length){var M=getComputedStyle(document.documentElement).getPropertyValue(n[0]);return"rgba("+M+","+n[1]+")"}return s})}_StackedColumnChart(l){l=this.getChartColorsArray(l),this.StackedColumnChart={series:[{name:this.dailyOrders.name,data:this.dailyOrders.data},{name:this.totalInvoices.name,data:this.totalInvoices.data},{name:this.invoiceAmount.name,data:this.divingResult(this.invoiceAmount.data)},{name:this.unrealizedRevenue.name,data:this.divingResult(this.unrealizedRevenue.data)}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,borderRadius:3,columnWidth:"90%",endingShape:"rounded"},dataLabels:{enabled:!0,style:{fontSize:"12px",colors:["#000"]},formatter:function(a){return a.toFixed(2)},offsetY:-20}},xaxis:{type:"datetime",categories:this.days},legend:{position:"right",offsetY:40},fill:{opacity:1},colors:l}}_Pyramid(l){l=this.getChartColorsArray(l),this.Pyramid={series:[{name:"",data:[501,276,145,95,64,63]}],chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:0,horizontal:!0,distributed:!0,barHeight:"80%",isFunnel:!0}},colors:l,dataLabels:{enabled:!0,formatter:function(a,s){return s.w.globals.labels[s.dataPointIndex]+":  "+a},dropShadow:{enabled:!0}},title:{align:"center"},xaxis:{categories:["\u0627\u0644\u0631\u064a\u0627\u0636","  \u062c\u062f\u0629","\u0627\u0644\u0634\u0631\u0642\u064a\u0629"," \u0627\u0644\u0645\u062f\u064a\u0646\u0629 "," \u062a\u0628\u0648\u0643","\u064a\u0646\u0628\u0639"]},legend:{show:!1}}}fillDays(){this.orderDays=[{day:"1-12-2024",averageNumberofOrders:3.06,dailyOrderCount:72,invoices:52,value:19782,percentage:"71%",dailyTarget:27696,unrealizedRevenue:-7914},{day:"2-12-2024",averageNumberofOrders:3.1,dailyOrderCount:75,invoices:53,value:2e4,percentage:"72%",dailyTarget:28e3,unrealizedRevenue:-8e3},{day:"3-12-2024",averageNumberofOrders:3.12,dailyOrderCount:78,invoices:55,value:20500,percentage:"73%",dailyTarget:28500,unrealizedRevenue:-8100},{day:"4-12-2024",averageNumberofOrders:3.05,dailyOrderCount:80,invoices:54,value:19e3,percentage:"70%",dailyTarget:27e3,unrealizedRevenue:-8500},{day:"5-12-2024",averageNumberofOrders:3.08,dailyOrderCount:74,invoices:53,value:2e4,percentage:"71%",dailyTarget:27500,unrealizedRevenue:-7500},{day:"6-12-2024",averageNumberofOrders:3.07,dailyOrderCount:77,invoices:56,value:21e3,percentage:"74%",dailyTarget:29e3,unrealizedRevenue:-8e3},{day:"7-12-2024",averageNumberofOrders:3.11,dailyOrderCount:79,invoices:58,value:21500,percentage:"75%",dailyTarget:29500,unrealizedRevenue:-8500},{day:"8-12-2024",averageNumberofOrders:3.09,dailyOrderCount:76,invoices:55,value:2e4,percentage:"71%",dailyTarget:28500,unrealizedRevenue:-7800},{day:"9-12-2024",averageNumberofOrders:3.13,dailyOrderCount:81,invoices:57,value:22e3,percentage:"76%",dailyTarget:3e4,unrealizedRevenue:-8e3},{day:"10-12-2024",averageNumberofOrders:3.15,dailyOrderCount:83,invoices:60,value:22500,percentage:"77%",dailyTarget:31e3,unrealizedRevenue:-8200},{day:"11-12-2024",averageNumberofOrders:3.1,dailyOrderCount:79,invoices:59,value:21500,percentage:"75%",dailyTarget:30500,unrealizedRevenue:-8100},{day:"12-12-2024",averageNumberofOrders:3.08,dailyOrderCount:74,invoices:56,value:21e3,percentage:"74%",dailyTarget:29500,unrealizedRevenue:-8e3},{day:"13-12-2024",averageNumberofOrders:3.11,dailyOrderCount:78,invoices:57,value:22e3,percentage:"76%",dailyTarget:3e4,unrealizedRevenue:-7900},{day:"14-12-2024",averageNumberofOrders:3.09,dailyOrderCount:80,invoices:58,value:23e3,percentage:"78%",dailyTarget:31e3,unrealizedRevenue:-7800},{day:"15-12-2024",averageNumberofOrders:3.06,dailyOrderCount:75,invoices:54,value:21e3,percentage:"75%",dailyTarget:29500,unrealizedRevenue:-7700}]}setTopPages(){this.topPages=[{name:"\u0627\u0644\u0637\u064a\u0631\u064a",schedules:"72",invoices:"45",averageOrder:"405",orderValue:"18,226"},{name:"\u0639\u0628\u062f\u0627\u0644\u0644\u0647",schedules:"71",invoices:"45",averageOrder:"438",orderValue:"19,731"},{name:"\u0635\u0628\u062d\u064a",schedules:"72",invoices:"38",averageOrder:"524",orderValue:"19,914"},{name:"\u0627\u0633\u0644\u0627\u0645 \u062d\u0633\u0646",schedules:"73",invoices:"45",averageOrder:"404",orderValue:"18,179"},{name:"\u0639\u0628\u062f\u0627\u0644\u0628\u0627\u0642\u064a",schedules:"68",invoices:"32",averageOrder:"493",orderValue:"15,769"},{name:"\u0627\u0633\u0644\u0627\u0645",schedules:"73",invoices:"32",averageOrder:"487",orderValue:"15,594"},{name:"\u0627\u062f\u0645",schedules:"72",invoices:"39",averageOrder:"441",orderValue:"17,190"}]}setZones(){this.zones=[{name:"\u0627\u0644\u0631\u064a\u0627\u0636",schedules:501,averageDaily:4.8},{name:"\u062c\u062f\u0629",schedules:276,averageDaily:4.6},{name:"\u062a\u0628\u0648\u0643",schedules:64,averageDaily:4.3},{name:"\u0627\u0644\u0634\u0631\u0642\u064a\u0629",schedules:145,averageDaily:4.8},{name:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",schedules:95,averageDaily:3.2},{name:"\u064a\u0646\u0628\u0639",schedules:63,averageDaily:4.2}]}setCurrentMonthRange(){const l=new Date,a=new Date(l.getFullYear(),l.getMonth(),1),s=new Date(l.getFullYear(),l.getMonth(),l.getDate());this.searchForm.dates={from:a,to:s}}filter(){var l=this.searchForm.dates;l+void 0&&"to"in l?(this.pagination.dateFrom=this.datePipe.transform(l.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(l.to,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null)}divingResult(l){return l.map(s=>(s/1e3).toFixed(2))}onExportXlsx(){let l=this.mapExcel();this.excelService.exportAsExcelFile(l,this.getTranslationText(this.title),[])}mapExcel(){let l=[];return this.tableChart?.forEach(a=>{l.push({day:a.day,averageNumberofOrders:a.averageNumberofOrders,numberOfOrders:a.numberOfOrders,numberOfInvoices:a.numberOfInvoices,valueInvoices:a.valueInvoices,percentage:a.percentage,dailyTarget:a.dailyTarget,unrealizedRevenue:a.unrealizedRevenue})}),l}getTranslationText(l){let a="";return this.translateService.get(l).pipe((0,x7.Q)(this.notifier)).subscribe(s=>{a=s}),a}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(a){return new(a||e)(c.rXU($.Q),c.rXU(z.vh),c.rXU(N7.V),c.rXU(m.c$))}}static{this.\u0275cmp=c.VBU({type:e,selectors:[["app-order-manager"]],decls:249,vars:54,consts:[[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"search-box"],["name","name","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-md-auto","ms-auto"],[1,"d-flex","hastck","gap-2","flex-wrap"],[1,"btn","btn-success",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["translate","general.action.search"],[1,"row"],[1,"col-12","col-md-2"],[1,"d-flex","align-items-center"],[1,"avatar-sm","flex-shrink-0"],[1,"avatar-title","bg-light","text-primary","rounded-circle","fs-3"],[1,"ri-money-dollar-circle-fill","align-middle"],[1,"flex-grow-1","ms-3"],["translate","statistics.orderManager.totalInvoices",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"mb-0"],[1,"counter-value",3,"countUp","options"],[1,"avatar-title","bg-light","text-warning","rounded-circle","fs-3"],["translate","statistics.orderManager.totalOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"avatar-title","bg-light","text-success","rounded-circle","fs-3"],["translate","statistics.orderManager.avgValueOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"col-12","col-md-3"],[1,"avatar-title","bg-light","text-danger","rounded-circle","fs-3"],["translate","statistics.orderManager.avgTeamOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"avatar-title","bg-light","text-info","rounded-circle","fs-3"],["translate","statistics.orderManager.avgTimeOrder",1,"text-uppercase","fw-semibold","fs-12","text-muted","mb-1"],[1,"col-12"],[1,"card-header"],["translate","statistics.orderManager.orderDaily",1,"card-title","mb-0"],["dir","ltr",3,"series","chart","dataLabels","plotOptions","responsive","xaxis","legend","fill","colors"],[3,"exportXlsx","showSearch","showAdd","showAllStr","totalItems","title"],[1,"table-responsive","table-card"],[1,"table","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col"],[1,"col-12","col-md-6"],[1,"card-title","mb-0"],["id","chart"],[1,"apex-charts",3,"series","chart","dataLabels","plotOptions","xaxis","colors","title","legend"],[1,"card","card-height-100"],[1,"card-header","align-items-center","d-flex"],["scope","col",2,"width","62"],[1,"col-xl-4","col-md-6"],[1,"card-title","mb-0","flex-grow-1"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-danger-subtle","text-danger"]],template:function(a,s){1&a&&(c.nrm(0,"app-breadcrumbs",0),c.nI1(1,"translate"),c.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"ng-select",6),c.nI1(8,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.pagination.cityCode,n)||(s.pagination.cityCode=n),n}),c.k0s()()(),c.j41(9,"div",4)(10,"div",5)(11,"ng-select",6),c.nI1(12,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.pagination.teamCode,n)||(s.pagination.teamCode=n),n}),c.k0s()()(),c.j41(13,"div",7)(14,"input",8),c.nI1(15,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.searchForm.dates,n)||(s.searchForm.dates=n),n}),c.k0s()(),c.j41(16,"div",9)(17,"div",10)(18,"button",11),c.bIt("click",function(){return s.getScreen()}),c.nrm(19,"i",12)(20,"span",13),c.k0s()()()()()(),c.j41(21,"div",14)(22,"div",15)(23,"div",1)(24,"div",2)(25,"div",16)(26,"div",17)(27,"span",18),c.nrm(28,"i",19),c.k0s()(),c.j41(29,"div",20),c.nrm(30,"p",21),c.j41(31,"h4",22),c.nrm(32,"span",23),c.k0s()()()()()(),c.j41(33,"div",15)(34,"div",1)(35,"div",2)(36,"div",16)(37,"div",17)(38,"span",24),c.nrm(39,"i",19),c.k0s()(),c.j41(40,"div",20),c.nrm(41,"p",25),c.j41(42,"h4",22),c.nrm(43,"span",23),c.k0s()()()()()(),c.j41(44,"div",15)(45,"div",1)(46,"div",2)(47,"div",16)(48,"div",17)(49,"span",26),c.nrm(50,"i",19),c.k0s()(),c.j41(51,"div",20),c.nrm(52,"p",27),c.j41(53,"h4",22),c.nrm(54,"span",23),c.k0s()()()()()(),c.j41(55,"div",28)(56,"div",1)(57,"div",2)(58,"div",16)(59,"div",17)(60,"span",29),c.nrm(61,"i",19),c.k0s()(),c.j41(62,"div",20),c.nrm(63,"p",30),c.j41(64,"h4",22),c.nrm(65,"span",23),c.k0s()()()()()(),c.j41(66,"div",28)(67,"div",1)(68,"div",2)(69,"div",16)(70,"div",17)(71,"span",31),c.nrm(72,"i",19),c.k0s()(),c.j41(73,"div",20),c.nrm(74,"p",32),c.j41(75,"h4",22),c.nrm(76,"span",23),c.k0s()()()()()()(),c.j41(77,"div",14)(78,"div",33)(79,"div",1)(80,"div",34),c.nrm(81,"h4",35),c.k0s(),c.j41(82,"div",2),c.nrm(83,"apx-chart",36),c.k0s()()(),c.j41(84,"div",33)(85,"div",1)(86,"base-filter",37),c.bIt("exportXlsx",function(){return s.onExportXlsx()}),c.k0s(),c.j41(87,"div",2)(88,"div",38)(89,"table",39)(90,"thead",40)(91,"tr")(92,"th",41),c.EFF(93,"\u0627\u0644\u064a\u0648\u0645"),c.k0s(),c.j41(94,"th",41),c.EFF(95,"\u0645\u062a\u0648\u0633\u0637 \u0639\u062f\u062f\u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s(),c.j41(96,"th",41),c.EFF(97,"\u0639\u062f\u062f \u0627\u0644\u0637\u0644\u0628\u0627\u062a "),c.k0s(),c.j41(98,"th",41),c.EFF(99,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(100,"th",41),c.EFF(101,"\u0642\u064a\u0645\u0629"),c.k0s(),c.j41(102,"th",41),c.EFF(103,"\u0627\u0644\u0646\u0633\u0628\u0629 "),c.k0s(),c.j41(104,"th",41),c.EFF(105,"\u0627\u0644\u0647\u062f\u0641 \u0627\u0644\u064a\u0648\u0645\u0629"),c.k0s(),c.j41(106,"th",41),c.EFF(107,"\u0627\u064a\u0631\u0627\u062f \u063a\u064a\u0631 \u0645\u062d\u0642\u0642"),c.k0s()()(),c.j41(108,"tbody"),c.Z7z(109,S7,19,8,"tr",null,c.Vm6),c.k0s()()()()()()(),c.j41(111,"div",14)(112,"div",42)(113,"div",1)(114,"div",34)(115,"h4",43),c.EFF(116,"\u0627\u0644\u0645\u062f\u0646 - \u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s()(),c.j41(117,"div",2)(118,"div",44),c.nrm(119,"apx-chart",45),c.k0s()()()(),c.j41(120,"div",42)(121,"div",46)(122,"div",47)(123,"h4",43),c.EFF(124,"\u0627\u0644\u0645\u062f\u0646 - \u0639\u062f\u062f \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s()(),c.j41(125,"div",2)(126,"div",38)(127,"table",39)(128,"thead",40)(129,"tr")(130,"th",48),c.EFF(131,"\u0627\u0644\u0645\u0646\u0637\u0642\u0629 "),c.k0s(),c.j41(132,"th",41),c.EFF(133,"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u0634\u0647\u0631\u064a\u0629"),c.k0s(),c.j41(134,"th",41),c.EFF(135,"\u0627\u0644\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u064a\u0648\u0645\u064a"),c.k0s()()(),c.j41(136,"tbody"),c.Z7z(137,k7,7,3,"tr",null,c.Vm6),c.j41(139,"tr")(140,"th",48),c.EFF(141," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(142,"th",41),c.EFF(143,"1,144"),c.k0s(),c.j41(144,"th",41),c.EFF(145,"4.5"),c.k0s()()()()()()()()(),c.j41(146,"div",14)(147,"div",49)(148,"div",46)(149,"div",47)(150,"h4",50),c.EFF(151," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0634\u0631\u0642\u064a\u0629 \u0648\u0627\u0644\u0645\u062f\u064a\u0646\u0629 : \u0645\u062d\u0645\u062f \u0628\u0644\u0627\u0644"),c.k0s()(),c.j41(152,"div",2)(153,"div",38)(154,"table",39)(155,"thead",40)(156,"tr")(157,"th",48),c.EFF(158,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(159,"th",41),c.EFF(160,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(161,"th",41),c.EFF(162,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(163,"th",41),c.EFF(164,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(165,"th",41),c.EFF(166,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(167,"tbody"),c.Z7z(168,w7,11,5,"tr",null,c.Vm6),c.j41(170,"tr")(171,"th",48),c.EFF(172," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(173,"th",41),c.EFF(174,"501"),c.k0s(),c.j41(175,"th",41),c.EFF(176,"276"),c.k0s(),c.j41(177,"th",41),c.EFF(178,"451 "),c.k0s(),c.j41(179,"th",41),c.EFF(180,"124,603"),c.k0s()()()()()()()(),c.j41(181,"div",49)(182,"div",46)(183,"div",47)(184,"h4",50),c.EFF(185," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u062c\u062f\u0629 : \u0645\u0644\u0627\u0643 \u0627\u0644\u062c\u0628\u0631\u064a\u0646"),c.k0s()(),c.j41(186,"div",2)(187,"div",38)(188,"table",39)(189,"thead",40)(190,"tr")(191,"th",48),c.EFF(192,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(193,"th",41),c.EFF(194,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(195,"th",41),c.EFF(196,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(197,"th",41),c.EFF(198,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(199,"th",41),c.EFF(200,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(201,"tbody"),c.Z7z(202,v7,11,5,"tr",null,c.Vm6),c.j41(204,"tr")(205,"th",48),c.EFF(206," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(207,"th",41),c.EFF(208,"501"),c.k0s(),c.j41(209,"th",41),c.EFF(210,"276"),c.k0s(),c.j41(211,"th",41),c.EFF(212,"451 "),c.k0s(),c.j41(213,"th",41),c.EFF(214,"124,603"),c.k0s()()()()()()()(),c.j41(215,"div",49)(216,"div",46)(217,"div",47)(218,"h4",50),c.EFF(219," \u0645\u0634\u0631\u0641 \u0645\u0646\u0637\u0642\u0629 \u0627\u0644\u0634\u0631\u0642\u064a\u0629 \u0648\u0627\u0644\u0645\u062f\u064a\u0646\u0629 : \u0645\u062d\u0645\u062f \u0628\u0644\u0627\u0644"),c.k0s()(),c.j41(220,"div",2)(221,"div",38)(222,"table",39)(223,"thead",40)(224,"tr")(225,"th",48),c.EFF(226,"\u0627\u0633\u0645 \u0627\u0644\u0645\u0634\u0631\u0641"),c.k0s(),c.j41(227,"th",41),c.EFF(228,"\u0645\u0648\u0627\u0639\u064a\u062f"),c.k0s(),c.j41(229,"th",41),c.EFF(230,"\u0641\u0648\u0627\u062a\u064a\u0631"),c.k0s(),c.j41(231,"th",41),c.EFF(232,"\u0645\u062a\u0648\u0633\u0637 \u0627\u0644\u0637\u0644\u0628"),c.k0s(),c.j41(233,"th",41),c.EFF(234,"\u0642\u064a\u0645\u0629 \u0627\u0644\u0637\u0644\u0628\u0627\u062a"),c.k0s()()(),c.j41(235,"tbody"),c.Z7z(236,y7,11,5,"tr",null,c.Vm6),c.j41(238,"tr")(239,"th",48),c.EFF(240," \u0627\u0644\u0625\u062c\u0645\u0627\u0644\u064a "),c.k0s(),c.j41(241,"th",41),c.EFF(242,"501"),c.k0s(),c.j41(243,"th",41),c.EFF(244,"276"),c.k0s(),c.j41(245,"th",41),c.EFF(246,"451 "),c.k0s(),c.j41(247,"th",41),c.EFF(248,"124,603"),c.k0s()()()()()()()()()),2&a&&(c.FS9("title",c.bMT(1,46,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.FS9("placeholder",c.bMT(8,48,"statistics.orderReview.cities")),c.Y8G("items",s.cities)("multiple",!1),c.R50("ngModel",s.pagination.cityCode),c.R7$(4),c.FS9("placeholder",c.bMT(12,50,"statistics.orderReview.teams")),c.Y8G("items",s.teams)("multiple",!1),c.R50("ngModel",s.pagination.teamCode),c.R7$(3),c.FS9("placeholder",c.bMT(15,52,"statistics.orderReview.dateReview")),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.searchForm.dates),c.R7$(18),c.Y8G("countUp",s.totalBar.totalInvoices)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.totalOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgValueOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgTeamOrder)("options",s.option),c.R7$(11),c.Y8G("countUp",s.totalBar.avgTimeOrder)("options",s.option),c.R7$(7),c.Y8G("series",s.StackedColumnChart.series)("chart",s.StackedColumnChart.chart)("dataLabels",s.StackedColumnChart.dataLabels)("plotOptions",s.StackedColumnChart.plotOptions)("responsive",s.StackedColumnChart.responsive)("xaxis",s.StackedColumnChart.xaxis)("legend",s.StackedColumnChart.legend)("fill",s.StackedColumnChart.fill)("colors",s.StackedColumnChart.colors),c.R7$(3),c.Y8G("showSearch",!1)("showAdd",!1)("showAllStr",!1)("totalItems",10)("title","statistics.orderManager.orderForDays"),c.R7$(23),c.Dyx(s.tableChart),c.R7$(10),c.Y8G("series",s.Pyramid.series)("chart",s.Pyramid.chart)("dataLabels",s.Pyramid.dataLabels)("plotOptions",s.Pyramid.plotOptions)("xaxis",s.Pyramid.xaxis)("colors",s.Pyramid.colors)("title",s.Pyramid.title)("legend",s.Pyramid.legend),c.R7$(18),c.Dyx(s.zones),c.R7$(31),c.Dyx(s.topPages),c.R7$(34),c.Dyx(s.topPages),c.R7$(34),c.Dyx(s.topPages))},dependencies:[L.me,L.BC,L.vS,p.kL,U2.G,_.m,b7.b,m.Mm,V.vr,J.Q,m.D9],encapsulation:2})}}return e})();var C=i(50969);const h_icon=[512,512,[128664,"automobile"],"f1b9","M135.2 117.4L109.1 192l293.8 0-26.1-74.6C372.3 104.6 360.2 96 346.6 96L165.4 96c-13.6 0-25.7 8.6-30.2 21.4zM39.6 196.8L74.8 96.3C88.3 57.8 124.6 32 165.4 32l181.2 0c40.8 0 77.1 25.8 90.6 64.3l35.2 100.5c23.2 9.6 39.6 32.5 39.6 59.2l0 144 0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L96 400l0 48c0 17.7-14.3 32-32 32l-32 0c-17.7 0-32-14.3-32-32l0-48L0 256c0-26.7 16.4-49.6 39.6-59.2zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm288 32a32 32 0 1 0 0-64 32 32 0 1 0 0 64z"],Mw=()=>({});function pw(e,f){if(1&e){const l=c.RV6();c.j41(0,"map-marker",11,0),c.bIt("mapClick",function(){const s=c.eBV(l).$implicit,t=c.sdS(1),n=c.XpG(2);return c.Njj(n.openInfo(t,s))}),c.k0s()}2&e&&c.Y8G("position",f.$implicit.center)}function Cw(e,f){if(1&e&&(c.qex(0),c.DNE(1,pw,2,1,"map-marker",10),c.bVm()),2&e){const l=c.XpG();c.R7$(),c.Y8G("ngForOf",l.markers)}}function dw(e,f){if(1&e&&(c.qex(0),c.nrm(1,"map-marker",12)(2,"map-polyline",13),c.bVm()),2&e){const l=c.XpG();c.R7$(),c.Y8G("position",l.markersPath)("options",l.arrayOfOptions),c.R7$(),c.Y8G("options",l.polylineOptions)}}let M7=(()=>{class e{scroll(){window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"})}constructor(){this.mapType="",this.selectedCity={},this.zoom=5,this.markers=[],this.path=[],this.markersPath={},this.arrayOfOptions={draggable:!1,icon:{path:h_icon[4],fillColor:"red",fillOpacity:1,anchor:new google.maps.Point(h_icon[0],h_icon[1]),strokeWeight:1,strokeColor:"red",scale:.045}},this.mapOptions={scrollwheel:!0,disableDoubleClickZoom:!0,mapTypeId:google.maps.MapTypeId.HYBRID},this.center={lat:24.718694510120354,lng:46.68111315541776}}ngOnInit(){}ngOnChanges(l){"markers"==this.mapType?(this.center={lat:this.selectedCity.center.lat,lng:this.selectedCity.center.lng},this.zoom=this.selectedCity.zoom):"path"==this.mapType&&this.startPath()}startPath(){let l=[],a=-1;const s=this.path;this.interval=setInterval(()=>{l.push({lat:parseFloat(s[a+1].lat),lng:parseFloat(s[a+1].lng)}),this.polylineOptions={path:l,strokeColor:"green",strokeOpacity:1,strokeWeight:2},this.markersPath={lat:parseFloat(s[a+1].lat),lng:parseFloat(s[a+1].lng)},this.center={lat:parseFloat(s[a+1].lat),lng:parseFloat(s[a+1].lng)},a+=1,a==s.length-1&&clearInterval(this.interval),console.log(l,"this.NewPath")},500)}openInfo(l,a){this.data=a,console.log(a),this.info?.open(l)}static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275cmp=c.VBU({type:e,selectors:[["app-google-map"]],viewQuery:function(a,s){if(1&a&&(c.GBs(C.u6,5),c.GBs(C.D1,5)),2&a){let t;c.mGM(t=c.lsd())&&(s.map=t.first),c.mGM(t=c.lsd())&&(s.info=t.first)}},inputs:{mapType:"mapType",selectedCity:"selectedCity",zoom:"zoom",markers:"markers",path:"path"},features:[c.OA$],decls:33,vars:41,consts:[["markerEle","mapMarker"],[1,"google-map-ani"],["width","100%","height","600px",3,"options","zoom","center"],[4,"ngIf"],[1,"me-3"],[1,""],[1,"me-2"],[1,"d-flex","justify-content-between"],["target","_blank",1,"me-5",3,"href"],[3,"routerLink","queryParams"],[3,"position","mapClick",4,"ngFor","ngForOf"],[3,"mapClick","position"],[3,"position","options"],[3,"options"]],template:function(a,s){1&a&&(c.j41(0,"div",1)(1,"google-map",2),c.DNE(2,Cw,2,1,"ng-container",3)(3,dw,3,3,"ng-container",3),c.j41(4,"map-info-window")(5,"div")(6,"h6"),c.EFF(7),c.nI1(8,"translate"),c.k0s(),c.j41(9,"h6")(10,"span",4),c.EFF(11),c.nI1(12,"translate"),c.k0s(),c.j41(13,"span",5),c.EFF(14),c.nI1(15,"translate"),c.k0s()(),c.j41(16,"h6")(17,"span",6),c.EFF(18),c.nI1(19,"translate"),c.k0s(),c.j41(20,"span",5),c.EFF(21),c.nI1(22,"translate"),c.k0s()(),c.j41(23,"h6",5),c.EFF(24),c.nI1(25,"translate"),c.k0s(),c.j41(26,"div",7)(27,"a",8),c.EFF(28),c.nI1(29,"translate"),c.k0s(),c.j41(30,"a",9),c.EFF(31),c.nI1(32,"translate"),c.k0s()()()()()()),2&a&&(c.R7$(),c.Y8G("options",s.mapOptions)("zoom",s.zoom)("center",s.center),c.R7$(),c.Y8G("ngIf","markers"==s.mapType),c.R7$(),c.Y8G("ngIf","path"==s.mapType),c.R7$(4),c.Lme("",c.bMT(8,24,"maps.orderCode"),": #SO#",null==s.data?null:s.data.orderCode,""),c.R7$(4),c.Lme("",c.bMT(12,26,"maps.city"),": ",null==s.data?null:s.data.cityName,""),c.R7$(3),c.Lme("",c.bMT(15,28,"maps.district"),": ",null==s.data?null:s.data.districtName,""),c.R7$(4),c.Lme("",c.bMT(19,30,"maps.agentName"),": ",null==s.data?null:s.data.agentName,""),c.R7$(3),c.Lme("",c.bMT(22,32,"maps.mobile"),": ",null==s.data?null:s.data.mobile,""),c.R7$(3),c.Lme("",c.bMT(25,34,"maps.servicesName"),": ",null==s.data?null:s.data.servicesName,""),c.R7$(3),c.FCK("href","https://www.google.com/maps?q=",null==s.data?null:s.data.center.lat,",",null==s.data?null:s.data.center.lng,"",c.B4B),c.R7$(),c.JRh(c.bMT(29,36,"maps.openInGoogleMaps")),c.R7$(2),c.FS9("routerLink",null==s.data?null:s.data.orderCode),c.Y8G("queryParams",c.lJ4(40,Mw)),c.R7$(),c.JRh(c.bMT(32,38,"maps.moreDetails")))},dependencies:[z.Sq,z.bT,C.u6,C.D1,C.fU,C.ZC,S.Wk,m.D9],styles:[".google-map-ani[_ngcontent-%COMP%]{transition:transform 1s ease-in-out}"]})}}return e})();function uw(e,f){if(1&e&&(c.qex(0),c.j41(1,"th",35),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit,a=f.index;c.R7$(),c.ZvI("border-1 ",l.class," text-center"),c.BMQ("colspan",0===a?l.teams.length+1:l.teams.length),c.R7$(),c.SpI(" ",l.cityName," ")}}function hw(e,f){if(1&e&&(c.qex(0),c.j41(1,"th",22),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit;c.R7$(2),c.SpI("",l.teamName," ")}}function gw(e,f){if(1&e&&(c.qex(0),c.DNE(1,hw,3,1,"ng-container",21),c.bVm()),2&e){const l=f.$implicit;c.R7$(),c.Y8G("ngForOf",l.teams)}}function xw(e,f){if(1&e&&(c.j41(0,"div",44)(1,"button",45),c.EFF(2),c.k0s(),c.j41(3,"div",46)(4,"button",47),c.EFF(5," Order Detial"),c.k0s()()()),2&e){const l=c.XpG().$implicit,a=c.XpG(2);c.R7$(),c.ZvI("btn w-100 ",a.getTeamStatus(l.teamStatus),""),c.Y8G("id","dropdownBasic"+l.teamCode),c.R7$(),c.SpI(" ",l.total," "),c.R7$(),c.BMQ("aria-labelledby","dropdownBasic"+l.teamCode)}}function Nw(e,f){1&e&&(c.j41(0,"div"),c.nrm(1,"button",48),c.k0s())}function bw(e,f){if(1&e&&(c.j41(0,"td",41),c.DNE(1,xw,6,6,"div",42)(2,Nw,2,0,"div",43),c.k0s()),2&e){const l=f.$implicit;c.R7$(),c.Y8G("ngIf",l.isFound),c.R7$(),c.Y8G("ngIf",!l.isFound)}}function Sw(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.Z7z(3,bw,3,2,"td",41,c.Vm6),c.j41(5,"td"),c.EFF(6),c.k0s()(),c.nrm(7,"tr")),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.timeName),c.R7$(),c.Dyx(l.orderTeamTimeDailys),c.R7$(3),c.SpI(" ",l.total," ")}}function kw(e,f){if(1&e&&(c.qex(0),c.j41(1,"td",41),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l)}}function ww(e,f){if(1&e&&(c.j41(0,"tr")(1,"td"),c.EFF(2),c.k0s(),c.j41(3,"td"),c.EFF(4),c.k0s()()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l.time),c.R7$(2),c.JRh(l.total)}}let vw=(()=>{class e{constructor(l,a){this.order=l,this.datePipe=a,this.title="statistics.orderDaily.title",this.pagination={},this.teams=[],this.citiesForMap=[{id:1,name:"\u0627\u0644\u0631\u064a\u0627\u0636",center:{lat:24.718694510120354,lng:46.68111315541776},zoom:8},{id:2,name:"\u062c\u062f\u0629",center:{lat:21.54083180863427,lng:39.14554300049329},zoom:8},{id:3,name:"\u0645\u0643\u0629",center:{lat:21.425068876351503,lng:39.81497997761809},zoom:8},{id:4,name:"\u0627\u0644\u0645\u062f\u064a\u0646\u0629",center:{lat:24.47590312190738,lng:39.61319944358637},zoom:8}],this.cities=[],this.searchForm={},this.orders=[],this.orderDays=[],this.topPages=[],this.zones=[],this.cityTeams=[],this.times=[],this.teamsCities=[],this.timesList=[],this.teamTotals=[],this.timeTotal=[],this.time=[],this.timeTeamTotal=[],this.orderTeamTimeDaily=[]}ngOnInit(){this.breadCrumbItems=[{label:"Apexcharts"},{label:"Pie Charts",active:!0}],this._StackedColumnChart('["--vz-primary", "--vz-success", "--vz-warning", "--vz-danger"]'),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]'),this.setCurrentMonthRange(),this.filter(),this.GetTeamByCity(),this.getTestOrder()}setCurrentMonthRange(){const l=new Date,a=new Date(l.getFullYear(),l.getMonth(),l.getDate());this.searchForm.dates=a}OnSearch(){this.filter(),this.GetTeamByCity()}setCity(){this.selectedCity={id:null,name:"",center:{lat:24.718694510120354,lng:46.68111315541776},zoom:5}}getTestOrder(){this.order.GetTestOrdersJson().subscribe(l=>{this.orders=l})}GetTeamByCity(){this.order.GetTeamByCity(this.pagination).subscribe(l=>{this.teams=l.data.teams,this.orderTeamTimeDaily=l.data.orderTeamTimeDaily,this.teamsCities=l.data.teamCity,this.teamTotals=l.data.teamTotals,this.timeTotal=l.data.timeTotal,this.timeTeamTotal=l.data.timeTeamTotal,this.times=l.data.times,this.getTotal(),this._Pyramid('["--vz-info", "--vz-danger", "--vz-primary", "--vz-secondary", "--vz-success", "--vz-body-color", "--vz-warning"]')})}getTimesList(l){const a=l.reduce((t,n)=>(n.teams.forEach(M=>{M.workTimes.forEach(Uw=>{const{workTime:j,totalOrder:jw,status:Iw}=Uw;t.has(j)||t.set(j,{workTime:j,total:[]}),t.get(j).total.push({totalOrder:jw,teamName:M.teamName,status:Iw})})}),t),new Map),s=Array.from(a.values());return console.log(s),s}filter(){var l=this.searchForm.dates;l+void 0?(this.pagination.dateFrom=this.datePipe.transform(l,"yyyy-MM-ddT00:00:00.000"),this.pagination.dateTo=this.datePipe.transform(l,"yyyy-MM-ddT23:59:59.999")):(this.pagination.dateFrom=null,this.pagination.dateTo=null)}getChartColorsArray(l){return(l=JSON.parse(l)).map(function(a){var s=a.replace(" ","");if(-1===s.indexOf(",")){var t=getComputedStyle(document.documentElement).getPropertyValue(s);return t?t=t.replace(" ",""):s}var n=a.split(",");if(2==n.length){var M=getComputedStyle(document.documentElement).getPropertyValue(n[0]);return"rgba("+M+","+n[1]+")"}return s})}_StackedColumnChart(l){l=this.getChartColorsArray(l),this.StackedColumnChart={series:[{name:"\u0639\u062f\u062f \u0627\u0644\u0637\u0644\u0628\u0627\u062a \u0627\u0644\u064a\u0648\u0645\u064a\u0629",data:[72,75,83,79,80,77,79,75,79,76,70,80,78,76,65]},{name:" \u0639\u062f\u062f \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631",data:[52,65,55,60,33,18,60,54,51,61,44,40,10,48,32]},{name:"\u0642\u064a\u0645\u0629 \u0627\u0644\u0641\u0648\u0627\u062a\u064a\u0631 \u0627\u0644\u064a\u0648\u0645\u064a\u0629",data:[19.782,18.539,26.679,23.701,14.136,7.742,23.876,21.185,20.172,22.612,22.484,16.062,6.406,24.798,20.209]},{name:"\u0625\u064a\u0631\u0627\u062f \u063a\u064a\u0631 \u0645\u062d\u0642\u0642",data:[-7.914,-9.157,-10.17,-3.995,-3.174,-2.644,-.382,-6.511,-7.524,-5.084,-5.212,-1.248,-.398,-2.898,-7.487]}],chart:{type:"bar",height:350,stacked:!0,toolbar:{show:!0},zoom:{enabled:!0}},responsive:[{breakpoint:480,options:{legend:{position:"bottom",offsetX:-10,offsetY:0}}}],plotOptions:{bar:{horizontal:!1,borderRadius:3,columnWidth:"90%",endingShape:"rounded"},dataLabels:{enabled:!0,style:{fontSize:"12px",colors:["#000"]},formatter:function(a){return a.toFixed(3)},offsetY:-20}},xaxis:{type:"datetime",categories:["01/01/2024 GMT","01/02/2024 GMT","01/03/2024 GMT","01/04/2024 GMT","01/05/2024 GMT"]},legend:{position:"right",offsetY:40},fill:{opacity:1},colors:l}}_Pyramid(l){l=this.getChartColorsArray(l),this.Pyramid={series:[{name:"",data:this.timeTotal}],chart:{type:"bar",height:350},plotOptions:{bar:{borderRadius:0,horizontal:!0,distributed:!0,barHeight:"80%",isFunnel:!0}},colors:l,dataLabels:{enabled:!0,formatter:function(a,s){return s.w.globals.labels[s.dataPointIndex]+":  "+a},dropShadow:{enabled:!0}},title:{align:"center"},xaxis:{categories:this.times},legend:{show:!1}}}setTopPages(){this.topPages=[{name:"\u0627\u0644\u0637\u064a\u0631\u064a",schedules:"72",invoices:"45",averageOrder:"405",orderValue:"18,226"},{name:"\u0639\u0628\u062f\u0627\u0644\u0644\u0647",schedules:"71",invoices:"45",averageOrder:"438",orderValue:"19,731"},{name:"\u0635\u0628\u062d\u064a",schedules:"72",invoices:"38",averageOrder:"524",orderValue:"19,914"},{name:"\u0627\u0633\u0644\u0627\u0645 \u062d\u0633\u0646",schedules:"73",invoices:"45",averageOrder:"404",orderValue:"18,179"},{name:"\u0639\u0628\u062f\u0627\u0644\u0628\u0627\u0642\u064a",schedules:"68",invoices:"32",averageOrder:"493",orderValue:"15,769"},{name:"\u0627\u0633\u0644\u0627\u0645",schedules:"73",invoices:"32",averageOrder:"487",orderValue:"15,594"},{name:"\u0627\u062f\u0645",schedules:"72",invoices:"39",averageOrder:"441",orderValue:"17,190"}]}getTotal(){return this.timeTeamTotal.reduce((a,s)=>a+s.total,0).toFixed(2)}getTeamStatus(l){return 0==l||1==l?"btn-warning":2==l?"btn-danger":3==l||4==l?"btn-danger ":5==l||6==l?"btn-info ":"btn-success "}static{this.\u0275fac=function(a){return new(a||e)(c.rXU($.Q),c.rXU(z.vh))}}static{this.\u0275cmp=c.VBU({type:e,selectors:[["app-order-daily"]],decls:87,vars:52,consts:[[3,"title","breadcrumbItems"],[1,"card"],[1,"card-body"],[1,"row","g-3"],[1,"col-md-3"],[1,"search-box"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","single",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-md-auto","ms-auto"],[1,"d-flex","hastck","gap-2","flex-wrap"],["data-bs-toggle","modal","data-bs-target","#adddeals",1,"btn","btn-success",3,"click"],[1,"ri-add-fill","align-bottom","me-1"],["translate","general.action.search"],[1,"row"],[1,"col-12"],[1,"card-header","align-items-center","d-flex"],["translate","statistics.orderDaily.orderDays",1,"card-title","mb-0","flex-grow-1"],[1,"table-responsive","table-card"],[1,"table","table-border","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","border","table-light"],[4,"ngFor","ngForOf"],["scope","col",1,"text-center"],[1,"col-12","col-md-6"],[1,"card-header"],["translate","statistics.orderDaily.revenueTime",1,"card-title","mb-0"],["id","chart"],[1,"apex-charts",3,"series","chart","dataLabels","plotOptions","xaxis","colors","title","legend"],[1,"card","card-height-100"],["translate","statistics.orderDaily.cityTime",1,"card-title","mb-0"],[1,"table","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","table-light"],["scope","col","translate","statistics.orderDaily.time",2,"width","62"],["scope","col","translate","statistics.orderDaily.revenue"],["scope","col","translate","statistics.orderDaily.total",2,"width","62"],["scope","col"],[1,"col-lg-12"],[1,"card-title"],[1,"col-12","col-lg-6"],["bindLabel","name",3,"ngModelChange","clear","placeholder","ngModel","items","multiple"],[3,"mapType","markers","selectedCity"],[1,"text-center"],["ngbDropdown","","class","d-inline-block  w-100",4,"ngIf"],[4,"ngIf"],["ngbDropdown","",1,"d-inline-block","w-100"],["type","button","ngbDropdownToggle","",3,"id"],["ngbDropdownMenu",""],["ngbDropdownItem",""],["type","button","translate","statistics.orderDaily.notFound",1,"btn","w-100","btn-dark"]],template:function(a,s){1&a&&(c.nrm(0,"app-breadcrumbs",0),c.nI1(1,"translate"),c.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5)(7,"ng-select",6),c.nI1(8,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.searchForm.cityCode,n)||(s.searchForm.cityCode=n),n}),c.k0s()()(),c.j41(9,"div",4)(10,"div",5)(11,"ng-select",6),c.nI1(12,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.searchForm.cityCode,n)||(s.searchForm.cityCode=n),n}),c.k0s()()(),c.j41(13,"div",7)(14,"input",8),c.nI1(15,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.searchForm.dates,n)||(s.searchForm.dates=n),n}),c.k0s()(),c.j41(16,"div",9)(17,"div",10)(18,"button",11),c.bIt("click",function(){return s.OnSearch()}),c.nrm(19,"i",12)(20,"span",13),c.k0s()()()()()(),c.j41(21,"div",14)(22,"div",15)(23,"div",1)(24,"div",16),c.nrm(25,"h4",17),c.k0s(),c.j41(26,"div",2)(27,"div",18)(28,"table",19)(29,"thead",20)(30,"tr"),c.DNE(31,uw,3,5,"ng-container",21),c.k0s(),c.j41(32,"tr")(33,"th",22),c.EFF(34,"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f "),c.k0s(),c.DNE(35,gw,2,1,"ng-container",21),c.j41(36,"th",22),c.EFF(37,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u0649 "),c.k0s()()(),c.j41(38,"tbody"),c.Z7z(39,Sw,8,2,null,null,c.Vm6),c.j41(41,"tr")(42,"td"),c.EFF(43,"\u0627\u0644\u0627\u062c\u0645\u0627\u0644\u0649"),c.k0s(),c.DNE(44,kw,3,1,"ng-container",21),c.k0s()()()()()()()(),c.j41(45,"div",14)(46,"div",23)(47,"div",1)(48,"div",24),c.nrm(49,"h4",25),c.k0s(),c.j41(50,"div",2)(51,"div",26),c.nrm(52,"apx-chart",27),c.k0s()()()(),c.j41(53,"div",23)(54,"div",28)(55,"div",16),c.nrm(56,"h4",29),c.k0s(),c.j41(57,"div",2)(58,"div",18)(59,"table",30)(60,"thead",31)(61,"tr"),c.nrm(62,"th",32)(63,"th",33),c.k0s()(),c.j41(64,"tbody"),c.Z7z(65,ww,5,2,"tr",null,c.Vm6),c.j41(67,"tr"),c.nrm(68,"th",34),c.j41(69,"th",35),c.EFF(70),c.k0s()()()()()()()()(),c.j41(71,"div",14)(72,"div",36)(73,"div",1)(74,"div",24)(75,"h4",37),c.EFF(76),c.nI1(77,"translate"),c.k0s(),c.j41(78,"div",14)(79,"div",38)(80,"ng-select",39),c.nI1(81,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.selectedCity,n)||(s.selectedCity=n),n}),c.bIt("clear",function(){return s.setCity()}),c.k0s()(),c.j41(82,"div",38)(83,"ng-select",6),c.nI1(84,"translate"),c.mxI("ngModelChange",function(n){return c.DH7(s.selectedTeam,n)||(s.selectedTeam=n),n}),c.k0s()()()(),c.j41(85,"div",2),c.nrm(86,"app-google-map",40),c.k0s()()()()),2&a&&(c.FS9("title",c.bMT(1,38,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.FS9("placeholder",c.bMT(8,40,"statistics.orderReview.cities")),c.Y8G("items",s.cities)("multiple",!1),c.R50("ngModel",s.searchForm.cityCode),c.R7$(4),c.FS9("placeholder",c.bMT(12,42,"statistics.orderReview.teams")),c.Y8G("items",s.teams)("multiple",!1),c.R50("ngModel",s.searchForm.cityCode),c.R7$(3),c.FS9("placeholder",c.bMT(15,44,"statistics.orderReview.dateReview")),c.Y8G("altInput",!0)("convertModelValue",!0),c.R50("ngModel",s.searchForm.dates),c.R7$(17),c.Y8G("ngForOf",s.teamsCities),c.R7$(4),c.Y8G("ngForOf",s.teamsCities),c.R7$(4),c.Dyx(s.orderTeamTimeDaily),c.R7$(5),c.Y8G("ngForOf",s.teamTotals),c.R7$(8),c.Y8G("series",s.Pyramid.series)("chart",s.Pyramid.chart)("dataLabels",s.Pyramid.dataLabels)("plotOptions",s.Pyramid.plotOptions)("xaxis",s.Pyramid.xaxis)("colors",s.Pyramid.colors)("title",s.Pyramid.title)("legend",s.Pyramid.legend),c.R7$(13),c.Dyx(s.timeTeamTotal),c.R7$(5),c.JRh(s.getTotal()),c.R7$(6),c.JRh(c.bMT(77,46,"statistics.orderReview.ordersMap")),c.R7$(4),c.FS9("placeholder",c.bMT(81,48,"statistics.orderReview.cities")),c.R50("ngModel",s.selectedCity),c.Y8G("items",s.citiesForMap)("multiple",!1),c.R7$(3),c.FS9("placeholder",c.bMT(84,50,"statistics.orderReview.teams")),c.Y8G("items",s.teams)("multiple",!1),c.R50("ngModel",s.selectedTeam),c.R7$(3),c.Y8G("mapType","markers")("markers",s.orders)("selectedCity",s.selectedCity))},dependencies:[z.Sq,z.bT,L.me,L.BC,L.vS,r.tg,r.do,r.U0,r._H,r.Eu,p.kL,_.m,M7,m.Mm,V.vr,J.Q,m.D9],encapsulation:2})}}return e})();var yw=i(3888);function Aw(e,f){if(1&e&&(c.j41(0,"span",27),c.EFF(1),c.k0s()),2&e){const l=c.XpG();c.R7$(),c.SpI("",l.selectedOrder.districtName," ")}}function Fw(e,f){if(1&e&&(c.qex(0),c.j41(1,"span",28),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l)}}function Tw(e,f){if(1&e&&(c.qex(0),c.j41(1,"span",28),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l)}}function Rw(e,f){if(1&e&&(c.qex(0),c.j41(1,"span",28),c.EFF(2),c.k0s(),c.bVm()),2&e){const l=f.$implicit;c.R7$(2),c.JRh(l)}}const Bw=[{path:"order-manager",component:A7,canActivate:[W.B],data:{roles:["admin"]}},{path:"order-daily",component:vw,canActivate:[W.B],data:{roles:["admin"]}},{path:"order-daily/:id",component:(()=>{class e{constructor(l,a,s,t){this.order=l,this.datePipe=a,this.activatedRoute=s,this.alertService=t,this.title="statistics.orderDaily.title2",this.path=[{lat:24.833111876920874,lng:46.610731654244724},{lat:24.832911663945083,lng:46.6108235199007},{lat:24.83269258554751,lng:46.61092343217907},{lat:24.832426648189266,lng:46.61105486042824},{lat:24.83221730580002,lng:46.61115276104651},{lat:24.83204265068079,lng:46.61124194450505},{lat:24.831835133302885,lng:46.61134588011676},{lat:24.83165500064027,lng:46.6114317107958},{lat:24.83142374885942,lng:46.61155308075961},{lat:24.83117119707758,lng:46.61166908631141},{lat:24.830972806647782,lng:46.611766316377505},{lat:24.830651486498244,lng:46.611920543394966},{lat:24.830501780231465,lng:46.612025820111185},{lat:24.830282089005838,lng:46.61215858946107},{lat:24.830072742983898,lng:46.61225783120155},{lat:24.82988773923418,lng:46.61235170850675},{lat:24.829688129607444,lng:46.612453632459584},{lat:24.82949643104251,lng:46.612552203630045},{lat:24.829220377668758,lng:46.6126844173666},{lat:24.829084666771355,lng:46.61276018976929},{lat:24.828907572956503,lng:46.61283998548454},{lat:24.82873352174189,lng:46.61293319224797},{lat:24.82857103315342,lng:46.61301567016611},{lat:24.828841847349057,lng:46.612877536417045},{lat:24.828592333167798,lng:46.61300292967469},{lat:24.828337949889445,lng:46.613132346275485},{lat:24.82808234895011,lng:46.613269138920195},{lat:24.82791377375,lng:46.613354969613056},{lat:24.827734243955646,lng:46.61344080029874},{lat:24.827554105324534,lng:46.6135266309838},{lat:24.8272352106193,lng:46.61369896290946},{lat:24.827081848745586,lng:46.61377339421692},{lat:24.826937615388893,lng:46.61384179053928},{lat:24.826773298701916,lng:46.613926950666134},{lat:24.82674104391923,lng:46.61393969115755}],this.activatedRoute.params.subscribe(n=>{this.getTestOrder(+n.id)})}getTestOrder(l){this.order.GetTestOrdersJson().subscribe(a=>{this.selectedOrder=a.filter(s=>s.orderCode===l)[0]})}ngOnInit(){}copytext(l){navigator.clipboard.writeText(l),this.alertService.info(l)}getServices(l){return l.split("#")}getTeamStatus(l){return 0==l||1==l||2==l?"bg-warning-subtle text-warning":3==l||4==l?"bg-danger-subtle text-danger":5==l||6==l?"bg-info-subtle text-info":"bg-success-subtle text-success"}getTimes(l){return l.split(",")}static{this.\u0275fac=function(a){return new(a||e)(c.rXU($.Q),c.rXU(z.vh),c.rXU(S.nX),c.rXU(yw.u))}}static{this.\u0275cmp=c.VBU({type:e,selectors:[["app-order-daily-details"]],decls:47,vars:28,consts:[[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-3"],[1,"col-lg-6","col-12"],[1,"d-flex","gap-4","mb-2","justify-content-between"],[1,"text-muted"],[1,"ri-user-2-fill","text-muted","me-1","align-bottom"],[1,"ri-calendar-2-fill","text-muted","me-1","align-bottom"],[1,"text-success"],[1,"ri-map-pin-2-line","text-success","me-1","align-bottom"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"ri-phone-fill","text-info","me-1","align-bottom"],[1,"cursor-pointer","badge","bg-info-subtle","text-info","fs-6",3,"click"],[1,"ri-clipboard-line"],[1,"d-flex","gap-4"],[1,"ri-shake-hands-fill","text-primary","me-1","align-bottom"],[4,"ngFor","ngForOf"],[1,"col-lg-6","col-12","d-flex","text-center"],[1,"w-50","text-left"],[1,"ri-group-fill","text-primary","me-1","align-bottom"],[1,"w-50","text-right"],[1,"ri-history-fill","text-primary","me-1","align-bottom"],[1,"card-body"],[3,"mapType","path","zoom"],[1,"badge","bg-success-subtle","text-success"],[1,"badge","bg-primary-subtle","text-primary","mx-1"]],template:function(a,s){1&a&&(c.nrm(0,"app-breadcrumbs",0),c.nI1(1,"translate"),c.j41(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"h4",5),c.EFF(7),c.nI1(8,"translate"),c.k0s(),c.j41(9,"div",1)(10,"div",6)(11,"div",7)(12,"div",8),c.nrm(13,"i",9),c.EFF(14),c.k0s(),c.j41(15,"div",8),c.nrm(16,"i",10),c.EFF(17),c.nI1(18,"date"),c.k0s(),c.j41(19,"div",11),c.nrm(20,"i",12),c.EFF(21),c.DNE(22,Aw,2,1,"span",13),c.k0s(),c.j41(23,"div"),c.nrm(24,"i",14),c.j41(25,"span",15),c.bIt("click",function(){return s.copytext(s.selectedOrder.mobile)}),c.EFF(26),c.nrm(27,"i",16),c.k0s()()(),c.j41(28,"div",17)(29,"div"),c.nrm(30,"i",18),c.DNE(31,Fw,3,1,"ng-container",19),c.k0s()()(),c.j41(32,"div",20)(33,"div",21)(34,"h6"),c.nrm(35,"i",22),c.EFF(36),c.nI1(37,"translate"),c.k0s(),c.DNE(38,Tw,3,1,"ng-container",19),c.k0s(),c.j41(39,"div",23)(40,"h6"),c.nrm(41,"i",24),c.EFF(42),c.nI1(43,"translate"),c.k0s(),c.DNE(44,Rw,3,1,"ng-container",19),c.k0s()()()(),c.j41(45,"div",25),c.nrm(46,"app-google-map",26),c.k0s()()()()),2&a&&(c.FS9("title",c.bMT(1,17,s.title)),c.Y8G("breadcrumbItems",s.breadCrumbItems),c.R7$(7),c.Lme("",c.bMT(8,19,"statistics.orderReview.ordersDetails")," #SO#",s.selectedOrder.orderCode,""),c.R7$(7),c.SpI(" ",s.selectedOrder.agentName," "),c.R7$(3),c.SpI(" ",c.i5U(18,21,s.selectedOrder.visitDate,"yyyy-MM-dd")," "),c.R7$(4),c.SpI(" ",s.selectedOrder.cityName," "),c.R7$(),c.Y8G("ngIf",null!==s.selectedOrder.districtName),c.R7$(4),c.SpI("",s.selectedOrder.mobile," "),c.R7$(5),c.Y8G("ngForOf",s.getServices(s.selectedOrder.services)),c.R7$(5),c.SpI(" ",c.bMT(37,24,"orderManagement.order.assignTo"),""),c.R7$(2),c.Y8G("ngForOf",s.getTimes(s.selectedOrder.teamNames)),c.R7$(4),c.SpI(" ",c.bMT(43,26,"orderManagement.order.workTimes"),""),c.R7$(2),c.Y8G("ngForOf",s.getTimes(s.selectedOrder.workTimes)),c.R7$(2),c.Y8G("mapType","path")("path",s.path)("zoom",18))},dependencies:[z.Sq,z.bT,_.m,M7,z.vh,m.D9],encapsulation:2})}}return e})(),canActivate:[W.B],data:{roles:["admin"]}}];let Pw=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=c.$C({type:e})}static{this.\u0275inj=c.G2t({imports:[S.iI.forChild(Bw),S.iI]})}}return e})();var Ow=i(42820),Hw=i(34386),Ew=i(38542);let Gw=(()=>{class e{static{this.\u0275fac=function(a){return new(a||e)}}static{this.\u0275mod=c.$C({type:e})}static{this.\u0275inj=c.G2t({imports:[z.MD,L.YN,L.X1,r.zH,r.Pv,r.Gk,r.h_,r.c9,I.A,q.JG,p.ND,U2.r,Pw,o.G,m.h,C7.bG,d7.q4,u7.H_,r.c9,h7.th,V.MQ,r.n8,J.J,Hw.A,Ew.S,Ow.sN.forRoot({echarts:()=>i.e(697).then(i.bind(i,19697))})]})}}return e})()}}]);