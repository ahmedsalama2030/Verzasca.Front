"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[140],{23128:(E,_,s)=>{s.d(_,{B:()=>p});var e=s(54438),n=s(62984),g=s(51188),h=s(3888);let p=(()=>{class r{constructor(o,m,a){this.authservice=o,this.router=m,this.alertService=a}canActivate(o){return!!this.authservice.roleMatch(o.data.roles)||(this.alertService.error("general.notAllow.notAllowPageMessage"),this.router.navigate(["/"]),!1)}static{this.\u0275fac=function(m){return new(m||r)(e.KVO(n.J),e.KVO(g.Ix),e.KVO(h.u))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()},56131:(E,_,s)=>{s.d(_,{E:()=>g});var e=s(7673),n=s(99437);class g{constructor(p,r,d){this.router=p,this.BaseService=r,this.alertService=d,this.pagination={pageNumber:1,pageSize:10}}resolve(p,r){return this.BaseService.get(this.pagination).pipe((0,n.W)(d=>(this.router.navigate([""]),this.alertService.error(d),(0,e.of)(null))))}}},75622:(E,_,s)=>{s.d(_,{w:()=>C});var e=s(21413),n=s(56977),g=s(37021),h=s(35335),p=s(45236),r=s(70980),d=s(99437),o=s(18810),m=s(35263),a=s(36158),l=s(54438),f=s(51188),v=s(8147),M=s(22960),O=s(67569),L=s(3888),b=s(60177),P=s(1530);let C=(()=>{class D{constructor(t,i,c,u,I,S,R){this.routerActive=t,this.translateService=i,this.modalService=c,this.baseService=u,this.alertService=I,this.datePipe=S,this.ngxLoader=R,this.title="",this.mainDelay=50,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new e.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=a.cX,this.loaderOperationShap=a.$$,this.operationLoader=a.ZW,this.loaderDeleteShap=a.jg,this.mainTable=a.uG,this.searchLoader=a.a7,this.deleteLoader=a.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,n.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.result,this.pagination=t.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(a.a7)},t=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,n.Q)(this.notifier)).subscribe(t=>{this.lang=t.lang})}getTranslationText(t){let i="";return this.translateService.get(t).pipe((0,n.Q)(this.notifier)).subscribe(c=>{i=c}),i}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(t){return null!=t?t.substring(0,10)+"...":""}getRenderIndex(t){return this.index++,this.index}successDataTable(t){this.ngxLoader.stopLoader(a.a7),this.pagination.totalItems=t.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(a.a7),this.alertService.error()}openModalTitle(t,i="md"){this.isEditForm=!1,this.form={},this.modalService.open(t,{centered:!0,size:i})}openModal(t,i,c="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:t}],this.modalService.open(i,{centered:!0,size:c})}openModalMoreOperation(t){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(i=>i.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(t){this.ngxLoader.startLoader(a.a7),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(a.a7),this.baseService.get(this.pagination).pipe((0,n.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(a.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(a.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(t){this.pagination.filterType=t.sortField,this.pagination.sortType=1==t.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,g.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,n.Q)(this.notifier),(0,r.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,d.W)(i=>(0,o.$)(i))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}editEntity(){let t=this.mapForm(this.form);this.baseService.edit(t.id,t).pipe((0,g.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,n.Q)(this.notifier),(0,r.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(i=>{i.success?this.submitFunished():this.alertService.error("general.message."+i.message)},i=>{this.alertService.error("general.message."+i)})}mapForm(t){return t}mapRegisterForm(t){return t.id=0,t}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(a.a7),this.btnDisabled=!0}EditModel(t,i,c="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,n.Q)(this.notifier)).subscribe(u=>{u.success?this.form=u.data:this.alertService.error("general.message."+u.message),this.modalService.open(i,{centered:!0,size:c})},u=>{this.alertService.error()})}EditModelTilte(t){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,n.Q)(this.notifier)).subscribe(c=>{c?this.form=c:this.alertService.error("general.message."+c)},c=>{this.alertService.error()})}onSelectionChange(t){this.selectedRow=t,this.lengthSelect=t.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(t){this.pagination.pageNumber=t,this.loadentities()}ListItemChange(t){this.pagination.pageSize=t.target.value,this.loadentities()}searchChange(t){this.pagination.filterValue=t,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(a.Fq);let t=this.selectedRow.map(i=>i.id);this.baseService.deleteRange(t).pipe((0,g.O)(),(0,h.c)(this.mainDelay),(0,p.Z)(),(0,n.Q)(this.notifier),(0,r.j)(()=>this.ngxLoader.stopLoader(a.Fq))).subscribe(i=>{i.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+i)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(t=>t.id)}isEmpty(t){return(void 0===t||null==t||t.length)<=0}OnReset(t){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(t){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(i){return new(i||D)(l.rXU(f.nX),l.rXU(v.c$),l.rXU(M.Bq),l.rXU(O.d),l.rXU(L.u),l.rXU(b.vh),l.rXU(P.eD))}}static{this.\u0275cmp=l.VBU({type:D,selectors:[["app-base"]],viewQuery:function(i,c){if(1&i&&l.GBs(m.XI,5),2&i){let u;l.mGM(u=l.lsd())&&(c.tableMaster=u.first)}},decls:0,vars:0,template:function(i,c){},encapsulation:2})}}return D})()},15084:(E,_,s)=>{s.d(_,{w:()=>r});var e=s(54438),n=s(36158),g=s(8147),h=s(89417),p=s(1530);let r=(()=>{class d{constructor(){this.titleOperation="",this.loaderOperationShap=n.$$,this.deleteLoader=n.Fq,this.deleteConfirm=new e.bkB,this.dismiss=new e.bkB}deleteConfirmFn(){this.deleteConfirm.emit(!0)}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(a){return new(a||d)}}static{this.\u0275cmp=e.VBU({type:d,selectors:[["delete-modal"]],inputs:{titleOperation:"titleOperation"},outputs:{deleteConfirm:"deleteConfirm",dismiss:"dismiss"},decls:15,vars:3,consts:[["formEntity","ngForm"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","general.message.areyouSureDelete"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","delete","translate","general.action.delete",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(a,l){if(1&a){const f=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(f),e.Njj(l.deleteConfirmFn())}),e.nrm(2,"ngx-ui-loader",2),e.j41(3,"div",3)(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(f),e.Njj(l.dismissFn())}),e.k0s()(),e.j41(6,"div",6)(7,"div",7),e.nrm(8,"lord-icon",8),e.j41(9,"div",9),e.nrm(10,"h4",10)(11,"p",11),e.k0s()(),e.j41(12,"div",12),e.nrm(13,"button",13),e.j41(14,"button",14),e.bIt("click",function(){return e.eBV(f),e.Njj(l.dismissFn())}),e.k0s()()()()()}2&a&&(e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",l.loaderOperationShap)("loaderId",l.deleteLoader))},dependencies:[g.Mm,h.qT,h.cb,h.cV,p.Cv],encapsulation:2})}}return d})()},88148:(E,_,s)=>{s.d(_,{p:()=>g});var e=s(54438),n=s(8147);let g=(()=>{class h{static{this.\u0275fac=function(d){return new(d||h)}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(d,o){1&d&&(e.j41(0,"span",0),e.EFF(1),e.k0s(),e.nrm(2,"span",1),e.j41(3,"span",0),e.EFF(4),e.k0s(),e.nrm(5,"span",2)),2&d&&(e.R7$(),e.JRh(o.pagination.totalItems>o.pagination.pageNumber*o.pagination.pageSize?o.pagination.pageNumber*o.pagination.pageSize:o.pagination.totalItems),e.R7$(3),e.JRh(o.pagination.totalItems))},dependencies:[n.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return h})()},91580:(E,_,s)=>{s.d(_,{g:()=>p});var e=s(54438),n=s(60177),g=s(89417);function h(r,d){if(1&r&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&r){const o=d.$implicit;e.R7$(),e.JRh(o)}}let p=(()=>{class r{constructor(){this.lengthChange=new e.bkB}ListItemChange(o){this.lengthChange.emit(o)}static{this.\u0275fac=function(m){return new(m||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(m,a){1&m&&(e.j41(0,"div",0),e.nrm(1,"span",1),e.j41(2,"select",2),e.bIt("change",function(f){return a.ListItemChange(f)}),e.DNE(3,h,2,1,"option",3),e.k0s()()),2&m&&(e.R7$(3),e.Y8G("ngForOf",a.lengthTable))},dependencies:[n.Sq,g.xH,g.y7],encapsulation:2})}}return r})()}}]);