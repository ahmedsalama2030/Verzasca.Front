"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[426],{99426:(Vt,J,d)=>{d.r(J),d.d(J,{OrderModule:()=>wt});var h=d(60177),c=d(89417),m=d(22960),q=d(32454),ee=d(66900),k=d(91022),te=d(70255),ne=d(63789),ae=d(98982),ie=d.n(ae),re=d(556),p=d(8147),j=d(56803),Q=d(65430),oe=d(41631),f=d(1530),R=d(72510),_=d(51188),N=d(23128),e=d(54438);let se=(()=>{class i{constructor(){}ngOnInit(){}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-order-map"]],decls:0,vars:0,template:function(a,n){},encapsulation:2})}}return i})();var Z=d(21413),u=d(56977),B=d(37021),X=d(35335),U=d(45236),L=d(70980),W=d(99437),le=d(18810),g=d(36158),S=d(33826),I=d(3888),$=d(26364),x=d(5779),D=d(29935);function de(i,l){1&i&&(e.j41(0,"div",58),e.EFF(1," general.message.filedIdRequired "),e.k0s())}function me(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",45)(1,"div",46)(2,"label",47),e.EFF(3,"orderManagement.order.name"),e.k0s(),e.j41(4,"input",48,2),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.name,n)||(r.form.agentCodeNavigation.name=n),e.Njj(n)}),e.k0s(),e.DNE(6,de,2,0,"div",49),e.k0s(),e.j41(7,"div",46)(8,"label",50),e.EFF(9,"orderManagement.order.mobile"),e.k0s(),e.j41(10,"input",51,3),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.mobile,n)||(r.form.agentCodeNavigation.mobile=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",46)(13,"label",52),e.EFF(14,"orderManagement.order.cityName"),e.k0s(),e.j41(15,"ng-select",53),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return r.form.agentCodeNavigation.districtCode=null,e.Njj(r.getDistricts(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.cityCode,n)||(r.form.agentCodeNavigation.cityCode=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",46)(17,"label",52),e.EFF(18,"orderManagement.order.districtName"),e.k0s(),e.j41(19,"ng-select",54),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.districtCode,n)||(r.form.agentCodeNavigation.districtCode=n),e.Njj(n)}),e.k0s()(),e.j41(20,"div",46)(21,"label",55),e.EFF(22,"orderManagement.order.email"),e.k0s(),e.j41(23,"input",56,4),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.email,n)||(r.form.agentCodeNavigation.email=n),e.Njj(n)}),e.k0s()(),e.j41(25,"div",46)(26,"label",52),e.EFF(27,"orderManagement.order.HowYouKnowAboutUs"),e.k0s(),e.j41(28,"ng-select",57),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.agentCodeNavigation.channelId,n)||(r.form.agentCodeNavigation.channelId=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.sdS(5),a=e.XpG();e.R7$(4),e.R50("ngModel",a.form.agentCodeNavigation.name),e.R7$(2),e.Y8G("ngIf",t.invalid&&t.touched),e.R7$(4),e.R50("ngModel",a.form.agentCodeNavigation.mobile),e.R7$(5),e.Y8G("items",a.cities)("multiple",!1),e.R50("ngModel",a.form.agentCodeNavigation.cityCode),e.R7$(4),e.Y8G("items",a.districts)("multiple",!1),e.R50("ngModel",a.form.agentCodeNavigation.districtCode),e.R7$(4),e.R50("ngModel",a.form.agentCodeNavigation.email),e.R7$(5),e.Y8G("items",a.channels)("multiple",!1),e.R50("ngModel",a.form.agentCodeNavigation.channelId)}}function ce(i,l){1&i&&(e.j41(0,"tr",77)(1,"th",78),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",79),e.EFF(4," orderManagement.order.service "),e.k0s(),e.j41(5,"th",79),e.EFF(6," orderManagement.order.price "),e.k0s(),e.j41(7,"th",80),e.EFF(8," orderManagement.order.notes "),e.k0s(),e.j41(9,"th",80),e.EFF(10," orderManagement.order.actions "),e.k0s()())}function ge(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",81)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"button",82),e.nrm(9,"i",83),e.k0s(),e.j41(10,"button",84),e.bIt("click",function(){const n=e.eBV(t).rowIndex,r=e.XpG(2);return e.Njj(r.deleteService(n))}),e.nrm(11,"i",85),e.k0s()()()}if(2&i){const t=l.$implicit,a=l.rowIndex;e.R7$(2),e.JRh(a+1),e.R7$(2),e.JRh(t.service),e.R7$(2),e.JRh(t.notes)}}function pe(i,l){1&i&&(e.j41(0,"tr")(1,"td",86),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function he(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",59)(1,"div",23)(2,"label",52),e.EFF(3,"orderManagement.order.serviceCategory"),e.k0s(),e.j41(4,"ng-select",60,5),e.bIt("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return r.form.formServices.serviceCode=null,e.Njj(r.getServicesByCategory(n))}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formServices.serviceCategoryCode,n)||(r.form.formServices.serviceCategoryCode=n),e.Njj(n)}),e.k0s()(),e.j41(6,"div",23)(7,"label",52),e.EFF(8,"orderManagement.order.service"),e.k0s(),e.j41(9,"ng-select",61,6),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formServices.serviceCode,n)||(r.form.formServices.serviceCode=n),e.Njj(n)}),e.k0s()(),e.j41(11,"div",62)(12,"label",47),e.EFF(13,"orderManagement.order.price"),e.k0s(),e.j41(14,"input",63,7),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formServices.price,n)||(r.form.formServices.price=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",62)(17,"label",64),e.EFF(18,"orderManagement.order.notes"),e.k0s(),e.j41(19,"input",65,8),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formServices.notes,n)||(r.form.formServices.notes=n),e.Njj(n)}),e.k0s()(),e.j41(21,"div",66)(22,"button",67),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addService())}),e.nrm(23,"i",68),e.k0s()(),e.j41(24,"div",69)(25,"div",70)(26,"p-table",71,9),e.DNE(28,ce,11,0,"ng-template",72)(29,ge,12,3,"ng-template",73)(30,pe,4,3,"ng-template",74),e.k0s()()(),e.j41(31,"div",75)(32,"label",64),e.EFF(33,"orderManagement.order.extraDiscount"),e.k0s(),e.j41(34,"input",76,10),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.extraDiscount,n)||(r.form.extraDiscount=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("items",t.serviceCategories)("multiple",!0),e.R50("ngModel",t.form.formServices.serviceCategoryCode),e.R7$(5),e.Y8G("items",t.services),e.R50("ngModel",t.form.formServices.serviceCode),e.R7$(5),e.R50("ngModel",t.form.formServices.price),e.R7$(5),e.R50("ngModel",t.form.formServices.notes),e.R7$(7),e.Y8G("value",t.form.tbOrderServices)("lazy",!0),e.R7$(8),e.R50("ngModel",t.form.extraDiscount)}}function ue(i,l){1&i&&(e.j41(0,"tr",77)(1,"th",78),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",79),e.EFF(4," orderManagement.order.serviceCategory "),e.k0s(),e.j41(5,"th",79),e.EFF(6," orderManagement.order.service "),e.k0s(),e.j41(7,"th",79),e.EFF(8," orderManagement.order.price "),e.k0s(),e.j41(9,"th",80),e.EFF(10," orderManagement.order.notes "),e.k0s(),e.j41(11,"th",80),e.EFF(12," orderManagement.order.actions "),e.k0s()())}function _e(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",81)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td"),e.EFF(8),e.k0s(),e.j41(9,"td")(10,"button",82),e.nrm(11,"i",83),e.k0s(),e.j41(12,"button",84),e.bIt("click",function(){const n=e.eBV(t).rowIndex,r=e.XpG(2);return e.Njj(r.deleteService(n))}),e.nrm(13,"i",85),e.k0s()()()}if(2&i){const t=l.$implicit,a=l.rowIndex;e.R7$(2),e.JRh(a+1),e.R7$(2),e.JRh(t.serviceCategory),e.R7$(2),e.JRh(t.service),e.R7$(2),e.JRh(t.notes)}}function fe(i,l){1&i&&(e.j41(0,"tr")(1,"td",86),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function be(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",19)(1,"div",87)(2,"div",88)(3,"span",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.previousDate())}),e.j41(4,"span"),e.EFF(5,"previous"),e.k0s()(),e.j41(6,"div",90)(7,"input",91,11),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.todayDate,n)||(r.todayDate=n),e.Njj(n)}),e.k0s()(),e.j41(9,"span",89),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.nextDate())}),e.EFF(10," next "),e.k0s()()(),e.j41(11,"div",69)(12,"div",70)(13,"p-table",71,9),e.DNE(15,ue,13,0,"ng-template",72)(16,_e,14,4,"ng-template",73)(17,fe,4,3,"ng-template",74),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(7),e.R50("ngModel",t.todayDate),e.R7$(6),e.Y8G("value",t.form.services)("lazy",!0)}}function Ce(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",59)(1,"div",92)(2,"label",93),e.EFF(3," orderManagement.order.isUrgent "),e.k0s(),e.j41(4,"p-checkbox",94),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.isUrgent,n)||(r.form.isUrgent=n),e.Njj(n)}),e.k0s()()(),e.j41(5,"div",19)(6,"div",95)(7,"label",96),e.EFF(8," orderManagement.order.notes "),e.k0s(),e.j41(9,"textarea",97,2),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.notes,n)||(r.form.notes=n),e.Njj(n)}),e.EFF(11,"                                                "),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(4),e.R50("ngModel",t.form.isUrgent),e.Y8G("binary",!0),e.R7$(5),e.R50("ngModel",t.form.notes)}}function ve(i,l){1&i&&(e.j41(0,"tr",77)(1,"th",78),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",79),e.EFF(4," orderManagement.order.paymentMethods "),e.k0s(),e.j41(5,"th",79),e.EFF(6," orderManagement.order.paid "),e.k0s(),e.j41(7,"th",80),e.EFF(8," orderManagement.order.actions "),e.k0s()())}function je(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",81)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td"),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.k0s(),e.j41(7,"td")(8,"button",82),e.nrm(9,"i",83),e.k0s(),e.j41(10,"button",84),e.bIt("click",function(){const n=e.eBV(t).rowIndex,r=e.XpG(2);return e.Njj(r.deletePayment(n))}),e.nrm(11,"i",85),e.k0s()()()}if(2&i){const t=l.$implicit,a=l.rowIndex;e.R7$(2),e.JRh(a+1),e.R7$(2),e.JRh(t.paymentType),e.R7$(2),e.JRh(t.value)}}function Me(i,l){1&i&&(e.j41(0,"tr")(1,"td",105),e.EFF(2),e.nI1(3,"translate"),e.k0s()()),2&i&&(e.R7$(2),e.JRh(e.bMT(3,1,"orderManagement.order.noData")))}function Fe(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",59)(1,"div",98)(2,"label",52),e.EFF(3," orderManagement.order.paymentMethods"),e.k0s(),e.j41(4,"ng-select",99),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formPayment.paymentTypeCode,n)||(r.form.formPayment.paymentTypeCode=n),e.Njj(n)}),e.k0s()(),e.j41(5,"div",98)(6,"label",100),e.EFF(7,"orderManagement.order.paid"),e.k0s(),e.j41(8,"input",101,12),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.form.formPayment.value,n)||(r.form.formPayment.value=n),e.Njj(n)}),e.k0s()(),e.j41(10,"div",102)(11,"label",100),e.EFF(12,"orderManagement.order.paid"),e.k0s(),e.j41(13,"input",103),e.bIt("change",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.onFileSelected(n))}),e.k0s()(),e.j41(14,"div",104)(15,"button",67),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.addPayment())}),e.nrm(16,"i",68),e.k0s()(),e.j41(17,"div",69)(18,"div",70)(19,"p-table",71,9),e.DNE(21,ve,9,0,"ng-template",72)(22,je,12,3,"ng-template",73)(23,Me,4,3,"ng-template",74),e.k0s()()()()}if(2&i){const t=e.XpG();e.R7$(4),e.Y8G("items",t.paymentTypes)("multiple",!1),e.R50("ngModel",t.form.formPayment.paymentTypeCode),e.R7$(4),e.R50("ngModel",t.form.formPayment.value),e.R7$(11),e.Y8G("value",t.form.tbOrderPayments)("lazy",!0)}}let ye=(()=>{class i{constructor(t,a,n,r,s,o,C,v){this.routerActive=t,this.translateService=a,this.baseService=n,this.alertService=r,this.datePipe=s,this.modalService=o,this.ngxLoader=C,this.router=v,this.editOrders="orderManagement.order.editOrders",this.addOrders="orderManagement.order.addOrders",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.shifts=[],this.searchForm="",this.jobTypes=[],this.weekDays=[],this.breadCrumbItems=[],this.form={formServices:{serviceCategoryCode:null,serviceCode:null,price:null,notes:null},formPayment:{paymentTypeCode:null,value:null,attachRecietPath:"",fileName:""},agentCodeNavigation:{},tbOrderPayments:[],tbOrderServices:[]},this.todayDate="",this.idForm=0,this.isResolveList=!0,this.employeeGroups=[],this.notifier=new Z.B,this.mainDelay=100,this.loaderSearchShap=g.cX,this.loaderOperationShap=g.$$,this.operationLoader=g.ZW,this.isEditForm=!1,this.channels=[],this.districts=[],this.cities=[],this.orderTypes=[],this.serviceCategories=[],this.services=[],this.paymentTypes=[],this.fileName="",this.base64String=null;const b=new Date;this.todayDate=`${b.getFullYear()}-${(b.getMonth()+1).toString().padStart(2,"0")}-${b.getDate().toString().padStart(2,"0")}`,console.log(this.todayDate)}nextDate(){let t=this.todayDate.split("-");this.todayDate=`${t[0]}-${t[1]}-${+t[2]+1}`,console.log(this.todayDate)}previousDate(){let t=this.todayDate.split("-");this.todayDate=`${t[0]}-${t[1]}-${+t[2]-1}`,console.log(this.todayDate)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}ngOnInit(){this.configRoute(),this.breadCrumbItems=[{label:"layout.sidebar.leads"},{label:"crm.leads.title",active:!0,url:"order/list"},{label:this.isEditForm?"general.action.edit":"general.action.register",active:!0}],this.GetOrderLookUp()}onFileSelected(t){const a=t.target;if(a.files&&a.files.length>0){const n=a.files[0];this.fileName=n.name,console.log(n);const r=new FileReader;r.onload=()=>{this.base64String=r.result,console.log("Base64 String:",this.base64String)},r.onerror=s=>{console.error("Error reading file:",s)},r.readAsDataURL(n)}}addService(){let t=this.form.formServices,a=this.services.filter(n=>n.serviceCode==t.serviceCode)[0];this.form.tbOrderServices.push({serviceCategoryCode:t.serviceCategoryCode,service:a.name,serviceCode:t.serviceCode,price:t.price,notes:t.notes}),console.log(this.form),this.resetServiceForm()}addPayment(){let t=this.form.formPayment,a=this.paymentTypes.filter(n=>n.id==t.paymentTypeCode)[0];this.form.tbOrderPayments.push({paymentType:a.name,paymentTypeCode:t.paymentTypeCode,value:t.value,fileName:this.fileName}),console.log(this.form),this.resetPaymentForm()}deleteService(t){this.form.tbOrderServices.splice(t,1)}deletePayment(t){this.form.tbOrderPayments.splice(t,1)}resetServiceForm(){let t=this.form.formServices;t.serviceCategoryCode=null,t.serviceCode=void 0,t.price=null,t.notes=null}resetPaymentForm(){let t=this.form.formPayment;t.paymentTypeCode=null,t.value=null,t.attachRecietPath=null,t.fileName=null}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{let a=t.data.data;a&&(this.isEditForm=!0,this.form=a,"Proposed"==a.leadsTypes?this.form.leadsTypes=1:"Inquiry"==a.leadsTypes&&(this.form.leadsTypes=2))},()=>{this.alertService.error()})}GetOrderLookUp(){this.baseService.GetOrderLookUp().subscribe(t=>{this.channels=t.data.channels,this.cities=t.data.cityNames,this.orderTypes=t.data.orderStatus,this.serviceCategories=t.data.serviceCategories,this.paymentTypes=t.data.paymentTypes},t=>{console.log(t)})}getDistricts(t){this.ngxLoader.startLoader(g.ZW),this.baseService.districtsByCity(t).subscribe(a=>{this.districts=a.data,this.ngxLoader.stopLoader(g.ZW)},a=>{console.log(a)})}getServicesByCategory(t){console.log(t),this.ngxLoader.startLoader(g.ZW),this.baseService.getServicesByCategory(t).subscribe(a=>{this.ngxLoader.stopLoader(g.ZW),this.services=a.data},a=>{console.log(a)})}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}mapRegisterForm(t){let a={...t};return a.id=0,a}registerEntity(){this.ngxLoader.startLoader(g.ZW);let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,B.O)(),(0,X.c)(this.mainDelay),(0,U.Z)(),(0,u.Q)(this.notifier),(0,L.j)(()=>this.ngxLoader.stopLoader(g.ZW)),(0,W.W)(a=>(0,le.$)(a))).subscribe(a=>{a.success?(this.alertService.success(),this.router.navigateByUrl("/crm/leads")):this.alertService.error("general.message."+a.message)},a=>{this.alertService.error("general.message."+a)})}editEntity(){this.baseService.editPut(this.form.id,this.form).pipe((0,B.O)(),(0,X.c)(this.mainDelay),(0,U.Z)(),(0,u.Q)(this.notifier),(0,L.j)(()=>this.ngxLoader.stopLoader(g.ZW))).subscribe(t=>{t.success?this.alertService.success():this.alertService.error("general.message."+t.message)},t=>{this.alertService.error("general.message."+t)})}getTranslationText(t){let a="";return this.translateService.get(t).pipe((0,u.Q)(this.notifier)).subscribe(n=>{a=n}),a}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(m.Bq),e.rXU(f.eD),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-leads-operation"]],decls:64,vars:29,consts:[["formEntity","ngForm"],["CustomVertical","ngbNav"],["name","ngModel"],["mobile","ngModel"],["email","ngModel"],["serviceCategoryCode","ngModel"],["serviceCode","ngModel"],["price","ngModel"],["notes","ngModel"],["tableMaster",""],["extraDiscount","ngModel"],["date","ngModel"],["value","ngModel"],[3,"title","breadcrumbItems"],[1,"col-md-12"],[1,"card"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngSubmit"],[1,"card-body"],[1,"row"],[1,"col-lg-3","d-flex","align-items-center","justify-content-center"],["for","name",1,"text-muted","fw-bold","form-label"],[1,"col-lg-9"],[1,"col-12","col-md-6","mb-2"],["translate","",1,"required","text-muted","fw-bold","form-label","w-100"],["name","orderTypesId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],[2,"border-top","hsl(226, 36%, 40%) solid 2px!important"],[1,"col-lg-3"],["role","tablist","aria-orientation","vertical",1,""],["ngbNav","",1,"nav","nav-pills","flex-column","nav-pills-tab","custom-verti-nav-pills","text-center",3,"activeId"],[3,"ngbNavItem"],["ngbNavLink",""],[1,"ri-user-3-fill","d-block","fs-20","mb-1"],["ngbNavContent",""],[1,"ri-shopping-cart-fill","d-block","fs-20","mb-1"],[1,"ri-alarm-line","d-block","fs-20","mb-1"],[1,"ri-sticky-note-fill","d-block","fs-20","mb-1"],[1,"ri-money-dollar-box-fill","d-block","fs-20","mb-1"],[1,"tab-content","text-muted","mt-3","mt-lg-0"],[3,"ngbNavOutlet"],[1,"card-footer"],[1,"text-center"],["type","submit",1,"btn","btn-primary","btn-label","waves-effect","waves-light","rounded-pill"],[1,"ri-check-double-line","label-icon","align-middle","rounded-pill","fs-16","me-2"],["translate","general.action.save"],[1,"row","mt-2"],[1,"col-12","col-md-6","mb-3"],["for","name","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","name","type","text","id","name","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["class","text-danger text-center  ","translate","",4,"ngIf"],["for","mobile","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","mobile","type","text","id","mobile",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["translate","",1,"required","fw-bold","form-label","w-100"],["name","cityCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","DistrictCode","bindValue","code","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","email","translate","",1,"required","fw-bold","form-label"],["InputTirmFilter","","name","email","type","text","id","email",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["name","channelId","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["translate","",1,"text-danger","text-center"],[1,"row","mt-3"],["name","serviceCategoryCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["name","serviceCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","ngModel"],[1,"col-12","col-md-5","mb-2"],["InputTirmFilter","","name","price","type","text","id","price","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],["for","name","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","notes","type","text","id","notes",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-2","mb-2","d-flex","justify-content-center","align-items-end"],["type","button",1,"btn","btn-success","btn-icon","waves-effect","waves-light",3,"click"],[1,"ri-add-fill"],[1,"col-12","mt-3"],[1,"table-responsive"],["dataKey","id",3,"value","lazy"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col-12","col-md-4","my-3"],["InputTirmFilter","","name","extraDiscount","type","text","id","extraDiscount","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,""],["translate","",2,"width",".5%"],["translate","",2,"width","10%"],["translate","",2,"width","8%"],[1,"fs-5"],[1,"btn","btn-sm","btn-soft-info","edit-list","mx-2"],[1,"ri-pencil-fill","align-bottom","mx-1"],[1,"btn","btn-sm","btn-soft-danger","remove-list",3,"click"],[1,"ri-delete-bin-5-fill","align-bottom"],["colspan","6"],[1,"col-12","mb-2"],[1,"d-flex","justify-content-around"],[1,"btn","btn-primary",3,"click"],[1,"w-25"],["InputTirmFilter","","name","date","type","date","id","date","required","",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-12","col-md-6","mb-2","d-flex","mb-3"],["for","isUrgent","translate","",1,"fw-bold","form-label","w-25"],["inputId","isUrgent","name","isUrgent",1,"w-75",3,"ngModelChange","ngModel","binary"],[1,"col-12","col-md-6","mb-2","d-flex","align-items-center"],["for","name","translate","",1,"fw-bold","form-label","w-25"],["InputTirmFilter","","name","note","rows","2","id","note",1,"form-control","w-75","fs-6",3,"ngModelChange","ngModel"],[1,"col-6","col-md-4","mb-2"],["name","paymentTypeCode","bindValue","id","bindLabel","name",3,"ngModelChange","items","multiple","ngModel"],["for","value","translate","",1,"fw-bold","form-label"],["InputTirmFilter","","name","value","type","number","id","value",1,"form-control","fs-6",3,"ngModelChange","ngModel"],[1,"col-6","col-md-3","mb-2"],["type","file",1,"form-control","fs-6",3,"change"],[1,"col-6","col-md-1","mb-2","d-flex","justify-content-center","align-items-end"],["colspan","5"]],template:function(a,n){if(1&a){const r=e.RV6();e.nrm(0,"app-breadcrumbs",13),e.nI1(1,"translate"),e.j41(2,"div",14)(3,"div",15),e.nrm(4,"ngx-ui-loader",16),e.j41(5,"form",17,0),e.bIt("ngSubmit",function(){return e.eBV(r),e.Njj(n.OnSubmit())}),e.j41(7,"div",18)(8,"div",19)(9,"div",20)(10,"h4",21),e.EFF(11),e.nI1(12,"translate"),e.k0s()(),e.j41(13,"div",22)(14,"div",19)(15,"div",23)(16,"label",24),e.EFF(17,"orderManagement.order.orderType"),e.k0s(),e.j41(18,"ng-select",25),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.form.agentCodeNavigation.agentAddStatusCode,o)||(n.form.agentCodeNavigation.agentAddStatusCode=o),e.Njj(o)}),e.k0s()(),e.j41(19,"div",23)(20,"label",24),e.EFF(21,"orderManagement.order.orderSource"),e.k0s(),e.j41(22,"ng-select",25),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.form.channelCode,o)||(n.form.channelCode=o),e.Njj(o)}),e.k0s()()(),e.nrm(23,"hr",26),e.k0s()(),e.j41(24,"div",19)(25,"div",27)(26,"div",28)(27,"ul",29,1)(29,"li",30)(30,"a",31),e.nrm(31,"i",32),e.EFF(32),e.nI1(33,"translate"),e.k0s(),e.DNE(34,me,29,13,"ng-template",33),e.k0s(),e.j41(35,"li",30)(36,"a",31),e.nrm(37,"i",34),e.EFF(38),e.nI1(39,"translate"),e.k0s(),e.DNE(40,he,36,10,"ng-template",33),e.k0s(),e.j41(41,"li",30)(42,"a",31),e.nrm(43,"i",35),e.EFF(44," Available Times "),e.k0s(),e.DNE(45,be,18,3,"ng-template",33),e.k0s(),e.j41(46,"li",30)(47,"a",31),e.nrm(48,"i",36),e.EFF(49," Notes "),e.k0s(),e.DNE(50,Ce,12,3,"ng-template",33),e.k0s(),e.j41(51,"li",30)(52,"a",31),e.nrm(53,"i",37),e.EFF(54," Paid "),e.k0s(),e.DNE(55,Fe,24,6,"ng-template",33),e.k0s()()()(),e.j41(56,"div",22)(57,"div",38),e.nrm(58,"div",39),e.k0s()()()(),e.j41(59,"div",40)(60,"div",41)(61,"button",42),e.nrm(62,"i",43)(63,"span",44),e.k0s()()()()()()}if(2&a){const r=e.sdS(28);e.FS9("title",0==n.isEditForm?n.addOrders:e.bMT(1,21,n.editOrders)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderOperationShap)("loaderId",n.operationLoader),e.R7$(7),e.SpI(" ",e.bMT(12,23,"orderManagement.order.newOrder")," "),e.R7$(7),e.Y8G("items",n.orderTypes)("multiple",!1),e.R50("ngModel",n.form.agentCodeNavigation.agentAddStatusCode),e.R7$(4),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.form.channelCode),e.R7$(5),e.Y8G("activeId",1),e.R7$(2),e.Y8G("ngbNavItem",1),e.R7$(3),e.SpI(" ",e.bMT(33,25,"orderManagement.order.clientInfo")," "),e.R7$(3),e.Y8G("ngbNavItem",2),e.R7$(3),e.SpI(" ",e.bMT(39,27,"orderManagement.order.services")," "),e.R7$(3),e.Y8G("ngbNavItem",3),e.R7$(5),e.Y8G("ngbNavItem",4),e.R7$(5),e.Y8G("ngbNavItem",5),e.R7$(7),e.Y8G("ngbNavOutlet",r)}},dependencies:[h.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.YS,c.vS,c.cV,m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,$.m,p.Mm,j.XI,x.Ei,Q.Sc,f.Cv,R.vr,D.m,p.D9],encapsulation:2})}}return i})();var Te=d(56131),Se=d(7673);let Ie=(()=>{class i extends Te.E{constructor(t,a,n){super(t,a,n)}resolve(t,a){return this.pagination={pageNumber:1,pageSize:10},this.BaseService.get(this.pagination).pipe((0,W.W)(n=>(this.router.navigate([""]),this.alertService.error(n),(0,Se.of)(null))))}static{this.\u0275fac=function(a){return new(a||i)(e.KVO(_.Ix),e.KVO(S.Q),e.KVO(I.u))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var O=d(75622),w=d(62984),V=d(12260),E=d(16229),G=d(12822),A=d(91426),Y=d(91580),P=d(88148),H=d(15084),z=d(40724),K=d(14221);function Re(i,l){1&i&&(e.j41(0,"tr",28)(1,"th",29),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",30),e.nrm(4,"i",31),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",32),e.nrm(7,"i",31),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",33),e.nrm(10,"i",31),e.EFF(11," orderManagement.order.creationUser "),e.k0s(),e.j41(12,"th",34),e.nrm(13,"i",31),e.EFF(14," orderManagement.order.cityName "),e.k0s(),e.j41(15,"th",35),e.nrm(16,"i",31),e.EFF(17," orderManagement.order.districtName "),e.k0s(),e.j41(18,"th",36),e.nrm(19,"i",31),e.EFF(20," orderManagement.order.agentName "),e.k0s(),e.j41(21,"th",37),e.nrm(22,"i",31),e.EFF(23," orderManagement.order.channelName "),e.k0s(),e.j41(24,"th",38),e.nrm(25,"i",31),e.EFF(26," orderManagement.order.mobile "),e.k0s(),e.j41(27,"th",39),e.nrm(28,"i",31),e.EFF(29," orderManagement.order.visitDate "),e.k0s(),e.j41(30,"th",40),e.nrm(31,"i",31),e.EFF(32," orderManagement.order.workTimes "),e.k0s(),e.j41(33,"th",41),e.nrm(34,"i",31),e.EFF(35," orderManagement.order.services "),e.k0s(),e.nrm(36,"th",42),e.k0s())}function ke(i,l){1&i&&e.nrm(0,"span",55)}function Ne(i,l){if(1&i&&(e.j41(0,"span",56),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function xe(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",43)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,ke,1,0,"span",45)(14,Ne,2,1,"span",46),e.k0s(),e.j41(15,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(),s=e.sdS(52);return e.Njj(r.openModalClient(n.agentCode,s))}),e.EFF(16),e.k0s(),e.j41(17,"td"),e.EFF(18),e.k0s(),e.j41(19,"td"),e.EFF(20),e.k0s(),e.j41(21,"td"),e.EFF(22),e.nI1(23,"date"),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.k0s(),e.j41(28,"td")(29,"span",47)(30,"div",48)(31,"button",49),e.nrm(32,"i",50),e.k0s(),e.j41(33,"ul",51)(34,"li")(35,"span",52),e.nrm(36,"i",53)(37,"span",54),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,a=l.rowIndex;e.R7$(2),e.JRh(a+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(7,13,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(2),e.SpI(" ",t.agentName,""),e.R7$(2),e.SpI(" ",t.channelName,""),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.SpI(" ",e.i5U(23,16,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.workTimes,""),e.R7$(2),e.SpI(" ",t.services,"")}}function De(i,l){1&i&&(e.j41(0,"div",57),e.EFF(1," general.table.noData"),e.k0s())}function Oe(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",58)(1,"div",59),e.nrm(2,"ngb-pagination-info",60),e.j41(3,"table-length",61),e.bIt("lengthChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",62)(5,"ngb-pagination",63),e.bIt("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,n)||(r.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function we(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",64),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function Ve(i,l){1&i&&e.nrm(0,"client-profile-main")}let Ee=(()=>{class i extends O.w{constructor(t,a,n,r,s,o,C,v,b,M,F,y,T){super(t,a,C,n,r,s,o),this.baseService=n,this.authDaamService=v,this.cityService=b,this.districtService=M,this.channelService=F,this.excelService=y,this.router=T,this.title="orderManagement.order.serviceAfterSale",this.titleOperation="orderManagement.order.titleOperation",this.searchForm={},this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.configRoute(),this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(a=>{this.districts=a.data},a=>{console.log(a)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(a=>{a?this.alertService.success():this.alertService.error("general.message."+a)},a=>{this.alertService.error()})}mapRegisterForm(t){let a={...t};return a.employeeCode=0,a}OnSearch(t){this.ngxLoader.startLoader(g.a7),this.loadentities()}onSearch(){this.ngxLoader.startLoader(g.a7);var t=this.searchForm.dates;t+void 0&&"to"in t?(this.pagination.visitDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.visitDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null),(t=this.searchForm.finishedDates)+void 0&&"to"in t?(this.pagination.finishedDateFrom=this.datePipe.transform(t.from,"yyyy-MM-ddT00:00:00.000"),this.pagination.finishedDateTo=this.datePipe.transform(t.to,"yyyy-MM-ddT23:59:59.999"),this.loadentities()):(this.pagination.finishedDateFrom=null,this.pagination.finishedDateTo=null),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(a=>{t.push({orderCode:a.orderCode,visitDate:a.visitDate,notes:a.notes,createdDate:a.createdDate,assignDate:a.assignDate,finishDate:a.finishDate,districtName:a.districtName,cityName:a.cityName,agentName:a.agentName,mobile:a.mobile,email:a.email,creationUser:a.creationUser,channelName:a.channelName,teamNames:a.teamNames,services:a.services,workTimes:a.workTimes,paymentTypeName:a.paymentTypeName,finishUser:a.finishUser,isCancel:a.isCancel,isReopen:a.isReopen,isFree:a.isFree,isFinish:a.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.pagination.filterForLastTwoDays=!0,this.baseService.get(this.pagination).pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(g.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}openModalClient(t,a,n="xl"){this.clientSelected=t,this.modalService.open(a,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}onReset(){this.form={},this.searchForm={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(w.J),e.rXU(V.h),e.rXU(E.m),e.rXU(G.l),e.rXU(A.V),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-service-after-sale"]],features:[e.Vt3],decls:53,vars:57,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","dates","name","dates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],["type","text","mwlFlatpickr","","id","finishedDates","name","finishedDates","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[3,"hasProgressBar","fgsType","loaderId"],[1,"table-responsive","mt-4"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","creationUser","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","districtName","translate","",2,"width","8%"],["pSortableColumn","agentName","translate","",2,"width","5%"],["pSortableColumn","channelName","translate","",2,"width","10%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","visitDate","translate","",2,"width","10%"],["pSortableColumn","workTimes","translate","",2,"width","10%"],["pSortableColumn","services","translate","",2,"width","10%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"]],template:function(a,n){if(1&a){const r=e.RV6();e.nrm(0,"app-breadcrumbs",3),e.nI1(1,"translate"),e.j41(2,"div",4)(3,"div",5)(4,"div",6)(5,"base-filter",7),e.bIt("reset",function(){return e.eBV(r),e.Njj(n.onReset())})("search",function(){return e.eBV(r),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(n.goRegister())}),e.qex(6,8),e.j41(7,"div",9)(8,"div",10)(9,"input",11),e.nI1(10,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(11,"i",12),e.k0s()(),e.j41(12,"div",9)(13,"div",10)(14,"input",13),e.nI1(15,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(16,"i",12),e.k0s()(),e.j41(17,"div",9)(18,"div",10)(19,"input",11),e.nI1(20,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(21,"i",12),e.k0s()(),e.j41(22,"div",9)(23,"div",10)(24,"ng-select",14),e.nI1(25,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(26,"div",9)(27,"div",10)(28,"ng-select",15),e.nI1(29,"translate"),e.bIt("change",function(o){return e.eBV(r),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(30,"div",9)(31,"div",10)(32,"ng-select",16),e.nI1(33,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(34,"div",17)(35,"input",18),e.nI1(36,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.dates,o)||(n.searchForm.dates=o),e.Njj(o)}),e.k0s()(),e.j41(37,"div",17)(38,"input",19),e.nI1(39,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.finishedDates,o)||(n.searchForm.finishedDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(40,"div",20),e.nrm(41,"ngx-ui-loader",21),e.j41(42,"div",22)(43,"p-table",23,0),e.bIt("onLazyLoad",function(o){return e.eBV(r),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(r),e.Njj(n.onSelectionChange(o))}),e.DNE(45,Re,37,0,"ng-template",24)(46,xe,38,19,"ng-template",25),e.k0s()(),e.DNE(47,De,2,0,"div",26)(48,Oe,6,8,"div",27),e.k0s()()()(),e.DNE(49,we,1,0,"ng-template",null,1,e.C5r)(51,Ve,1,0,"ng-template",null,2,e.C5r)}2&a&&(e.FS9("title",e.bMT(1,39,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(5),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(10,41,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(15,43,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(20,45,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(25,47,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(29,49,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(33,51,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(36,53,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(39,55,"orderManagement.order.finishedDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.finishedDates),e.R7$(3),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(2),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[h.bT,c.me,c.Q0,c.BC,c.vS,m.tg,m.do,m.U0,m.s5,k.kL,$.m,Y.g,P.p,H.w,z.b,K.t,p.Mm,j.XI,x.Ei,j.Tg,f.Cv,R.vr,D.m,h.vh,p.D9],encapsulation:2})}}return i})();var Ge=d(59350);function Ae(i,l){1&i&&(e.j41(0,"tr",26)(1,"th",27),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",28),e.nrm(4,"i",29),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",30),e.nrm(7,"i",29),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",31),e.nrm(10,"i",29),e.EFF(11," orderManagement.order.creationUser "),e.k0s(),e.j41(12,"th",32),e.nrm(13,"i",29),e.EFF(14," orderManagement.order.cityName "),e.k0s(),e.j41(15,"th",33),e.nrm(16,"i",29),e.EFF(17," orderManagement.order.districtName "),e.k0s(),e.j41(18,"th",34),e.nrm(19,"i",29),e.EFF(20," orderManagement.order.status "),e.k0s(),e.j41(21,"th",35),e.nrm(22,"i",29),e.EFF(23," orderManagement.order.agentName "),e.k0s(),e.j41(24,"th",36),e.nrm(25,"i",29),e.EFF(26," orderManagement.order.channelName "),e.k0s(),e.j41(27,"th",37),e.nrm(28,"i",29),e.EFF(29," orderManagement.order.mobile "),e.k0s(),e.j41(30,"th",38),e.nrm(31,"i",29),e.EFF(32," orderManagement.order.assignTo "),e.k0s(),e.j41(33,"th",39),e.nrm(34,"i",29),e.EFF(35," orderManagement.order.visitDate "),e.k0s(),e.j41(36,"th",40),e.nrm(37,"i",29),e.EFF(38," orderManagement.order.workTimes "),e.k0s(),e.j41(39,"th",41),e.nrm(40,"i",29),e.EFF(41," orderManagement.order.services "),e.k0s(),e.nrm(42,"th",42),e.k0s())}function Be(i,l){1&i&&e.nrm(0,"span",60)}function Xe(i,l){if(1&i&&(e.j41(0,"span",61),e.EFF(1),e.k0s()),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI("",t.districtName," ")}}function Ue(i,l){if(1&i&&(e.nrm(0,"i",62),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",63),e.EFF(5),e.nI1(6,"date"),e.nrm(7,"br")(8,"i",64),e.EFF(9)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,3,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",e.i5U(6,6,t.updatedDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.creatorName," ")}}function Le(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",43)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.DNE(13,Be,1,0,"span",45)(14,Xe,2,1,"span",46),e.k0s(),e.j41(15,"td")(16,"span"),e.nrm(17,"span",47),e.k0s()(),e.j41(18,"td",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(),s=e.sdS(49);return e.Njj(r.openModalClient(n.agentCode,s))}),e.EFF(19),e.k0s(),e.j41(20,"td"),e.EFF(21),e.k0s(),e.j41(22,"td"),e.EFF(23),e.k0s(),e.j41(24,"td"),e.EFF(25),e.k0s(),e.j41(26,"td"),e.EFF(27),e.nI1(28,"date"),e.k0s(),e.j41(29,"td"),e.EFF(30),e.k0s(),e.j41(31,"td"),e.EFF(32),e.k0s(),e.j41(33,"td"),e.DNE(34,Ue,10,9,"ng-template",null,3,e.C5r),e.j41(36,"span",48)(37,"div",49),e.nrm(38,"i",50),e.j41(39,"button",51),e.nrm(40,"i",52),e.k0s(),e.j41(41,"ul",53)(42,"li",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(n.id))}),e.j41(43,"span",54),e.nrm(44,"i",55)(45,"span",56),e.k0s()(),e.j41(46,"li",44),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(),s=e.sdS(47);return e.Njj(r.openModal(n.userCode,s))}),e.j41(47,"a",57),e.nrm(48,"i",58)(49,"span",59),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,a=l.rowIndex,n=e.sdS(35),r=e.XpG();e.R7$(2),e.JRh(a+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(7,19,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.creationUser),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.Y8G("ngIf",null==t.districtName),e.R7$(),e.Y8G("ngIf",null!==t.districtName),e.R7$(2),e.ZvI("badge ",r.getStatus(t),""),e.R7$(),e.FS9("translate",r.getTrnslate(t)),e.R7$(2),e.SpI(" ",t.agentName,""),e.R7$(2),e.SpI(" ",t.channelName,""),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.SpI(" ",t.teamNames,""),e.R7$(2),e.SpI(" ",e.i5U(28,22,t.visitDate,"yyyy-MM-dd"),""),e.R7$(3),e.SpI(" ",t.workTimes,""),e.R7$(2),e.SpI(" ",t.services,""),e.R7$(6),e.Y8G("ngbTooltip",n)}}function $e(i,l){1&i&&(e.j41(0,"div",65),e.EFF(1," general.table.noData "),e.k0s())}function Ye(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",66)(1,"div",67),e.nrm(2,"ngb-pagination-info",68),e.j41(3,"table-length",69),e.bIt("lengthChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",70)(5,"ngb-pagination",71),e.bIt("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,n)||(r.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function Pe(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",72),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function He(i,l){1&i&&e.nrm(0,"client-profile-main",73)}let ze=(()=>{class i extends O.w{constructor(t,a,n,r,s,o,C,v,b,M,F,y,T){super(t,a,C,n,r,s,o),this.baseService=n,this.authDaamService=v,this.excelService=b,this.cityService=M,this.districtService=F,this.channelService=y,this.router=T,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.clientSelected=0,this.cities=[],this.districts=[],this.channels=[],this.configRoute(),this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(a=>{this.districts=a.data},a=>{console.log(a)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(a=>{a?this.alertService.success():this.alertService.error("general.message."+a)},a=>{this.alertService.error()})}mapRegisterForm(t){let a={...t};return a.employeeCode=0,a}onSearch(){var a;if(this.ngxLoader.startLoader(g.a7),console.log(this.searchForm),(a=this.searchForm.dates)+void 0&&a.includes("to")){var t=a.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(a=this.searchForm.creationDates)+void 0&&a.includes("to")?(t=a.split("to").map(r=>r.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}configRoute(){this.routerActive.data.pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.data,this.pagination.totalItems=t.data.totalItems},()=>{this.alertService.error()})}mapExcel(){let t=[];return this.entities.forEach(a=>{t.push({orderCode:a.orderCode,visitDate:a.visitDate,notes:a.notes,createdDate:a.createdDate,assignDate:a.assignDate,finishDate:a.finishDate,districtName:a.districtName,cityName:a.cityName,agentName:a.agentName,mobile:a.mobile,email:a.email,creationUser:a.creationUser,channelName:a.channelName,teamNames:a.teamNames,services:a.services,workTimes:a.workTimes,paymentTypeName:a.paymentTypeName,finishUser:a.finishUser,isCancel:a.isCancel,isReopen:a.isReopen,isFree:a.isFree,isFinish:a.isFinish})}),t}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModalClient(t,a,n="xl"){this.clientSelected=t,this.modalService.open(a,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(w.J),e.rXU(A.V),e.rXU(V.h),e.rXU(E.m),e.rXU(G.l),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-all-order"]],features:[e.Vt3],decls:50,vars:50,consts:[["tableMaster",""],["deleteModal",""],["clientProfile",""],["tooltipContent",""],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive","mt-4"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","creationUser","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","districtName","translate","",2,"width","8%"],["pSortableColumn","status","translate","",2,"width","6%"],["pSortableColumn","agentName","translate","",2,"width","5%"],["pSortableColumn","channelName","translate","",2,"width","10%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","assignTo","translate","",2,"width","10%"],["pSortableColumn","visitDate","translate","",2,"width","10%"],["pSortableColumn","workTimes","translate","",2,"width","10%"],["pSortableColumn","services","translate","",2,"width","10%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],["class","badge bg-danger-subtle text-danger","translate","orderManagement.order.nothing",4,"ngIf"],["class","badge bg-success-subtle text-success",4,"ngIf"],[3,"translate"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item"],[1,"ri-pencil-fill","align-bottom","me-2","text-muted"],["translate","general.action.edit"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-delete-bin-fill","align-bottom","me-2","text-muted"],["translate","general.action.delete"],["translate","orderManagement.order.nothing",1,"badge","bg-danger-subtle","text-danger"],[1,"badge","bg-success-subtle","text-success"],[1,"ri-time-fill","text-warning"],[1,"ri-time-fill","text-danger"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],["","clientSelected"]],template:function(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"div",6)(3,"base-filter",7),e.bIt("reset",function(){return e.eBV(r),e.Njj(n.onReset())})("search",function(){return e.eBV(r),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(n.goRegister())}),e.qex(4,8),e.j41(5,"div",9)(6,"div",10)(7,"input",11),e.nI1(8,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(9,"i",12),e.k0s()(),e.j41(10,"div",9)(11,"div",10)(12,"input",13),e.nI1(13,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(14,"i",12),e.k0s()(),e.j41(15,"div",9)(16,"div",10)(17,"input",11),e.nI1(18,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(19,"i",12),e.k0s()(),e.j41(20,"div",9)(21,"div",10)(22,"ng-select",14),e.nI1(23,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(24,"div",9)(25,"div",10)(26,"ng-select",15),e.nI1(27,"translate"),e.bIt("change",function(o){return e.eBV(r),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(28,"div",9)(29,"div",10)(30,"ng-select",16),e.nI1(31,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(32,"div",17)(33,"input",18),e.nI1(34,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.dates,o)||(n.searchForm.dates=o),e.Njj(o)}),e.k0s()(),e.j41(35,"div",17)(36,"input",18),e.nI1(37,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(38,"div",19)(39,"div",20)(40,"p-table",21,0),e.bIt("onLazyLoad",function(o){return e.eBV(r),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(r),e.Njj(n.onSelectionChange(o))}),e.DNE(42,Ae,43,0,"ng-template",22)(43,Le,50,25,"ng-template",23),e.k0s()(),e.DNE(44,$e,2,0,"div",24)(45,Ye,6,8,"div",25),e.k0s()()()(),e.DNE(46,Pe,1,0,"ng-template",null,1,e.C5r)(48,He,1,0,"ng-template",null,2,e.C5r)}2&a&&(e.R7$(3),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,34,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,36,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,38,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(23,40,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,42,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(31,44,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(34,46,"orderManagement.order.visitDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.dates),e.R7$(3),e.FS9("placeholder",e.bMT(37,48,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[h.bT,c.me,c.Q0,c.BC,c.vS,m.tg,m.do,m.U0,m.s5,k.kL,Y.g,P.p,H.w,z.b,K.t,p.Mm,j.XI,x.Ei,j.Tg,R.vr,m.md,D.m,h.vh,p.D9],encapsulation:2})}}return i})();function Je(i,l){1&i&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.agentName "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," orderManagement.order.mobile "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," orderManagement.order.cityName "),e.k0s(),e.nrm(18,"th",35),e.k0s())}function Qe(i,l){if(1&i&&(e.nrm(0,"i",47),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",48),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function Ze(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",36)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(n.pendingCode))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.DNE(15,Qe,6,5,"ng-template",null,3,e.C5r),e.j41(17,"div",38)(18,"div",39),e.nrm(19,"i",40),e.j41(20,"button",41),e.nrm(21,"i",42),e.k0s(),e.j41(22,"ul",43)(23,"li",37),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(),s=e.sdS(46);return e.Njj(r.openModal(n.pendingCode,s))}),e.j41(24,"a",44),e.nrm(25,"i",45)(26,"span",46),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,a=l.rowIndex,n=e.sdS(16);e.R7$(2),e.JRh(a+1),e.R7$(2),e.SpI("#SO# ",t.pendingCode,""),e.R7$(2),e.JRh(e.i5U(7,7,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.JRh(t.cityName),e.R7$(6),e.Y8G("ngbTooltip",n)}}function We(i,l){1&i&&(e.j41(0,"div",49),e.EFF(1," general.table.noData "),e.k0s())}function Ke(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",50)(1,"div",51),e.nrm(2,"ngb-pagination-info",52),e.j41(3,"table-length",53),e.bIt("lengthChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",54)(5,"ngb-pagination",55),e.bIt("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,n)||(r.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function qe(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",56),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function et(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",57,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",58),e.j41(3,"div",59)(4,"div",60)(5,"button",61),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",62)(7,"div",63),e.nrm(8,"lord-icon",64),e.j41(9,"div",65),e.nrm(10,"h4",66)(11,"p",67),e.k0s()(),e.j41(12,"div",68),e.nrm(13,"button",69),e.j41(14,"button",70),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader)}}let tt=(()=>{class i extends O.w{constructor(t,a,n,r,s,o,C,v,b,M,F,y,T){super(t,a,C,n,r,s,o),this.baseService=n,this.authDaamService=v,this.excelService=b,this.cityService=M,this.districtService=F,this.channelService=y,this.router=T,this.title="orderManagement.order.titlePending",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(a=>{this.districts=a.data},a=>{console.log(a)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(a=>{a?this.alertService.success():this.alertService.error("general.message."+a)},a=>{this.alertService.error()})}mapRegisterForm(t){let a={...t};return a.employeeCode=0,a}onSearch(){var a;if(this.ngxLoader.startLoader(g.a7),console.log(this.searchForm),(a=this.searchForm.dates)+void 0&&a.includes("to")){var t=a.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(a=this.searchForm.creationDates)+void 0&&a.includes("to")?(t=a.split("to").map(r=>r.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.baseService.getPendingOrders(this.pagination).pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(g.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(a=>{t.push({orderCode:a.orderCode,visitDate:a.visitDate,notes:a.notes,createdDate:a.createdDate,assignDate:a.assignDate,finishDate:a.finishDate,districtName:a.districtName,cityName:a.cityName,agentName:a.agentName,mobile:a.mobile,email:a.email,creationUser:a.creationUser,channelName:a.channelName,teamNames:a.teamNames,services:a.services,workTimes:a.workTimes,paymentTypeName:a.paymentTypeName,finishUser:a.finishUser,isCancel:a.isCancel,isReopen:a.isReopen,isFree:a.isFree,isFinish:a.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,B.O)(),(0,X.c)(this.mainDelay),(0,U.Z)(),(0,u.Q)(this.notifier),(0,L.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,a,n="md"){this.orderSelected=t,this.modalService.open(a,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(w.J),e.rXU(A.V),e.rXU(V.h),e.rXU(E.m),e.rXU(G.l),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-pending-order"]],features:[e.Vt3],decls:47,vars:44,consts:[["tableMaster",""],["deleteModal",""],["recallModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive","mt-4"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","name","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-phone-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.Recall"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.RecallMessage"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"base-filter",8),e.bIt("reset",function(){return e.eBV(r),e.Njj(n.onReset())})("search",function(){return e.eBV(r),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(n.goRegister())}),e.qex(4,9),e.j41(5,"div",10)(6,"div",11)(7,"input",12),e.nI1(8,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(9,"i",13),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"input",14),e.nI1(13,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(14,"i",13),e.k0s()(),e.j41(15,"div",10)(16,"div",11)(17,"input",12),e.nI1(18,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(19,"i",13),e.k0s()(),e.j41(20,"div",10)(21,"div",11)(22,"ng-select",15),e.nI1(23,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(24,"div",10)(25,"div",11)(26,"ng-select",16),e.nI1(27,"translate"),e.bIt("change",function(o){return e.eBV(r),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(28,"div",10)(29,"div",11)(30,"ng-select",17),e.nI1(31,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(32,"div",18)(33,"input",19),e.nI1(34,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(35,"div",20)(36,"div",21)(37,"p-table",22,0),e.bIt("onLazyLoad",function(o){return e.eBV(r),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(r),e.Njj(n.onSelectionChange(o))}),e.DNE(39,Je,19,0,"ng-template",23)(40,Ze,27,10,"ng-template",24),e.k0s()(),e.DNE(41,We,2,0,"div",25)(42,Ke,6,8,"div",26),e.k0s()()()(),e.DNE(43,qe,1,0,"ng-template",null,1,e.C5r)(45,et,15,3,"ng-template",null,2,e.C5r)}2&a&&(e.R7$(3),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,30,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,32,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,34,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(23,36,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,38,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(31,40,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(34,42,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[h.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.vS,c.cV,m.tg,m.do,m.U0,m.s5,k.kL,Y.g,P.p,H.w,z.b,p.Mm,j.XI,x.Ei,j.Tg,f.Cv,R.vr,m.md,D.m,h.vh,p.D9],encapsulation:2})}}return i})();function nt(i,l){1&i&&(e.j41(0,"tr",27)(1,"th",28),e.EFF(2,"#"),e.k0s(),e.j41(3,"th",29),e.nrm(4,"i",30),e.EFF(5," orderManagement.order.orderCode "),e.k0s(),e.j41(6,"th",31),e.nrm(7,"i",30),e.EFF(8," orderManagement.order.createdDate "),e.k0s(),e.j41(9,"th",32),e.nrm(10,"i",30),e.EFF(11," orderManagement.order.agentName "),e.k0s(),e.j41(12,"th",33),e.nrm(13,"i",30),e.EFF(14," orderManagement.order.mobile "),e.k0s(),e.j41(15,"th",34),e.nrm(16,"i",30),e.EFF(17," orderManagement.order.cityName "),e.k0s(),e.j41(18,"th",35),e.nrm(19,"i",30),e.EFF(20," orderManagement.order.callCounter "),e.k0s(),e.nrm(21,"th",36),e.k0s())}function at(i,l){if(1&i&&(e.nrm(0,"i",48),e.EFF(1),e.nI1(2,"date"),e.nrm(3,"br")(4,"i",49),e.EFF(5)),2&i){const t=e.XpG().$implicit;e.R7$(),e.SpI(" ",e.i5U(2,2,t.createdDate,"yyyy-MM-dd HH:mm:ss")," "),e.R7$(4),e.SpI(" ",t.name," ")}}function it(i,l){if(1&i){const t=e.RV6();e.j41(0,"tr",37)(1,"td"),e.EFF(2),e.k0s(),e.j41(3,"td",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.goEdit(n.id))}),e.EFF(4),e.k0s(),e.j41(5,"td"),e.EFF(6),e.nI1(7,"date"),e.k0s(),e.j41(8,"td"),e.EFF(9),e.k0s(),e.j41(10,"td"),e.EFF(11),e.k0s(),e.j41(12,"td"),e.EFF(13),e.k0s(),e.j41(14,"td"),e.EFF(15),e.k0s(),e.j41(16,"td"),e.DNE(17,at,6,5,"ng-template",null,3,e.C5r),e.j41(19,"div",39)(20,"div",40),e.nrm(21,"i",41),e.j41(22,"button",42),e.nrm(23,"i",43),e.k0s(),e.j41(24,"ul",44)(25,"li",38),e.bIt("click",function(){const n=e.eBV(t).$implicit,r=e.XpG(),s=e.sdS(46);return e.Njj(r.openModal(n,s))}),e.j41(26,"a",45),e.nrm(27,"i",46)(28,"span",47),e.k0s()()()()()()()}if(2&i){const t=l.$implicit,a=l.rowIndex,n=e.sdS(18);e.R7$(2),e.JRh(a+1),e.R7$(2),e.SpI("#SO#",t.orderCode,""),e.R7$(2),e.JRh(e.i5U(7,8,t.createdDate,"yyyy-MM-dd")),e.R7$(3),e.JRh(t.name),e.R7$(2),e.SpI(" ",t.mobile,""),e.R7$(2),e.JRh(t.cityName),e.R7$(2),e.JRh(t.callCounter),e.R7$(6),e.Y8G("ngbTooltip",n)}}function rt(i,l){1&i&&(e.j41(0,"div",50),e.EFF(1," general.table.noData "),e.k0s())}function ot(i,l){if(1&i){const t=e.RV6();e.j41(0,"div",51)(1,"div",52),e.nrm(2,"ngb-pagination-info",53),e.j41(3,"table-length",54),e.bIt("lengthChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.ListItemChange(n))}),e.k0s()(),e.j41(4,"div",55)(5,"ngb-pagination",56),e.bIt("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.Njj(r.pageChanged(n))}),e.mxI("pageChange",function(n){e.eBV(t);const r=e.XpG();return e.DH7(r.pagination.pageNumber,n)||(r.pagination.pageNumber=n),e.Njj(n)}),e.k0s()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("pagination",t.pagination),e.R7$(),e.Y8G("lengthTable",t.tableLengthSelect),e.R7$(2),e.Y8G("pageSize",t.pagination.pageSize)("collectionSize",t.pagination.totalItems),e.R50("page",t.pagination.pageNumber),e.Y8G("maxSize",5)("rotate",!0)("boundaryLinks",!0)}}function st(i,l){if(1&i){const t=e.RV6();e.j41(0,"delete-modal",57),e.bIt("deleteConfirm",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.DeleteConfirm())})("dismiss",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()}}function lt(i,l){1&i&&e.nrm(0,"h4",73)}function dt(i,l){if(1&i&&(e.j41(0,"h4"),e.EFF(1),e.nI1(2,"translate"),e.nI1(3,"translate"),e.nI1(4,"translate"),e.k0s()),2&i){const t=e.XpG(2);e.R7$(),e.LHq(" ",e.bMT(2,4,"orderManagement.order.RecallMessageCount")," ",t.selectedCallCounter," ",e.bMT(3,6,"orderManagement.order.times")," ",e.bMT(4,8,"orderManagement.order.RecallMessageCount2")," ")}}function mt(i,l){if(1&i){const t=e.RV6();e.j41(0,"form",58,4),e.bIt("ngSubmit",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.reCallOrder())}),e.nrm(2,"ngx-ui-loader",59),e.j41(3,"div",60)(4,"div",61)(5,"button",62),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()(),e.j41(6,"div",63)(7,"div",64),e.nrm(8,"lord-icon",65),e.j41(9,"div",66),e.DNE(10,lt,1,0,"h4",67)(11,dt,5,10,"h4",68),e.nrm(12,"p",69),e.k0s()(),e.j41(13,"div",70),e.nrm(14,"button",71),e.j41(15,"button",72),e.bIt("click",function(){const n=e.eBV(t).$implicit;return e.Njj(n.dismiss())}),e.k0s()()()()()}if(2&i){const t=e.XpG();e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",t.loaderOperationShap)("loaderId",t.deleteLoader),e.R7$(8),e.Y8G("ngIf",t.selectedCallCounter<=2),e.R7$(),e.Y8G("ngIf",t.selectedCallCounter>2)}}let ct=(()=>{class i extends O.w{constructor(t,a,n,r,s,o,C,v,b,M,F,y,T){super(t,a,C,n,r,s,o),this.baseService=n,this.authDaamService=v,this.excelService=b,this.cityService=M,this.districtService=F,this.channelService=y,this.router=T,this.title="orderManagement.order.titleRecall",this.titleOperation="orderManagement.order.titleOperation",this.keySelected="",this.assignUsers=[],this.times=[],this.employees=[],this.searchForm={},this.isResolveList=!0,this.employeeTypes=[{id:1,name:"employeeTeam"},{id:2,name:"managment"},{id:3,name:"customerService"}],this.employeeGroups=[],this.activeindex="1",this.active=1,this.formPassword={},this.roles=[],this.userTypes=[],this.actives=[{id:!0,name:"active"},{id:!1,name:"noActive"}],this.countLoad=2,this.orderSelected=0,this.selectedCallCounter=0,this.cities=[],this.districts=[],this.channels=[],this.GetCities(),this.GetChannels()}GetCities(){this.cityService.getDropDown().subscribe(t=>{this.cities=t.data},t=>{console.log(t)})}GetDistricts(t){this.districtService.getByCityId(t).subscribe(a=>{this.districts=a.data},a=>{console.log(a)})}GetChannels(){this.channelService.getDropDown().subscribe(t=>{this.channels=t.data},t=>{console.log(t)})}ngOnInitMore(){}mapForm(t){return{...t}}onUpdateIsActive(t){this.baseService.updateActive(t).pipe((0,u.Q)(this.notifier)).subscribe(a=>{a?this.alertService.success():this.alertService.error("general.message."+a)},a=>{this.alertService.error()})}mapRegisterForm(t){let a={...t};return a.employeeCode=0,a}onSearch(){var a;if(this.ngxLoader.startLoader(g.a7),console.log(this.searchForm),(a=this.searchForm.dates)+void 0&&a.includes("to")){var t=a.split("to").map(n=>n.trim());this.pagination.visitDateFrom=t[0]+"T00:00:00.000",this.pagination.visitDateTo=t[1]+"T23:59:59.999",this.loadentities()}else this.pagination.visitDateFrom=null,this.pagination.visitDateTo=null;(a=this.searchForm.creationDates)+void 0&&a.includes("to")?(t=a.split("to").map(r=>r.trim()),this.pagination.creationDateFrom=t[0]+"T00:00:00.000",this.pagination.creationDateTo=t[1]+"T23:59:59.999",this.loadentities()):(this.pagination.creationDateFrom=null,this.pagination.creationDateTo=null),this.pagination.subject=this.searchForm.name,null!=this.searchForm.status&&(this.pagination.status=Number.parseInt(this.searchForm.status)),null!=this.searchForm.priority&&(this.pagination.priority=Number.parseInt(this.searchForm.priority)),this.loadentities(),this.loadentities()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(g.a7),this.baseService.getRecallOrders(this.pagination).pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(g.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(g.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}mapExcel(){let t=[];return this.entities.forEach(a=>{t.push({orderCode:a.orderCode,visitDate:a.visitDate,notes:a.notes,createdDate:a.createdDate,assignDate:a.assignDate,finishDate:a.finishDate,districtName:a.districtName,cityName:a.cityName,agentName:a.agentName,mobile:a.mobile,email:a.email,creationUser:a.creationUser,channelName:a.channelName,teamNames:a.teamNames,services:a.services,workTimes:a.workTimes,paymentTypeName:a.paymentTypeName,finishUser:a.finishUser,isCancel:a.isCancel,isReopen:a.isReopen,isFree:a.isFree,isFinish:a.isFinish})}),t}reCallOrder(){this.ngxLoader.startLoader(g.Fq),this.baseService.UpdateCallCounter(this.orderSelected).pipe((0,B.O)(),(0,X.c)(this.mainDelay),(0,U.Z)(),(0,u.Q)(this.notifier),(0,L.j)(()=>this.ngxLoader.stopLoader(g.Fq))).subscribe({next:t=>{this.modalService.dismissAll(),this.loadentities(),this.alertService.success()}})}onExportXlsx(){let t=this.mapExcel();this.excelService.exportAsExcelFile(t,"User",[])}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}goRegister(){this.router.navigateByUrl("/managment/order/new")}goEdit(t){this.router.navigateByUrl("/managment/order/new")}getStatus(t){return t.isCancel?"bg-warning-subtle text-warning":t.isFinish?"bg-success-subtle text-success":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen||t.isFree?"bg-warning-subtle text-warning":"bg-success-subtle text-success"}getTrnslate(t){return t.isCancel?"orderManagement.order.cancel":t.isFinish?"orderManagement.order.finish":t.isUrgent?"bg-danger-subtle text-danger":t.isReopen?"orderManagement.order.reopen":t.isFree?"orderManagement.order.free":"orderManagement.order.finished"}openModal(t,a,n="md"){this.orderSelected=t.pendingCode,this.selectedCallCounter=t.callCounter,this.modalService.open(a,{centered:!0,size:n})}oncityChange(t){this.GetDistricts(t.code)}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(w.J),e.rXU(A.V),e.rXU(V.h),e.rXU(E.m),e.rXU(G.l),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-recall-orders"]],features:[e.Vt3],decls:47,vars:44,consts:[["tableMaster",""],["deleteModal",""],["recallModal",""],["tooltipContent",""],["formEntity","ngForm"],[1,"row"],[1,"col-lg-12"],[1,"card","grid"],[3,"reset","search","exportXlsx","addNew","totalItems","title"],["control",""],[1,"col-12","col-md-2","mb-2"],[1,"search-box"],["InputTirmFilter","","type","number","id","filterValue","name","filterValue",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],[1,"ri-search-line","search-icon"],["InputTirmFilter","","type","search","id","agentName","name","agentName",1,"form-control","search","bg-light","border-light",3,"ngModelChange","placeholder","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],["name","name","bindValue","code","bindLabel","name",3,"change","ngModelChange","placeholder","items","multiple","ngModel"],["name","employeeCode","bindValue","id","bindLabel","name",3,"ngModelChange","placeholder","items","multiple","ngModel"],[1,"col-12","col-md-4","mb-2"],["type","text","mwlFlatpickr","","id","isDate","mode","range",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"card-body"],[1,"table-responsive","mt-4"],["dataKey","id",3,"onLazyLoad","selectionChange","value","rows","lazy","totalRecords"],["pTemplate","header"],["pTemplate","body"],["class","text-center text-danger text-bold fs-6 p-3","translate","",4,"ngIf"],["class","row px-1 py-1 overflow-hidden",4,"ngIf"],[1,""],["translate","",2,"width",".5%"],["pSortableColumn","orderCode","translate","",2,"width","6%"],[1,"ri-expand-up-down-line"],["pSortableColumn","createdDate","translate","",2,"width","12%"],["pSortableColumn","name","translate","",2,"width","5%"],["pSortableColumn","mobile","translate","",2,"width","10%"],["pSortableColumn","cityId","translate","",2,"width","8%"],["pSortableColumn","callCounter","translate","",2,"width","8%"],["translate","",2,"width","10%"],[1,"fs-5"],[3,"click"],[1,"d-inline"],["ngbDropdown","",1,"dropdown"],["tooltipPosition","top",1,"mdi","mdi-cog-outline","d-inline","text-muted","fs-16","align-middle","me-1",3,"ngbTooltip"],["type","button","data-bs-toggle","dropdown","aria-expanded","false","ngbDropdownToggle","",1,"btn","btn-soft-secondary","btn-sm","dropdown","arrow-none"],[1,"ri-more-fill"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["href","javascript:void(0);","data-bs-toggle","modal","data-bs-target","#removeItemModal",1,"dropdown-item"],[1,"ri-phone-fill","align-bottom","me-2","text-muted"],["translate","orderManagement.order.Recall"],[1,"ri-time-fill","text-warning"],[1,"ri-user-location-fill","text-primary"],["translate","",1,"text-center","text-danger","text-bold","fs-6","p-3"],[1,"row","px-1","py-1","overflow-hidden"],[1,"col-sm-12","col-md-5","d-flex","align-items-center","justify-content-center","justify-content-md-start"],[3,"pagination"],[3,"lengthChange","lengthTable"],[1,"col-sm-12","col-md-7","fs-3","d-flex","align-items-center","justify-content-center","justify-content-md-end"],[3,"pageChange","pageSize","collectionSize","page","maxSize","rotate","boundaryLinks"],[3,"deleteConfirm","dismiss"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gdfrsvpt.json","stroke","bold","state","hover-oscillate","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","orderManagement.order.RecallMessage",4,"ngIf"],[4,"ngIf"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","save","translate","general.action.save",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"],["translate","orderManagement.order.RecallMessage"]],template:function(a,n){if(1&a){const r=e.RV6();e.j41(0,"div",5)(1,"div",6)(2,"div",7)(3,"base-filter",8),e.bIt("reset",function(){return e.eBV(r),e.Njj(n.onReset())})("search",function(){return e.eBV(r),e.Njj(n.onSearch())})("exportXlsx",function(){return e.eBV(r),e.Njj(n.onExportXlsx())})("addNew",function(){return e.eBV(r),e.Njj(n.goRegister())}),e.qex(4,9),e.j41(5,"div",10)(6,"div",11)(7,"input",12),e.nI1(8,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.orderCode,o)||(n.pagination.orderCode=o),e.Njj(o)}),e.k0s(),e.nrm(9,"i",13),e.k0s()(),e.j41(10,"div",10)(11,"div",11)(12,"input",14),e.nI1(13,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.agentName,o)||(n.pagination.agentName=o),e.Njj(o)}),e.k0s(),e.nrm(14,"i",13),e.k0s()(),e.j41(15,"div",10)(16,"div",11)(17,"input",12),e.nI1(18,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.mobile,o)||(n.pagination.mobile=o),e.Njj(o)}),e.k0s(),e.nrm(19,"i",13),e.k0s()(),e.j41(20,"div",10)(21,"div",11)(22,"ng-select",15),e.nI1(23,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.channelCode,o)||(n.pagination.channelCode=o),e.Njj(o)}),e.k0s()()(),e.j41(24,"div",10)(25,"div",11)(26,"ng-select",16),e.nI1(27,"translate"),e.bIt("change",function(o){return e.eBV(r),e.Njj(n.oncityChange(o))}),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.cityCode,o)||(n.pagination.cityCode=o),e.Njj(o)}),e.k0s()()(),e.j41(28,"div",10)(29,"div",11)(30,"ng-select",17),e.nI1(31,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.pagination.districtName,o)||(n.pagination.districtName=o),e.Njj(o)}),e.k0s()()(),e.j41(32,"div",18)(33,"input",19),e.nI1(34,"translate"),e.mxI("ngModelChange",function(o){return e.eBV(r),e.DH7(n.searchForm.creationDates,o)||(n.searchForm.creationDates=o),e.Njj(o)}),e.k0s()(),e.bVm(),e.k0s(),e.j41(35,"div",20)(36,"div",21)(37,"p-table",22,0),e.bIt("onLazyLoad",function(o){return e.eBV(r),e.Njj(n.tableChange(o))})("selectionChange",function(o){return e.eBV(r),e.Njj(n.onSelectionChange(o))}),e.DNE(39,nt,22,0,"ng-template",23)(40,it,29,11,"ng-template",24),e.k0s()(),e.DNE(41,rt,2,0,"div",25)(42,ot,6,8,"div",26),e.k0s()()()(),e.DNE(43,st,1,0,"ng-template",null,1,e.C5r)(45,mt,16,5,"ng-template",null,2,e.C5r)}2&a&&(e.R7$(3),e.Y8G("totalItems",n.pagination.totalItems)("title",n.title),e.R7$(4),e.FS9("placeholder",e.bMT(8,30,"orderManagement.order.orderCode")),e.R50("ngModel",n.pagination.orderCode),e.R7$(5),e.FS9("placeholder",e.bMT(13,32,"orderManagement.order.agentName")),e.R50("ngModel",n.pagination.agentName),e.R7$(5),e.FS9("placeholder",e.bMT(18,34,"orderManagement.order.mobile")),e.R50("ngModel",n.pagination.mobile),e.R7$(5),e.FS9("placeholder",e.bMT(23,36,"orderManagement.order.channelName")),e.Y8G("items",n.channels)("multiple",!1),e.R50("ngModel",n.pagination.channelCode),e.R7$(4),e.FS9("placeholder",e.bMT(27,38,"orderManagement.order.cityName")),e.Y8G("items",n.cities)("multiple",!1),e.R50("ngModel",n.pagination.cityCode),e.R7$(4),e.FS9("placeholder",e.bMT(31,40,"orderManagement.order.districtName")),e.Y8G("items",n.districts)("multiple",!1),e.R50("ngModel",n.pagination.districtName),e.R7$(3),e.FS9("placeholder",e.bMT(34,42,"orderManagement.order.creationDate")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.creationDates),e.R7$(4),e.Y8G("value",n.entities)("rows",n.pagination.pageSize)("lazy",!0)("totalRecords",n.pagination.totalItems),e.R7$(4),e.Y8G("ngIf",n.pagination.totalItems<=0),e.R7$(),e.Y8G("ngIf",n.pagination.totalItems>0))},dependencies:[h.bT,c.qT,c.me,c.Q0,c.BC,c.cb,c.vS,c.cV,m.tg,m.do,m.U0,m.s5,k.kL,Y.g,P.p,H.w,z.b,p.Mm,j.XI,x.Ei,j.Tg,f.Cv,R.vr,m.md,D.m,h.vh,p.D9],encapsulation:2})}}return i})();function gt(i,l){1&i&&e.nrm(0,"app-all-order")}function pt(i,l){1&i&&e.nrm(0,"app-pending-order")}function ht(i,l){1&i&&e.nrm(0,"app-recall-orders")}let ut=(()=>{class i extends O.w{constructor(t,a,n,r,s,o,C,v,b,M,F,y,T){super(t,a,C,n,r,s,o),this.baseService=n,this.authDaamService=v,this.excelService=b,this.cityService=M,this.districtService=F,this.channelService=y,this.router=T,this.title="orderManagement.order.title",this.titleOperation="orderManagement.order.titleOperation",this.active=1,this.activeindex="1"}onNavChange(t){1===t.nextId&&(this.activeindex="1"),3===t.nextId&&(this.activeindex="3")}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(_.nX),e.rXU(p.c$),e.rXU(S.Q),e.rXU(I.u),e.rXU(h.vh),e.rXU(f.eD),e.rXU(m.Bq),e.rXU(w.J),e.rXU(A.V),e.rXU(V.h),e.rXU(E.m),e.rXU(G.l),e.rXU(_.Ix))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-all-order-types"]],features:[e.Vt3],decls:20,vars:12,consts:[["nav","ngbNav"],[3,"title","breadcrumbItems"],[1,"row"],[1,"col-lg-12"],["ngbNav","",1,"nav","nav-tabs-custom","card-header-tabs","border-bottom-0",3,"activeIdChange","navChange","activeId"],[3,"hasProgressBar","fgsType","loaderId"],[3,"ngbNavItem"],["ngbNavLink",""],["translate","orderManagement.order.all"],["ngbNavContent",""],["translate","orderManagement.order.pending"],["translate","orderManagement.order.Recall"],[1,"mt-2",3,"ngbNavOutlet"]],template:function(a,n){if(1&a){const r=e.RV6();e.nrm(0,"app-breadcrumbs",1),e.nI1(1,"translate"),e.j41(2,"div",2)(3,"div",3)(4,"ul",4,0),e.mxI("activeIdChange",function(o){return e.eBV(r),e.DH7(n.active,o)||(n.active=o),e.Njj(o)}),e.bIt("navChange",function(o){return e.eBV(r),e.Njj(n.onNavChange(o))}),e.nrm(6,"ngx-ui-loader",5),e.j41(7,"li",6)(8,"a",7),e.nrm(9,"span",8),e.k0s(),e.DNE(10,gt,1,0,"ng-template",9),e.k0s(),e.j41(11,"li",6)(12,"a",7),e.nrm(13,"span",10),e.k0s(),e.DNE(14,pt,1,0,"ng-template",9),e.k0s(),e.j41(15,"li",6)(16,"a",7),e.nrm(17,"span",11),e.k0s(),e.DNE(18,ht,1,0,"ng-template",9),e.k0s()(),e.nrm(19,"div",12),e.k0s()()}if(2&a){const r=e.sdS(5);e.FS9("title",e.bMT(1,10,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems),e.R7$(4),e.R50("activeId",n.active),e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",n.loaderSearchShap)("loaderId",n.searchLoader),e.R7$(),e.Y8G("ngbNavItem",1),e.R7$(4),e.Y8G("ngbNavItem",2),e.R7$(4),e.Y8G("ngbNavItem",3),e.R7$(4),e.Y8G("ngbNavOutlet",r)}},dependencies:[m.Um,m.X9,m.sy,m.Gx,m.Ri,m.WA,m.m_,$.m,p.Mm,f.Cv,ze,tt,ct,p.D9],encapsulation:2})}}return i})();const _t=(i,l)=>({"btn-outline-success":i,"btn-outline-danger":l});function ft(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goNext())}),e.nrm(1,"i",21)(2,"span",22),e.k0s()}}function bt(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goBack())}),e.nrm(1,"i",23)(2,"span",24),e.k0s()}}function Ct(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goBack())}),e.nrm(1,"span",24)(2,"i",23),e.k0s()}}function vt(i,l){if(1&i){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.goNext())}),e.nrm(1,"span",22)(2,"i",21),e.k0s()}}function jt(i,l){if(1&i&&(e.qex(0),e.j41(1,"th",35),e.EFF(2),e.k0s(),e.bVm()),2&i){const t=l.$implicit;e.R7$(2),e.SpI(" ",t.teamName," ")}}function Mt(i,l){if(1&i&&(e.qex(0),e.j41(1,"td")(2,"span",37),e.EFF(3),e.k0s(),e.nrm(4,"br"),e.j41(5,"span",38),e.EFF(6),e.k0s()(),e.bVm()),2&i){const t=e.XpG().$implicit;e.R7$(3),e.JRh(t.serviceName),e.R7$(3),e.JRh(t.orderId)}}function Ft(i,l){1&i&&e.nrm(0,"span",44)}function yt(i,l){1&i&&e.nrm(0,"span",45)}function Tt(i,l){if(1&i){const t=e.RV6();e.qex(0),e.j41(1,"td")(2,"div",39)(3,"input",40),e.bIt("change",function(){e.eBV(t);const n=e.XpG(4);return e.Njj(n.onTimeAvaliables())}),e.mxI("ngModelChange",function(n){e.eBV(t);const r=e.XpG().$implicit;return e.DH7(r.isSelected,n)||(r.isSelected=n),e.Njj(n)}),e.k0s(),e.j41(4,"label",41),e.DNE(5,Ft,1,0,"span",42)(6,yt,1,0,"span",43),e.k0s()()(),e.bVm()}if(2&i){const t=e.XpG().$implicit;e.R7$(3),e.R50("ngModel",t.isSelected),e.Y8G("id",t.id),e.R7$(),e.FS9("for",t.id),e.Y8G("ngClass",e.l_i(6,_t,t.isSelected,!t.isSelected)),e.R7$(),e.Y8G("ngIf",t.isSelected),e.R7$(),e.Y8G("ngIf",!t.isSelected)}}function St(i,l){if(1&i&&(e.qex(0),e.DNE(1,Mt,7,2,"ng-container",36)(2,Tt,7,9,"ng-container",36),e.bVm()),2&i){const t=l.$implicit;e.R7$(),e.Y8G("ngIf",!t.isAvaliable),e.R7$(),e.Y8G("ngIf",t.isAvaliable)}}function It(i,l){if(1&i&&(e.qex(0),e.j41(1,"tr")(2,"td"),e.EFF(3),e.k0s(),e.DNE(4,St,3,2,"ng-container",34),e.k0s(),e.bVm()),2&i){const t=l.$implicit;e.R7$(3),e.JRh(t.diaplayName),e.R7$(),e.Y8G("ngForOf",t.availableTimes)}}function Rt(i,l){if(1&i&&(e.j41(0,"div",25)(1,"div",26)(2,"div",27),e.nrm(3,"ngx-ui-loader",28),e.j41(4,"div",29)(5,"div",30)(6,"table",31)(7,"thead",32)(8,"tr"),e.nrm(9,"th",33),e.DNE(10,jt,3,1,"ng-container",34),e.k0s()(),e.j41(11,"tbody"),e.DNE(12,It,5,2,"ng-container",34),e.k0s()()()()()()()),2&i){const t=e.XpG();e.R7$(3),e.Y8G("loaderId","timeAvailable"),e.R7$(7),e.Y8G("ngForOf",t.teams),e.R7$(2),e.Y8G("ngForOf",t.timesList)}}let kt=(()=>{class i{constructor(t,a,n,r,s){this.alertService=t,this.orderService=a,this.datePipe=n,this.translateService=r,this.loader=s,this.title="orderManagement.timeAvailable.title",this.searchForm={date:new Date},this.cities=[],this.categories=[],this.dateCurrent=new Date,this.timesList=[],this.teams=[],this.onTimeSelected=new e.bkB,this.notifier=new Z.B}ngOnInit(){this.lang=this.translateService.currentLang,this.GetTimeAvailableLookup()}GetTimeAvailableLookup(){this.orderService.GetTimeAvailableLookup().pipe((0,u.Q)(this.notifier)).subscribe(t=>{this.cities=t.data.cities,this.categories=t.data.categories})}getTimeAvailables(){if(!this.validateForm())return;let a={};a.serviceCategoryId=this.searchForm.serviceCategoryId,a.cityId=this.searchForm.cityId,this.searchForm.date&&(a.date=this.datePipe.transform(this.searchForm.date,"yyyy-MM-ddT00:00:00.000")),this.loader.startLoader("timeAvailable"),this.orderService.GetAvailableTime(this.searchForm).subscribe(n=>{this.loader.stopLoader("timeAvailable"),this.timesList=n.data.timesList,this.teams=n.data.teams})}validateForm(){return this.searchForm.cityId?this.searchForm.serviceCategoryId?!!this.searchForm.date||(this.alertService.error("orderManagement.timeAvailable.selectDate"),!1):(this.alertService.error("orderManagement.timeAvailable.selectServiceCategory"),!1):(this.alertService.error("orderManagement.timeAvailable.selectCity"),!1)}goBack(){this.searchForm.date=new Date(this.searchForm.date),this.searchForm.date.setDate(this.searchForm.date.getDate()-1),this.getTimeAvailables()}goNext(){this.searchForm.date=new Date(this.searchForm.date),this.searchForm.date.setDate(this.searchForm.date.getDate()+1),this.getTimeAvailables()}onTimeAvaliables(){const t=this.timesList.flatMap(a=>a.availableTimes.filter(n=>n.isSelected).map(n=>({OrderCode:0,teamCode:n.teamId,workTimeCode:n.timeId})));this.onTimeSelected.emit(t)}ngOnDestroy(){this.notifier.next(),this.notifier.complete()}static{this.\u0275fac=function(a){return new(a||i)(e.rXU(I.u),e.rXU(S.Q),e.rXU(h.vh),e.rXU(p.c$),e.rXU(f.eD))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["time-available"]],outputs:{onTimeSelected:"onTimeSelected"},decls:25,vars:17,consts:[[1,"card","d-print-none"],[1,"card-body"],[1,"row","justify-content-around","mb-2"],[1,"col-12","col-md-4"],["translate","orderManagement.timeAvailable.city",1,"required"],[1,"search-box"],["id","cityId","name","cityId","name","cityId","bindValue","id","bindLabel","name",3,"ngModelChange","ngModel","items","multiple"],[1,"col-12","col-md-6"],["translate","orderManagement.timeAvailable.categories",1,"required"],["id","serviceCategoryId","name","serviceCategoryId","bindValue","id","bindLabel","name",3,"ngModelChange","ngModel","items","multiple"],[1,"row","justify-content-center"],[1,"col-12","col-md-2"],["class","btn w-100 btn-sm btn-success fs-5",3,"click",4,"ngIf"],[1,"input-group"],["id","basic-addon1",1,"input-group-text","border","btn","btn-success",3,"click"],[1,"ri-calendar-line","align-bottom","me-1"],["type","text","mwlFlatpickr","","id","date","name","date",1,"form-control","bg-light","border-light","flatpickr-input","active",3,"ngModelChange","altInput","convertModelValue","placeholder","ngModel"],[1,"col-12","col-md-2","text-right"],["class","btn   w-100 btn-sm btn-success fs-5",3,"click",4,"ngIf"],["class","row",4,"ngIf"],[1,"btn","w-100","btn-sm","btn-success","fs-5",3,"click"],[1,"ri-arrow-left-circle-line","mx-2"],["translate","orderManagement.timeAvailable.next"],[1,"ri-arrow-right-circle-line","mx-2"],["translate","orderManagement.timeAvailable.back"],[1,"row"],[1,"col-12"],[1,"card"],["fgsColor","rgba(255,255,255,1)",3,"loaderId"],["id","printTable",1,"card-body"],[1,"table-responsive","table-card"],[1,"table","table-border","text-center","table-hover","table-centered","align-middle","table-nowrap","mb-0"],[1,"text-muted","border","table-light"],["translate","orderManagement.timeAvailable.time"],[4,"ngFor","ngForOf"],["scope","col",1,"border-1","text-center"],[4,"ngIf"],[1,"badge","d-inline-block","bg-primary-subtle","text-primary"],[1,"badge","d-inline-block","bg-success-subtle","text-success"],[1,"hstack","gap-2","flex-wrap"],["type","checkbox",1,"btn-check",3,"change","ngModelChange","ngModel","id"],[1,"btn","btn-outline-primary",3,"ngClass","for"],["translate","orderManagement.timeAvailable.block",4,"ngIf"],["translate","orderManagement.timeAvailable.unBlock",4,"ngIf"],["translate","orderManagement.timeAvailable.block"],["translate","orderManagement.timeAvailable.unBlock"]],template:function(a,n){1&a&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.nrm(4,"label",4),e.j41(5,"div",5)(6,"ng-select",6),e.mxI("ngModelChange",function(s){return e.DH7(n.searchForm.cityId,s)||(n.searchForm.cityId=s),s}),e.k0s()()(),e.j41(7,"div",7),e.nrm(8,"label",8),e.j41(9,"div",5)(10,"ng-select",9),e.mxI("ngModelChange",function(s){return e.DH7(n.searchForm.serviceCategoryId,s)||(n.searchForm.serviceCategoryId=s),s}),e.k0s()()()(),e.j41(11,"div",10)(12,"div",11),e.DNE(13,ft,3,0,"button",12)(14,bt,3,0,"button",12),e.k0s(),e.j41(15,"div",3)(16,"div",13)(17,"span",14),e.bIt("click",function(){return n.getTimeAvailables()}),e.nrm(18,"i",15),e.k0s(),e.j41(19,"input",16),e.nI1(20,"translate"),e.mxI("ngModelChange",function(s){return e.DH7(n.searchForm.date,s)||(n.searchForm.date=s),s}),e.k0s()()(),e.j41(21,"div",17),e.DNE(22,Ct,3,0,"button",12)(23,vt,3,0,"button",18),e.k0s()()()(),e.DNE(24,Rt,13,3,"div",19)),2&a&&(e.R7$(6),e.R50("ngModel",n.searchForm.cityId),e.Y8G("items",n.cities)("multiple",!1),e.R7$(4),e.R50("ngModel",n.searchForm.serviceCategoryId),e.Y8G("items",n.categories)("multiple",!0),e.R7$(3),e.Y8G("ngIf","ar"!=n.lang),e.R7$(),e.Y8G("ngIf","ar"==n.lang),e.R7$(5),e.FS9("placeholder",e.bMT(20,15,"orderManagement.timeAvailable.date")),e.Y8G("altInput",!0)("convertModelValue",!0),e.R50("ngModel",n.searchForm.date),e.R7$(3),e.Y8G("ngIf","ar"!=n.lang),e.R7$(),e.Y8G("ngIf","ar"==n.lang),e.R7$(),e.Y8G("ngIf",n.timesList.length>0))},dependencies:[h.YU,h.Sq,h.bT,p.Mm,c.me,c.Zm,c.BC,c.vS,f.Cv,k.kL,R.vr,p.D9]})}}return i})();const xt=[{path:"list",component:ut,resolve:{data:Ie},canActivate:[N.B],data:{roles:["admin"]}},{path:"map",component:se,canActivate:[N.B],data:{roles:["admin"]}},{path:"new",component:ye,canActivate:[N.B],data:{roles:["admin"]}},{path:"ServiceAfterSale",component:Ee,resolve:{data:Ge.B},canActivate:[N.B],data:{roles:["admin"]}},{path:"timeAvailable",component:(()=>{class i{constructor(){this.title="orderManagement.timeAvailable.title"}ngOnInit(){}onTimeSelected(t){console.log(t)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-timeAvailable"]],decls:3,vars:4,consts:[[3,"title","breadcrumbItems"],[3,"onTimeSelected"]],template:function(a,n){1&a&&(e.nrm(0,"app-breadcrumbs",0),e.nI1(1,"translate"),e.j41(2,"time-available",1),e.bIt("onTimeSelected",function(s){return n.onTimeSelected(s)}),e.k0s()),2&a&&(e.FS9("title",e.bMT(1,2,n.title)),e.Y8G("breadcrumbItems",n.breadCrumbItems))},dependencies:[$.m,kt,p.D9]})}}return i})(),canActivate:[N.B],data:{roles:["admin"]}}];let Dt=(()=>{class i{static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[_.iI.forChild(xt),_.iI]})}}return i})();var Ot=d(71144);let wt=(()=>{class i{constructor(){(0,ne.eV)(ie().loadAnimation)}static{this.\u0275fac=function(a){return new(a||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[h.MD,c.YN,c.X1,m.zH,m.Pv,m.Gk,m.h_,m.c9,q.A,ee.JG,k.ND,te.r,Dt,re.G,p.h,j.bG,Q.q4,oe.H_,m.c9,f.th,R.MQ,m.n8,Ot.j]})}}return i})()}}]);