"use strict";(self.webpackChunkvelzon=self.webpackChunkvelzon||[]).push([[863],{29935:(E,p,i)=>{i.d(p,{m:()=>r});var e=i(54438);let r=(()=>{class h{constructor(d){this.el=d}onChange(){this.el.nativeElement.value=this.el.nativeElement.value.trim()}static{this.\u0275fac=function(n){return new(n||h)(e.rXU(e.aKT))}}static{this.\u0275dir=e.FsC({type:h,selectors:[["","InputTirmFilter",""]],hostBindings:function(n,o){1&n&&e.bIt("change",function(){return o.onChange()})}})}}return h})()},56131:(E,p,i)=>{i.d(p,{E:()=>h});var e=i(7673),r=i(99437);class h{constructor(d,n,o){this.router=d,this.BaseService=n,this.alertService=o,this.pagination={pageNumber:1,pageSize:10}}resolve(d,n){return this.BaseService.get(this.pagination).pipe((0,r.W)(o=>(this.router.navigate([""]),this.alertService.error(o),(0,e.of)(null))))}}},75622:(E,p,i)=>{i.d(p,{w:()=>I});var e=i(21413),r=i(56977),h=i(37021),m=i(35335),d=i(45236),n=i(70980),o=i(99437),c=i(18810),u=i(35263),a=i(36158),l=i(54438),f=i(51188),v=i(8147),M=i(22960),O=i(67569),L=i(3888),b=i(60177),C=i(1530);let I=(()=>{class D{constructor(t,s,g,_,S,P,T){this.routerActive=t,this.translateService=s,this.modalService=g,this.baseService=_,this.alertService=S,this.datePipe=P,this.ngxLoader=T,this.title="",this.mainDelay=50,this.selectedRow=[],this.pagination={pageNumber:1,pageSize:10},this.notifier=new e.B,this.checkAll=!1,this.checkOne=!1,this.checkMore=!1,this.loader=!1,this.form={},this.isEditForm=!1,this.draw=1,this.index=0,this.lengthSelect=0,this.screenName="",this.filterToggle=!0,this.start=1,this.startFirstLoad=!0,this.btnDisabled=!0,this.loaderSearchShap=a.cX,this.loaderOperationShap=a.$$,this.operationLoader=a.ZW,this.loaderDeleteShap=a.jg,this.mainTable=a.uG,this.searchLoader=a.a7,this.deleteLoader=a.Fq,this.langArabic="ar",this.paymentTypes=[],this.tableLengthSelect=[10,20,30,50,100,500,1e3],this.maxSizePagination=10,this.isResolveList=!1,this.countLoad=0,this.pagination.pageSize=10,this.pagination.pageNumber=1}ngOnInit(){this.lang=this.translateService.currentLang,this.translateConfig(),this.ngOnInitMore()}ngOnInitMore(){}routeDataConfig(){this.routerActive.data.pipe((0,r.Q)(this.notifier)).subscribe(t=>{this.entities=t.data.result,this.pagination=t.data.pagination,this.pagination.pageNumber=1,this.pagination.pageSize=10,this.ngxLoader.stopLoader(a.a7)},t=>{this.alertService.error()})}translateConfig(){this.translateService.onLangChange.pipe((0,r.Q)(this.notifier)).subscribe(t=>{this.lang=t.lang})}getTranslationText(t){let s="";return this.translateService.get(t).pipe((0,r.Q)(this.notifier)).subscribe(g=>{s=g}),s}ngAfterViewInit(){this.ngAfterViewInitMore()}ngAfterViewInitMore(){}getRenderString(t){return null!=t?t.substring(0,10)+"...":""}getRenderIndex(t){return this.index++,this.index}successDataTable(t){this.ngxLoader.stopLoader(a.a7),this.pagination.totalItems=t.data.pagination.totalItems,this.startFirstLoad=!1}errorDataTable(){this.ngxLoader.stopLoader(a.a7),this.alertService.error()}openModalTitle(t,s="md"){this.isEditForm=!1,this.form={},this.modalService.open(t,{centered:!0,size:s})}openModal(t,s,g="md"){this.isEditForm=!1,this.form={},this.selectedRow=[{id:t}],this.modalService.open(s,{centered:!0,size:g})}openModalMoreOperation(t){this.isEditForm=!1,this.moreIdSelected=this.selectedRow.map(s=>s.id)}closeModelDeleted(){this.modalRef?.hide(),this.loader=!1,this.btnDisabled=!0}OnSearch(t){this.ngxLoader.startLoader(a.a7),this.loadentities()}OnSubmit(){this.ngxLoader.startLoader(this.operationLoader),!0===this.isEditForm?this.editEntity():this.registerEntity()}loadentities(){this.countLoad=this.countLoad+1,(!this.isResolveList||1!==this.countLoad)&&(this.ngxLoader.startLoader(a.a7),this.baseService.get(this.pagination).pipe((0,r.Q)(this.notifier)).subscribe(t=>{this.ngxLoader.stopLoader(a.a7),this.entities=t.data,this.pagination.totalItems=t.totalItems,this.LoadSuccess()},t=>{this.ngxLoader.stopLoader(a.a7),this.alertService.error(t)}),this.checkMore=this.checkOne=this.checkAll=!1,this.lengthSelect=0,this.selectedRow=[])}LoadSuccess(){}tableChange(t){this.pagination.filterType=t.sortField,this.pagination.sortType=1==t.sortOrder?"asc":"desc",this.loadentities()}registerEntity(){let t=this.mapRegisterForm(this.form);this.baseService.register(t).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,d.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader)),(0,o.W)(s=>(0,c.$)(s))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}editEntity(){let t=this.mapForm(this.form);this.baseService.edit(t.expensesItemCode,t).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,d.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(this.operationLoader))).subscribe(s=>{s.success?this.submitFunished():this.alertService.error("general.message."+s.message)},s=>{this.alertService.error("general.message."+s)})}mapForm(t){return t}mapRegisterForm(t){return t.id=0,t}submitFunished(){this.alertService.success(),this.loadentities(),this.modalService?.dismissAll(),this.ngxLoader.stop(a.a7),this.btnDisabled=!0}EditModel(t,s,g="md"){this.isEditForm=!0,this.baseService.getById(t).pipe((0,r.Q)(this.notifier)).subscribe(_=>{_.success?this.form=_.data:this.alertService.error("general.message."+_.message),this.modalService.open(s,{centered:!0,size:g})},_=>{this.alertService.error()})}EditModelTilte(t){this.isEditForm=!0,this.baseService.getById(this.selectedRow[0].id).pipe((0,r.Q)(this.notifier)).subscribe(g=>{g?this.form=g:this.alertService.error("general.message."+g)},g=>{this.alertService.error()})}onSelectionChange(t){this.selectedRow=t,this.lengthSelect=t.length}resetSelected(){this.selectedRow=[],this.lengthSelect=0}pageChanged(t){this.pagination.pageNumber=t,this.loadentities()}ListItemChange(t){this.pagination.pageSize=t.target.value,this.loadentities()}searchChange(t){this.pagination.filterValue=t,this.loadentities()}DeleteConfirm(){console.log(this.selectedRow),this.ngxLoader.startLoader(a.Fq);let t=this.selectedRow.map(s=>s.id);this.baseService.deleteRange(t).pipe((0,h.O)(),(0,m.c)(this.mainDelay),(0,d.Z)(),(0,r.Q)(this.notifier),(0,n.j)(()=>this.ngxLoader.stopLoader(a.Fq))).subscribe(s=>{s.success?(this.alertService.success(),this.loadentities(),this.modalService.dismissAll(),this.resetSelected()):this.alertService.error("general.message."+s)},()=>{this.alertService.error()})}getIds(){return this.selectedRow.map(t=>t.id)}isEmpty(t){return(void 0===t||null==t||t.length)<=0}OnReset(t){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}onReset(){this.form={},this.pagination={pageSize:10,pageNumber:1,totalItems:this.pagination.totalItems}}closeModel(t){this.modalRef?.hide()}ngOnDestroy(){this.notifier.next(),this.notifier.complete(),this.OnDestroyMore()}OnDestroyMore(){}static{this.\u0275fac=function(s){return new(s||D)(l.rXU(f.nX),l.rXU(v.c$),l.rXU(M.Bq),l.rXU(O.d),l.rXU(L.u),l.rXU(b.vh),l.rXU(C.eD))}}static{this.\u0275cmp=l.VBU({type:D,selectors:[["app-base"]],viewQuery:function(s,g){if(1&s&&l.GBs(u.XI,5),2&s){let _;l.mGM(_=l.lsd())&&(g.tableMaster=_.first)}},decls:0,vars:0,template:function(s,g){},encapsulation:2})}}return D})()},15084:(E,p,i)=>{i.d(p,{w:()=>n});var e=i(54438),r=i(36158),h=i(8147),m=i(89417),d=i(1530);let n=(()=>{class o{constructor(){this.titleOperation="",this.loaderOperationShap=r.$$,this.deleteLoader=r.Fq,this.deleteConfirm=new e.bkB,this.dismiss=new e.bkB}deleteConfirmFn(){this.deleteConfirm.emit(!0)}dismissFn(){this.dismiss.emit(!0)}static{this.\u0275fac=function(a){return new(a||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["delete-modal"]],inputs:{titleOperation:"titleOperation"},outputs:{deleteConfirm:"deleteConfirm",dismiss:"dismiss"},decls:15,vars:3,consts:[["formEntity","ngForm"],[3,"ngSubmit"],[3,"hasProgressBar","fgsType","loaderId"],[1,"modal-content"],[1,"modal-header"],["type","button","data-bs-dismiss","modal","aria-label","Close","id","btn-close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-2","text-center"],["src","https://cdn.lordicon.com/gsqxdxog.json","trigger","loop","colors","primary:#f7b84b,secondary:#f06548",2,"width","100px","height","100px"],[1,"mt-4","pt-2","fs-15","mx-4","mx-sm-5"],["translate","general.message.areyouSureDelete"],[1,"text-muted","mx-4","mb-0"],[1,"d-flex","gap-2","justify-content-center","mt-4","mb-2"],["type","submit","id","delete","translate","general.action.delete",1,"btn","w-sm","btn-danger"],["type","button","data-bs-dismiss","modal","translate","general.action.close",1,"btn","w-sm","btn-light",3,"click"]],template:function(a,l){if(1&a){const f=e.RV6();e.j41(0,"form",1,0),e.bIt("ngSubmit",function(){return e.eBV(f),e.Njj(l.deleteConfirmFn())}),e.nrm(2,"ngx-ui-loader",2),e.j41(3,"div",3)(4,"div",4)(5,"button",5),e.bIt("click",function(){return e.eBV(f),e.Njj(l.dismissFn())}),e.k0s()(),e.j41(6,"div",6)(7,"div",7),e.nrm(8,"lord-icon",8),e.j41(9,"div",9),e.nrm(10,"h4",10)(11,"p",11),e.k0s()(),e.j41(12,"div",12),e.nrm(13,"button",13),e.j41(14,"button",14),e.bIt("click",function(){return e.eBV(f),e.Njj(l.dismissFn())}),e.k0s()()()()()}2&a&&(e.R7$(2),e.Y8G("hasProgressBar",!1)("fgsType",l.loaderOperationShap)("loaderId",l.deleteLoader))},dependencies:[h.Mm,m.qT,m.cb,m.cV,d.Cv],encapsulation:2})}}return o})()},88148:(E,p,i)=>{i.d(p,{p:()=>h});var e=i(54438),r=i(8147);let h=(()=>{class m{static{this.\u0275fac=function(o){return new(o||m)}}static{this.\u0275cmp=e.VBU({type:m,selectors:[["ngb-pagination-info"]],inputs:{pagination:"pagination"},decls:6,vars:2,consts:[[1,"d-inline-block","mx-1","text-pInfo"],["translate","general.table.pFrom",1,"text-pInfo"],["translate","general.table.item",1,"text-pInfo"]],template:function(o,c){1&o&&(e.j41(0,"span",0),e.EFF(1),e.k0s(),e.nrm(2,"span",1),e.j41(3,"span",0),e.EFF(4),e.k0s(),e.nrm(5,"span",2)),2&o&&(e.R7$(),e.JRh(c.pagination.totalItems>c.pagination.pageNumber*c.pagination.pageSize?c.pagination.pageNumber*c.pagination.pageSize:c.pagination.totalItems),e.R7$(3),e.JRh(c.pagination.totalItems))},dependencies:[r.Mm],styles:[".text-pInfo[_ngcontent-%COMP%]{font-size:.7rem;color:#8a96a0}"]})}}return m})()},91580:(E,p,i)=>{i.d(p,{g:()=>d});var e=i(54438),r=i(60177),h=i(89417);function m(n,o){if(1&n&&(e.j41(0,"option"),e.EFF(1),e.k0s()),2&n){const c=o.$implicit;e.R7$(),e.JRh(c)}}let d=(()=>{class n{constructor(){this.lengthChange=new e.bkB}ListItemChange(c){this.lengthChange.emit(c)}static{this.\u0275fac=function(u){return new(u||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["table-length"]],inputs:{lengthTable:"lengthTable"},outputs:{lengthChange:"lengthChange"},decls:4,vars:1,consts:[[1,"card-toolbar","mx-2"],[1,"fs-2","text-primary"],[1,"form-select","mx-2","d-inline","form-select-sm","w-auto",3,"change"],[4,"ngFor","ngForOf"]],template:function(u,a){1&u&&(e.j41(0,"div",0),e.nrm(1,"span",1),e.j41(2,"select",2),e.bIt("change",function(f){return a.ListItemChange(f)}),e.DNE(3,m,2,1,"option",3),e.k0s()()),2&u&&(e.R7$(3),e.Y8G("ngForOf",a.lengthTable))},dependencies:[r.Sq,h.xH,h.y7],encapsulation:2})}}return n})()}}]);